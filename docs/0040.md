# 为赢而建:深入奥巴马的竞选技术

> 原文:[https://ars technica . com/information-technology/2012/11/build-to-win-deep-inside-Obama-campaign-tech/？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://arstechnica.com/information-technology/2012/11/built-to-win-deep-inside-obamas-campaign-tech/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

![The tech unit's sign, autographed by its members.](../Images/69549e514964cd86fdab9dcf30591492.png)



技术小组的标志，有成员的亲笔签名。





巴拉克·奥巴马的连任是靠人赢得的，而不是靠软件。但在与上周选举如此接近的竞争中，软件可能给了奥巴马支持美国组织的人一个微小的优势——从某些方面来说，让他们比竞争对手更有效率、更有联系、更积极参与。

这种优势是由总统政治史上独一无二的一群人的工作提供的:Team Tech，一个由技术专业人员组成的专门的内部团队，他们像互联网创业公司一样运作，利用开源软件、Web 服务和云计算能力的组合。结果是任何创业公司都会认为成功的那种数字。正如奥巴马技术团队 DevOps 小组的负责人斯科特·范登普拉斯(Scott VanDenPlas)在推特上所说:

> 4Gb/s，每秒 10k 个请求，2，000 个节点，3 个数据中心，180TB 和 85 亿个请求。设计，部署，拆除在 583 天内选出总统。 [#madops](https://twitter.com/search?q=%23madops&src=hash)

但是这项技术并不总是工作得很好。四年前，奥巴马阵营的处境与 2012 年的罗姆尼差不多，在初选结束后，奥巴马只有很短的时间来组织一场全国性的竞选活动。尽管有一些具有技术专长的人，2008 年奥巴马竞选团队缺乏内部 IT 团队，依靠供应商和现场志愿者来承担大部分工作。

“上次竞选中最大的问题之一是，你让所有这些在实地工作的志愿者开始构建自己版本的这些流氓工具，一遍又一遍地做同样的事情，”奥巴马美国高级工程师克林特·埃克(Ars Technica 校友)说。每个外地办事处都使用电子表格或被黑客入侵的网络应用程序组装了自己的工具来跟踪运营情况。他们通过谷歌群或简单的电子邮件列表进行交流。“让每个人都保持一致很难，”他补充道。

然后是被大肆吹嘘的秘密武器——胡迪尼计划——一个投票系统，它被认为是选举日地面游戏的革命。每个摇摆州选区的每个选民都被分配了一个数字代码；当投票站观察员记录下到达的选民时，他们应该拨入胡迪尼的自动热线。但是热线的负载使它停机了，竞选活动不得不失败，要么发短信，要么把代码打回当地的外地办事处，在那里数据被手动重新输入网页。

胡迪尼的数据库没有关闭，它仍然在 2008 年选举日的奥巴马竞选活动中发挥着作用。但是很明显，这个系统还没有为它应该处理的数据浪潮做好准备。“2008 年是‘大白鲨’时刻，”奥巴马代表美国首席技术官哈珀·里德说。“这是，‘天哪，我们需要一艘更大的船。"

所以他们开始建造一个。

![Harper Reed.](../Images/3e7cca10382aac56d8e62e2257500037.png)



哈珀·里德。





## 独角鲸

为了实现这一目标，奥巴马团队几乎完全依赖亚马逊的云计算服务来提供计算和存储能力。埃克说，在高峰期，奥巴马竞选的 IT 基础设施占用了“AWS 北弗吉尼亚数据中心的大量资源”。“我们实际上不得不开始使用更强大的服务器，因为有一段时间，我们在东部数据中心购买了大多数可用的小型弹性计算云实例类型。”

> "里德想用自己的应用程序编程接口来组织这次活动。"

在亚马逊的服务之上，奥巴马团队建立了 Narwhal——一套服务，作为所有竞选应用程序的单一共享数据存储的接口，使快速开发新应用程序和将现有应用程序集成到竞选系统成为可能。这些应用程序包括复杂的分析程序，如 Dreamcatcher，这是一种根据文本中的情感开发的“微目标”选民工具。还有 Dashboard,“虚拟现场办公室”应用程序，帮助志愿者沟通和协作。

奥巴马竞选团队的首席技术官哈珀·里德(Harper Reed)对 Ars 表示:“(通过使用独角鲸)能够将所有应用程序彼此分离，这种能力非常强大。”。“它允许我们单独扩展每个应用程序，并在应用程序之间共享大量数据，这确实为我们节省了大量时间。”由此产生的平台为“奥巴马为美国”提供了帮助“强制增加”志愿者的工具，为他们提供了组织和沟通工具，使奥巴马的“地面游戏”更加有效。

当里德在 2011 年 6 月被奥巴马竞选团队的首席整合与创新官迈克尔·斯莱比(Michael Slaby)提拔上来时，里德所做的选择受到了 2008 年竞选活动的影响，也受到了互联网初创公司心态的影响。

“我们知道我们要做大，”里德说。“我们需要以一种切实可行的方式来设计(竞选活动的 IT 基础设施)。我们也知道我们将受到资源的限制——无论是钱还是人，我们知道我们不会拥有我们想要的一切。”

不过，他们确实拥有现任的优势:有时间准备。“我不认为如果我们不得不处理初选，我们就能(建造独角鲸)，”里德说。

里德设想的架构必须迅速扩大规模。它需要灵活性，允许加入该活动的任何经验水平的开发人员使用他们喜欢的任何语言工作并提高工作效率，并且它必须与供应商的系统集成(例如[蓝州数字](http://www.bluestatedigital.com)和 [NGP 面包车](http://www.ngpvan.com))。它需要处理现场志愿者和活动“数字团队”(负责活动的网络展示、社交和其他数字媒体展示)的需求，同时还要为团队数据的“大数据”机器(活动的分析部门)提供数据。

换句话说，Reed 想用自己的应用程序编程接口(API)来连接这个活动。而且，像许多互联网创业公司一样，他希望云计算能够扩大规模。

“我看了很多建筑，”里德说。“从[前雇主] Threadless 出来，看了亚马逊和其他大型组织所做的事情，以及这些 API 平台变得多么强大，很明显，最好的前进道路是遵循面向服务的架构(SOA)原则，构建一个服务架构，允许我们所有的应用程序连接在一起并共享一个公共数据存储。”

但是建造里德的“更大的船”意味着在更多方面采取类似创业的策略，而不仅仅是在建筑方面。他需要在奥巴马的竞选团队中建立一个团队，表现得像一个互联网创业公司，一个愿意长时间工作的敬业的工程师团队，以快速提升到最终的回报:连任总统。

![The full team in front of Chicago's "Bean."](../Images/8cf8d5dd5b53a4d0c3a5ec2a96dfe398.png)



芝加哥“豆子”前的全队





## 接缝

里德走出去，招募已经了解这个领域的人，既包括本地人才(如埃克)，也包括来自外地、有互联网诚意的人——来自谷歌、脸书、Twitter 和 TripIt 等公司的老手。

埃克说:“所有这些人都有在初创公司工作的经验，以及在像我们在竞选中这样非常紧张的情况下从无到有扩展应用程序的经验。”。

里德补充说:“当你放下你所受到的限制时，很容易就能弄清楚你在雇佣谁。”“你在寻找理解 API 的工程师——在互联网构建平台上花费大量时间的工程师。当你谈论 SOA 时，他们不会嘲笑你，说你在谈论 Java。”

里德说，该团队没有专注于创造新的东西，而是专注于采用他们已经知道有效的东西，并将这些碎片组装在一起。

“我们积极地站在亚马逊这样的巨头的肩膀上，使用其他人建立的技术，”他说。“我们有很好的使用非发明技术的文化。我们对此并不害怕。”

他补充说，在某些情况下，情况正好相反——如果某个东西作为解决方案出现，但从未被其他人大规模使用，那它就“超级可怕”,通常会被避免。民主党打算保守一点。

![The "glamour" of working in a campaign's office.](../Images/0723f0dba0e06cce15a6babb08487ff1.png)



在竞选办公室工作的“魅力”。





## 云

里德加入后不久，第一批新兵就开始蜂拥而至，给了团队 583 天的时间来完成他们的工作。

“很明显，我们需要一个集中的地方，让所有这些数据从我们所有的供应商和新的应用程序流入，”埃克说。“我们需要一个标准的[RESTful API](http://stackoverflow.com/questions/671118/what-exactly-is-restful-programming),任何项目都可以使用任何编程语言和任何 Web 框架进行交流，无论人们对什么最舒服，这样他们就可以立即投入使用。”

> “我们积极地站在巨人的肩膀上，使用其他人开发的技术。”

这意味着独角鲸。Narwhal 的 API 端用 Python 编写，通过标准的 HTTP 请求公开数据元素。虽然它被设计为可以在任何数据存储之上工作，但奥巴马的技术团队依赖于亚马逊基于 MySQL 的关系数据库服务(RDS)。RDS 的“快照”功能允许将数据库映像转储到简单存储服务(S3)实例中，而无需运行备份。

即使共享数据集快速增长，奥巴马的技术团队也能够在整个竞选过程中坚持使用 RDS 尽管这需要一些技巧。

“我们肯定遇到了 RDS 的一些限制，但它们在很大程度上是自己造成的，”埃克说。“我们能够解决这些问题，并扩展 RDS 的应用范围。如果活动持续时间更长，我们肯定会转而迁移到装有 MySQL 的 EC2 大盒子上。”埃克补充说，不必关闭 RDS 意味着奥巴马竞选团队在雇佣额外的数据库管理员上节省了“一大笔钱”。

埃克说，该团队还测试了亚马逊推出的 dynamo db“NoSQL”数据库。虽然它没有取代基于 SQL 的 RDS 服务作为 Narwhal 的数据存储，但它被用于该活动基础设施的其他部分。特别是，它与该运动的社交网络“动员投票”努力结合使用。

Narwhal 的集成元素主要是使用运行亚马逊简单队列服务(SQS)的程序构建的。它从 NGP·范和蓝州数字的应用程序、投票数据提供商和许多其他应用程序中获取数据流，并将它们交给工人应用程序，工人应用程序又将数据填充到 SQS 队列中进行处理，并从供应商的 API 进行转换。Narwhal 使用 SQS 的另一个元素是其应用程序的电子邮件基础设施，使用工人应用程序来处理电子邮件，将它们存储在 S3，以便将它们从一个处理阶段批量传递到另一个处理阶段。

最初，独角鲸的开发是由所有工程师共享的。然而，随着团队在 2012 年初的发展，Narwhal development 分成了两个小组——一个 API 小组，负责开发竞选团队内部开发的应用程序所需的接口；一个集成小组，负责连接来自供应商应用程序的数据流。