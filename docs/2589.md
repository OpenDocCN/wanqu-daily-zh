# 乔尔测试:提高代码质量的 12 个步骤——乔尔谈软件

> 原文:[http://www.joelonsoftware.com/articles/fog0000000043.html?UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](http://www.joelonsoftware.com/articles/fog0000000043.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

你听说过 [SEMA](http://www.sei.cmu.edu/sema/welcome.html) 吗？这是一个相当深奥的衡量软件团队好坏的系统。不，*等等！不要点那个链接！*仅仅是*理解*那种东西就要花掉你大约六年的时间。所以我想出了我自己的、高度不负责任的、草率的测试来评估软件团队的质量。最棒的是，它需要大约 3 分钟。省下的时间，你可以去医学院。

乔尔测验

1.  你使用源代码控制吗？
2.  你能一步到位吗？
3.  你每天都做构建吗？
4.  你有 bug 数据库吗？
5.  你在写新代码之前会修正 bug 吗？
6.  你有最新的时间表吗？
7.  你有说明书吗？
8.  程序员有安静的工作环境吗？
9.  你使用金钱能买到的最好的工具吗？
10.  你有测试员吗？
11.  新应聘者在面试的时候会写代码吗？
12.  你做走廊可用性测试吗？

乔尔测试的巧妙之处在于，很容易对每个问题做出快速的肯定或否定回答。您不必计算每天的代码行数或每个拐点的平均错误数。每个“是”答案给你的团队 1 分。乔尔测试令人失望的是，你*真的不应该*用它来确保你的核电厂软件是安全的。

12 分是完美的，11 分是可以忍受的，但是 10 分或更低，你就有严重的问题了。事实是，大多数软件组织都是以 2 或 3 的分数运行的，他们需要*认真的*帮助，因为像微软这样的公司全职运行 12。

当然，这些不是决定成败的唯一因素:特别是，如果你有一个很棒的软件团队在开发一个没人想要的产品，那么，人们也不会想要它。可以想象一个“枪手”团队，他们不做任何这些事情，但仍然成功地开发出令人难以置信的改变世界的软件。但是，在其他条件相同的情况下，如果你把这 12 件事做对了，你将拥有一个训练有素的团队，可以持续地交付成果。

**1。你使用源代码控制吗？**
我用过商业源码控制包，用过 [CVS](http://www.cvshome.org/) ，免费的，而且我告诉你，CVS 是*精*。但是如果你没有源代码控制，你将会因为试图让程序员一起工作而感到压力。程序员没有办法知道其他人做了什么。错误是不能轻易回滚的。源代码控制系统的另一个优点是源代码本身可以在每个程序员的硬盘上检出——我从未听说过使用源代码控制的项目会丢失大量代码。

**2。你能一步到位吗？**
我的意思是:从最新的源快照构建一个发布版本需要多少个步骤？在优秀的团队中，您可以运行一个脚本，从头开始进行完整的检查，重新构建每一行代码，生成各种版本、语言和#ifdef 组合的可执行文件，创建安装包，并创建最终的媒体— CDROM 布局、下载网站等等。

如果这个过程超过一个步骤，就很容易出错。当你接近发布的时候，你希望有一个快速的周期来修复“最后”的错误，制作最后的 exe，等等。如果编译代码需要 20 个步骤，运行安装构建器，等等。，你会发疯，你会犯愚蠢的错误。

正是因为这个原因，我工作的最后一家公司从 WISE 转到 InstallShield:我们*要求*安装过程能够使用 NT 调度程序从脚本自动运行一夜，WISE 不能从调度程序运行一夜，所以我们放弃了它。(WISE 的好心人向我保证，他们的最新版本确实支持每夜构建。)

**3。你每天都做构建吗？**
当你使用源代码控制时，有时一个程序员会不小心签入一些破坏构建的东西。例如，他们添加了一个新的源文件，在他们的机器上一切都编译得很好，但是他们忘记了将源文件添加到代码库中。所以他们锁上他们的机器，然后回家，浑然不觉，很开心。但是其他人都不能工作，所以他们也不得不回家，不开心。

破坏构建是如此糟糕(并且如此普遍),以至于它有助于每天构建，以确保没有破坏被忽视。对于大型团队来说，确保问题立即得到解决的一个好方法是每天下午进行构建，比如说，在午餐时间。午饭前，每个人都尽可能多地签到。当他们回来时，构建已经完成。如果成功了，太好了！每个人都签出源代码的最新版本，然后继续工作。如果构建失败，您可以修复它，但是每个人都可以继续使用构建前的完整版本的源代码。

在 Excel 团队中，我们有一个规则，任何破坏构建的人，作为对他们的“惩罚”，负责照看构建，直到其他人破坏它。这是一个不破坏构建的好动机，也是一个让每个人轮流参与构建过程的好方法，这样每个人都知道它是如何工作的。

在我的文章[中阅读更多关于每日构建的内容，每日构建是你的朋友](https://www.joelonsoftware.com/articles/fog0000000023.html)。

**4。你有 bug 数据库吗？**
我不管你说什么。如果你正在开发代码，即使是在一个团队中，没有一个有组织的数据库列出代码中所有已知的错误，你将会交付低质量的代码。许多程序员认为他们可以记住错误列表。废话。我一次记不住两三个以上的 bug，第二天早上，或者赶着发货，就忘了。你必须正式地跟踪 bug。

Bug 数据库可以复杂也可以简单。一个最小的有用的 bug 数据库必须包括每个 bug 的以下数据:

*   完成重现错误的步骤
*   预期行为
*   观察到的(错误的)行为
*   分配给谁
*   不管它是否已被修复

如果 bug 跟踪软件的复杂性是阻止你跟踪 bug 的唯一原因，那么就用这些关键字段制作一个简单的 5 列表格，然后*开始使用它*。

关于错误跟踪的更多信息，请阅读[无痛错误跟踪](https://www.joelonsoftware.com/articles/fog0000000029.html)。

**5。你在写新代码之前会修正 bug 吗？**
微软 Word for Windows 的第一版被认为是一个“死亡行军”项目。花了很长时间。它一直在滑。整个团队工作时间长得离谱，项目一次又一次地被推迟，压力大得令人难以置信。几年后，当这个该死的东西终于发货时，微软把整个团队送到坎昆度假，然后坐下来进行一些严肃的自我反省。

他们意识到的是，项目经理一直如此坚持要遵守“时间表”，以至于程序员只是匆匆忙忙地完成编码过程，写出了极其糟糕的代码，因为错误修复阶段不是正式时间表的一部分。没有人试图减少臭虫数量。恰恰相反。故事是这样的，一个程序员不得不写代码来计算一行文本的高度，他简单地写了“return 12 并等待关于他的功能并不总是正确的错误报告。这个时间表仅仅是一个等待被转化为 bug 的特性的清单。在事后分析中，这被称为“无限缺陷方法论”。

为了解决这个问题，微软普遍采用了一种叫做“零缺陷方法”的东西。公司里的许多程序员咯咯地笑了，因为听起来管理层认为他们可以通过行政命令来减少 bug 数量。实际上，“零缺陷”意味着在任何给定的时间，最高优先级是在编写任何新代码之前消除 bug。原因如下。

一般来说，在修复一个 bug 之前等待的时间越长，修复的成本(时间和金钱)就越高。

例如，当您犯了一个被编译器捕获的打字错误或语法错误时，修复它基本上是微不足道的。

当你的代码中有一个 bug，而你第一次尝试运行它时发现了这个 bug，你将能够立刻修复它，因为所有的代码在你的脑海中仍然是新鲜的。

如果你在几天前写的代码中发现了一个 bug，你需要一段时间来找出它，但是当你重读你写的代码时，你会记住所有的东西，并且你能够在合理的时间内修复这个 bug。

但是如果你在几个月前写的代码中发现了一个 bug，你可能已经忘记了很多关于这个代码的事情，并且很难修复。到那时，你可能正在修复某人*或其他人的*代码，他们可能正在阿鲁巴度假，在这种情况下，修复 bug 就像科学一样:你必须缓慢、有条不紊、一丝不苟，而且你无法确定需要多长时间才能找到解决方法。

如果你发现*已经发布了*的代码中有一个 bug，你将会花费惊人的费用去修复它。

这是立即修复 bug 的一个原因:因为它花费的时间更少。还有另一个原因，这与这样一个事实有关，即*预测*编写新代码需要多长时间比修复现有的 bug 更容易。例如，如果我让你预测编写排序列表的代码需要多长时间，你可以给我一个很好的估计。但是如果我问你，如果安装了 Internet Explorer 5.5，如何预测修复代码不工作的错误需要多长时间，你甚至不能*猜测*，因为你不知道(根据定义)是什么*导致了*错误。可能要花 3 天时间才能找到它，也可能只需要 2 分钟。

这意味着，如果你有一个进度计划，还有很多错误需要修复，那么这个进度计划是不可靠的。但是如果你已经修复了所有已知的错误，剩下的就是新的代码，那么你的时间表将会更加精确。

保持 bug 数量为零的另一个好处是，你可以更快地应对竞争。一些程序员认为这是为了让产品*随时准备好发货*。然后，如果你的竞争对手推出了一个正在窃取你的客户的杀手级新特性，你可以只实现那个特性并当场发布，而不必修复大量累积的 bug。

**6。你有最新的时间表吗？**
这给我们带来了时间表。如果您的代码对业务非常重要，那么有很多理由说明知道代码何时完成对业务非常重要。众所周知，程序员对制定时间表很挑剔。“做了就做了！”他们对商人大喊大叫。

不幸的是，这还不够。在发布代码之前，企业需要做太多的计划决策:演示、贸易展览、广告等等。做到这一点的唯一方法是制定一个时间表，并保持更新。

关于时间表的另一个重要的事情是，它迫使你决定你要做什么功能，然后它迫使你挑选最不重要的功能并*削减它们*，而不是陷入[的不成熟状态](http://www.netmeg.net/jargon/terms/c/creeping_featuritis.html)(也称为范围蔓延)。

遵守时间表并不一定很难。阅读我的文章[无痛软件时间表](https://www.joelonsoftware.com/articles/fog0000000245.html)，它描述了一个简单的方法来制定伟大的时间表。

**7。你有说明书吗？**
写规范就像用牙线剔牙:每个人都认为这是件好事，但没人去做。

我不确定这是为什么，但这可能是因为大多数程序员讨厌写文档。因此，当只由程序员组成的团队解决问题时，他们更喜欢用代码而不是文档来表达他们的解决方案。他们更愿意一头扎进去写代码，而不是先产生一个规范。

在设计阶段，当您发现问题时，您可以通过编辑几行文本轻松修复它们。一旦编写了代码，修复问题的成本就会显著增加，无论是在情感上(人们讨厌扔掉代码)还是在时间上，所以实际修复问题会遇到阻力。不是根据规范构建的软件通常会导致糟糕的设计，并且进度失控。这似乎是网景公司的问题，最初的四个版本变得如此混乱，以至于管理层[愚蠢地决定](https://www.joelonsoftware.com/articles/fog0000000069.html)扔掉代码，重新开始。然后他们在 Mozilla 上又犯了同样的错误，创造了一个失控的怪物，花了*几年*才达到 alpha 阶段。

我最喜欢的理论是，这个问题可以通过让程序员去参加写作强化课程来解决。另一个解决方案是雇佣聪明的项目经理来编写书面规范。无论哪种情况，您都应该执行简单的规则“没有规范就没有代码”。

通过阅读我的 [4 部分系列](https://www.joelonsoftware.com/articles/fog0000000036.html)，了解所有关于编写规范的知识。

**8。程序员有安静的工作环境吗？**
有大量文献证明，给知识工作者空间、安静和隐私可以提高生产率。经典的软件管理书籍 [Peopleware](http://www.amazon.com/exec/obidos/ASIN/0932633439/ref=nosim/joelonsoftware/) 广泛记录了这些生产力优势。

麻烦来了。我们都知道，知识工作者最好的工作方式是进入“心流”，也就是“进入状态”，在这种状态下，他们完全专注于自己的工作，完全脱离环境。他们忘记了时间，通过绝对的专注创作出伟大的作品。这是他们完成所有生产工作的时候。作家、程序员、科学家，甚至篮球运动员都会告诉你处于这种状态。

问题是，进入“区域”并不容易。当你试图测量它时，看起来平均需要 15 分钟才能以最高的效率开始工作。有时候，如果你累了，或者那天已经做了很多创造性的工作，你就是无法进入状态，你就在工作日的剩余时间里四处闲逛，阅读网页，玩俄罗斯方块。

另一个麻烦是很容易被淘汰出这个区域。噪音、电话、出去吃午饭、不得不开车 5 分钟去星巴克喝咖啡、同事的打扰——T2，尤其是同事的打扰——所有这些都让你不知所措。如果一个同事问了你一个问题，造成了 1 分钟的中断，但这严重地把你击晕了，以至于你要花半个小时才能恢复工作效率，那么你的整体工作效率就有大麻烦了。如果你处在一个嘈杂的牛棚环境中，就像含咖啡因的网络公司喜欢创造的那种环境，营销人员在程序员旁边打电话尖叫，你的生产力会大幅下降，因为知识工作者一次又一次地被打断，永远不会进入状态。

对于程序员来说，尤其困难。生产力取决于能够同时处理短期记忆中的许多小细节。任何形式的干扰都会导致这些细节崩溃。当你重新开始工作时，你不记得任何细节(比如你正在使用的局部变量名，或者你在实现那个搜索算法的时候到了哪里)，你必须不断地查找这些东西，这使你慢了很多，直到你恢复速度。

这是简单的代数。比方说(证据似乎表明)，如果我们打断一个程序员，即使只有一分钟，我们也确实浪费了 15 分钟的生产力。对于这个例子，让我们把两个程序员，Jeff 和 Mutt，放在一个标准的呆伯特小牛肉育肥农场的开放隔间里。Mutt 不记得 strcpy 函数 Unicode 版本的名字了。他可以花 30 秒去查，或者他可以花 15 秒去问杰夫。因为他就坐在杰夫旁边，他问杰夫。Jeff 分心了，损失了 15 分钟的工作效率(为 Mutt 节省了 15 秒)。

现在让我们把他们搬进有墙有门的独立办公室。现在，当 Mutt 不记得那个函数的名字时，他可以查找它，这仍然需要 30 秒，或者他可以问 Jeff，这现在需要 45 秒，并且需要站起来(考虑到程序员的平均身体素质，这不是一个容易的任务！).所以他查了一下。所以现在马特损失了 30 秒的生产力，但我们为杰夫节省了 15 分钟。啊啊！

**9。你使用金钱能买到的最好的工具吗？**
用编译语言编写代码是在普通家用电脑上仍然不能立即完成的最后几件事情之一。如果你的编译过程需要几秒钟以上的时间，那么使用最新最好的电脑将会节省你的时间。如果编译只需要 15 秒钟，程序员就会在编译器运行时感到无聊，转而阅读[洋葱](http://www.theonion.com/)，这会把他们吸进去，消磨掉几个小时的生产力。

用单个监视器系统调试 GUI 代码是痛苦的，如果不是不可能的话。如果您正在编写 GUI 代码，两个显示器将使事情变得容易得多。

大多数程序员最终不得不为图标或工具栏操作位图，并且大多数程序员没有一个好的位图编辑器可用。试图使用 Microsoft Paint 来操作位图是一个笑话，但这是大多数程序员必须要做的。

在我上一份工作的[时，系统管理员不断给我发自动垃圾邮件，抱怨我在服务器上使用了超过……220 兆字节的硬盘空间。我指出，鉴于目前硬盘的价格，这个空间的成本明显低于我使用的*卫生纸*的成本。即使花 10 分钟清理我的目录也是对生产力的极大浪费。](https://www.joelonsoftware.com/articles/TwoStories.html)

顶尖的开发团队不会折磨他们的程序员。使用功能不足的工具导致的小挫折累积起来，会让程序员变得暴躁和不开心。脾气暴躁的程序员是没有效率的程序员。

除此之外，程序员很容易被贿赂，给他们最酷、最新的东西。这种让他们为你工作的方式比实际支付有竞争力的薪水要便宜得多！

**10。你有测试员吗？**
如果你的团队没有专门的测试人员，至少每两三个程序员就有一个，那么你要么是在运送有问题的产品，要么是在浪费金钱，让每小时 100 美元的程序员做可以由每小时 30 美元的测试人员完成的工作。克扣测试人员是如此令人愤慨的虚假经济，以至于我被吹走了，以至于更多的人没有认识到这一点。

阅读[没有测试人员的五大(错误)原因](https://www.joelonsoftware.com/articles/fog0000000067.html)，这是我写的一篇关于这个主题的文章。

**11。新应聘者在面试的时候会写代码吗？**
你会雇佣一个魔术师而不要求他们给你表演一些魔术吗？当然不是。

你会在没有品尝食物的情况下为你的婚礼雇佣宴会承办人吗？我表示怀疑。(除非是玛姬阿姨，如果你不让她做她“著名”的猪肝蛋糕，她会恨你一辈子的)。

然而，每天都有程序员因为令人印象深刻的简历或者因为面试官喜欢和他们聊天而被录用。或者问他们一些鸡毛蒜皮的问题(“CreateDialog()和 DialogBox()有什么区别？”)可以通过查看文档找到答案。你不在乎他们是否记住了成千上万关于编程的琐事，你在乎的是他们是否能够编写代码。或者，更糟糕的是，他们被问到“啊哈！”问题:知道答案的时候看起来很容易的那种问题，但是不知道答案就不可能了。

请不要再这样做了。在面试过程中，你想做什么就做什么，但是要让应聘者*写一些代码*。(更多建议，请阅读我的【T4 采访指南】。)

**12。你做走廊可用性测试吗？** *走廊可用性测试*是你抓住下一个经过走廊的人，强迫他们尝试使用你刚刚写的代码。如果你对五个人这样做，你会学到 95%的关于代码可用性问题的知识。

好的用户界面设计并不像你想象的那么难，如果你想让顾客喜欢并购买你的产品，这是至关重要的。你可以看看我的关于 UI 设计的[免费在线书籍](https://www.joelonsoftware.com/uibook/chapters/fog0000000057.html)，这是一本针对程序员的简短入门书。

但是用户界面最重要的一点是，如果你给少数人看你的程序，(事实上，五六个人就足够了)，你会很快发现人们遇到的最大问题。阅读雅各布·尼尔森的文章解释原因。即使你的 UI 设计技能有所欠缺，只要你强迫自己做门厅可用性测试，这不需要花费任何成本，你的 UI 就会好很多很多。