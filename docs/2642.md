# 超文本风格:酷 URIs 不变。

> 原文:[https://www.w3.org/Provider/Style/URI.html?UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://www.w3.org/Provider/Style/URI.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

[![W3C](../Images/daf4037759feb4b308f1642f9c4bb4f0.png) ](../../) [ ![Style Guide](../Images/cd6c203740f408f51c304c46ccbef5cd.png)](./)

* * *

# 酷 URIs 不变

> 什么造就了酷 URI？冷静的 URI 是不会改变的。
> URI 有哪些变化？
> *URIs 不变:人变他们。*

理论上没有任何理由让人们改变 URIs(或停止维护文档)，但实际上有数百万个理由。

理论上，域名空间所有者拥有域名空间，因此拥有其中的所有 URIs。除了资不抵债，没有什么能阻止域名所有者保留域名。从理论上讲，你的域名下的 URI 空间完全在你的控制之下，所以你可以想怎么稳定就怎么稳定。一份文件从网上消失的唯一合理的原因是拥有该域名的公司倒闭了，或者无力维持服务器的运行。那为什么世界上有那么多悬空链接？部分原因是缺乏深谋远虑。以下是你听到的一些原因:

#### 我们刚刚重组了我们的网站，使它变得更好。

你真的认为旧 URIs 不能继续运行了吗？如果是这样的话，那你选他们选得很差。想想你的新设计，这样你就能在下一次重新设计后继续运行。

#### 我们有如此多的材料，我们无法跟踪什么是过时的，什么是机密的，什么是有效的，所以我们认为我们最好把所有的东西都关掉。

这一点我很同情 W3C 也经历过类似的时期，在将档案公之于众之前，我们必须仔细筛选保密档案材料。解决方案是深谋远虑的——确保您捕获每个文档的可接受分发、创建日期以及理想情况下的到期日期。保留此元数据。

#### 嗯，我们发现我们必须移动文件...

这是最蹩脚的借口之一。很多人不知道，像 Apache 这样的服务器在对象的 URI 和代表它的文件在文件系统中的实际位置之间的灵活关系上给了你很多控制。把 URI 空间想象成一个组织完美的抽象空间。然后，做一个映射到你实际用来实现它的任何现实。然后，告诉你的服务器。你甚至可以编写一些你的服务器来使它变得恰到好处。

约翰不再保存那份文件了，简保存着。

那个写着约翰名字的 URI 到底在干什么？在他的目录里？我明白了。

#### 我们以前用 cgi 脚本来做这个，现在我们用二进制程序。

有一种疯狂的想法，认为脚本生成的页面必须位于“cgibin”或“cgi”区域。这暴露了如何运行服务器的机制。你改变了机制(甚至保持内容不变)，哎呀——你所有的 URIs 都变了。

例如，以国家科学基金会为例:

*NSF 在线文档*
`http://www.nsf.gov/cgi-bin/pubsys/browser/odbrowse.pl`

开始查找文档的主页面，显然不会在几年后出现。“cgi-bin”和“oldbrowse”以及”。pl“所有这些都指向“我们现在该怎么做”这一点。相比之下，如果您使用页面来查找文档，首先得到的是同样糟糕的结果

*密码学与编码理论工作组报告*
`http://www.nsf.gov/cgi-bin/getpub?nsf9814`

对于文档的索引页面，html 文档本身相比之下要好得多:

`http://www.nsf.gov/pubs/1998/nsf9814/nsf9814.htm`

看这一个，“pubs/1998”标题将给任何未来的档案服务一个很好的线索，旧的 1998 年文件分类方案正在进行中。虽然在 2098 年，文件编号可能看起来不同，但我可以想象这个 URI 仍然有效，国家科学基金会或其他进行存档的机构对此一点也不尴尬。

#### 我不认为 URL 必须是持久的——那是 urn。

这可能是骨灰盒讨论最糟糕的副作用之一。有些人似乎认为，因为有关于名称空间更持久的研究，他们可以像“urn 会解决所有问题”一样对悬挂链接不严格。如果你是这些人的一员，那么请允许我让你醒悟。

我见过的大多数 URN 方案看起来有点像一个 authority ID，后跟一个日期和一个您选择的字符串，或者只是一个您选择的字符串。这看起来非常像一个 HTTP URI。换句话说，如果你认为你的组织有能力创建持久的 urn，那么现在就用你的 HTTP URIs 来证明这一点。没有任何关于 HTTP 的东西会让你的 URIs 不稳定。这是你的组织。创建一个将文档 URN 映射到当前文件名的数据库，并让 web 服务器使用它来实际检索文件。

如果你已经到了这一步，那么除非你有时间、金钱和关系来完成一些软件设计，否则你可能会提出下一个借口:

#### 我们也想，但是我们没有合适的工具。

这是一个我可以同情的例子。我完全同意。您需要做的是让 web 服务器立即查找一个持久的 URI，并将文件返回到您当前疯狂的文件系统存储该文件的任何地方。您希望能够将 URI 存储在文件中作为检查，并不断保持数据库与现实一致。您希望存储同一文档的不同版本和翻译之间的关系，并且希望保留校验和的独立记录，以防止文件因意外错误而损坏。web 服务器并不具备这些特性。当你想创建一个新文档时，你的编辑会问你要一个 URI，而不是告诉你。

您需要能够在不更改 URI 的情况下，在 URI 空间中更改文档的所有权、访问权限、归档级别和安全级别等内容。

太糟糕了。但是我们会成功的。在 W3C，我们使用 *Jigedit* 功能( *Jigsaw* 服务器用于编辑)来跟踪版本，我们正在试验文档创建脚本。如果你制作工具、服务器和客户端，请注意！

这是一个突出的原因，例如适用于许多 W3C 页面，包括这个:所以照我说的做，不要照我做的做。

## 我为什么要在乎？

当您更改服务器上的 URI 时，您永远也不会知道谁会链接到旧的 URI。他们可能会从普通网页中获取链接。他们可能已经给你的页面加了书签。他们可能会在给朋友的信的页边空白处潦草地写下 URI。

当有人跟踪一个链接，但链接断开时，他们通常会对服务器的所有者失去信心。他们也很沮丧——从情感上和实际上来说，都无法实现他们的目标。

足够多的人一直抱怨悬挂链接，我希望损害是显而易见的。我希望这也是显而易见的，声誉受损的是文档消失的服务器的维护者。

## 那我该怎么办呢？设计 URIs

这是一个网站管理员的职责来分配 URIs，你将能够在 2 年，20 年，200 年后的袖手旁观。这需要思考、组织和承诺。

当其中有一些信息发生变化时，URIs 也会发生变化。如何设计它们至关重要。(什么，设计一个 URI？我必须设计 URIs？是的，你得考虑一下。).设计主要意味着忽略信息。

文件的创建日期——URI 的发行日期——是不会改变的。这对于区分使用新系统的请求和使用旧系统的请求非常有用。这是开始一个 URI 很好的一件事。如果一份文件以某种方式注明了日期，即使它会影响几代人，那么日期就是一个好的开始。

唯一的例外是这样一个页面，它故意是一个“最新”的页面，例如，对于整个组织或它的一大部分。

`http://www.pathfinder.com/money/moneydaily/latest/`

是《金钱》杂志最新的《金钱日报》专栏。在这个 URI 不需要日期的主要原因是 URI 没有理由比杂志更持久。如果*货币*停止生产，“今天的*货币*的概念就消失了。如果您想要链接到内容，您可以链接到它在归档中单独出现的位置

`http://www.pathfinder.com/money/moneydaily/1998/981212.moneyonline.html`

(看起来不错。假设“钱”在 pathfinder.com 的一生中都是同样的意思。“98”和“安”有重复。html“你不需要，但否则这看起来像一个强大的 URI)。

### 遗漏什么

一切！在创建日期之后，在名称中加入任何信息都是自找麻烦。

*   **作者姓名** -作者身份可以随着新版本而改变。人们离开组织，把事情传递下去。
*   **主题**。这很棘手。它在当时看起来总是很好，但变化惊人地快。我将在下面详细讨论这一点。
*   **状态** -像“旧的”和“草稿”等目录，更不用说“最新的”和“酷的”出现在所有文件系统中。文件会改变状态，否则就没有必要制作草稿。文档的最新版本需要一个持久标识符，不管它的状态如何。让身份名不副实。
*   **访问**。在 W3C，我们将网站分为“团队访问”、“成员访问”和“公共访问”。这听起来不错，但是当然文档开始是团队的想法，与成员讨论，然后公开。如果每次某个文档被打开进行更广泛的讨论时，所有旧的链接都失败了，那真是太遗憾了！我们现在切换到一个简单的日期代码。
*   **文件扩展名**。这是很常见的一个。“cgi”，甚至”。html”是会改变的东西。20 年后你可能不再使用 HTML 来创建那个页面，但是你可能希望今天的链接仍然有效。链接到 W3C 网站的标准方式不使用扩展名。([怎么了？](#remove))
*   **软件机制**。在 URIs，寻找“cgi”、“exec”和其他“看看我们在使用什么软件”的信息。有人想一辈子都使用 perl cgi 脚本吗？没有吗？删除. pl 文件。阅读服务器手册了解如何操作。
*   磁盘名称-饶了我吧！但我见过。

我们网站上一个更好的例子是

`http://www.w3.org/1998/12/01/chairs`

W3C 主席会议记录报告。

#### 主题和按主题分类

我将更详细地讨论这种危险，因为这是很难避免的事情之一。通常，当你根据你正在做的工作分类你的文件时，主题在 URIs 结束。这种崩溃将会改变。区域的名称将会改变。在 W3C，我们希望将“标记”改为“标记”,然后改为“HTML ”,以反映该部分的实际内容。此外，请注意，这通常是一个平面名称空间。100 年后，你确定你不想再用任何东西吗？例如，我们想在我们短暂的一生中重用“历史”和“样式表”。

这是一种很有诱惑力的组织网站的方式——实际上也是一种很有诱惑力的组织任何东西的方式，包括整个网络。这是一个伟大的中期解决方案，但从长期来看有严重的缺点

部分原因在于意义哲学。语言中的每一个术语都是潜在的聚类主题，每个人对它的意思都有不同的理解。因为主题之间的关系是网状的，而不是树状的，即使是在网上意见一致的人也可能选择不同的树状表示。这些是我(经常重复的)对作为一般解决方案的分级分类的危险的一般评论。

实际上，当你在 URI 中使用一个主题名称时，你就把自己绑定到了某个分类上。你将来可能会喜欢一个不同的。然后，URI 将很容易破裂。

使用主题区域作为 URI 的一部分的原因是，URI 空间的子部分的责任通常是委托的，然后您需要一个组织机构的名称——子部分或组或其他——负责该子空间。这是将你的 URIs 绑定到组织结构上。它通常只有在受到 URI 更远的日期保护时才是安全的(在它的左边):1998/pics 可以被理解为你的服务器“我们在 1998 年用 *pics* 所指的”，而不是“我们在 1998 年用我们现在所指的 *pics* 所做的”

### 别忘了域名。

请记住，这不仅适用于 URI 的“路径”部分，也适用于服务器名称。如果你有不同的服务器来存放你的一些东西，请记住，如果不破坏许多链接，这种划分是不可能改变的。一些经典的“看看我们今天用的是什么软件”域名有“cgi.pathfinder.com”、“secure”、“lists.w3.org”。它们使服务器的管理变得更加容易。无论它代表您公司的部门、文档状态、访问级别还是安全级别，在为多种类型的文档使用多个域名之前，都要非常非常小心。请记住，您可以使用重定向和代理将许多 web 服务器隐藏在一个明显的 web 服务器中。

哦，想想你的域名。如果你的名字不叫 soap，即使你已经把你的产品线换成了别的东西，你还会希望别人叫你“soap.com”吗？(向目前拥有 soap.com 的人道歉)。

## 结论

保护 URIs，让它们在 2 年、20 年、200 年甚至 2000 年后依然存在，显然不像听起来那么简单。然而，在整个网络上，站长们做出的决定会让他们自己在未来变得非常困难。通常，这是因为他们使用的工具的任务是展示当前最好的网站，没有人评估过当事情发生变化时链接会发生什么。然而，这里的信息是，许多许多事情可以改变，而你的 URIs 可以而且应该保持不变。只有当你思考如何设计它们的时候，它们才能实现。

另请参见:

* * *

(back to [Etiquette for server administrators](Etiquette.html), on to [Structure of your work](Structure.html))

### 脚注

...从我的 URIs 在一个实用的基于文件的网络服务器？

例如，如果您正在使用 Apache，您可以设置它来进行内容协商。您保留文件扩展名(例如。png)在文件上(如`mydog.png`)，但引用 web 资源没有它。然后，Apache 检查目录中具有该名称和任何扩展名的所有文件，它还可以从一组文件中挑选出最好的一个(例如 GIF 和 PNG)。(你需要*而不是*将不同类型的文件放在不同的目录中，事实上，如果你这样做，内容协商将不起作用。)

*   设置您的服务器进行内容协商
*   总是提到 URI，不带扩展名

带有扩展名的引用仍然可以工作，但是不允许您的服务器选择当前可用的和将来的最佳格式。

(其实，`mydog`、`mydog.png`、`mydog.gif`都是各自有效的网页资源。`mydog`是内容类型通用的。`mydog.png`和`mydog.gif`是特定于内容类型的。)

当然，如果您正在构建自己的服务器，那么使用数据库将持久标识符与其当前形式相关联是一个非常干净的想法——尽管要注意数据库的无限增长。

### 火焰大厅-故事 1:7 频道

1999 年，`http://www.whdh.com/stormforce/closings.shtml`是我发现的一个页面，记录了学校因下雪而关闭的情况。除了等待他们滚动过电视屏幕的底部！我在主页上放了一个指向它的指针。2000 年的第一场大风暴来了，我检查了一下网页。上面写着，

> 截止日期。当前没有有效的结算。天气允许时，请回来查看”

不可能是这么大的风暴。有趣的是日期不见了。但是如果我去网站的主页，有一个大按钮“学校关闭”,它会把我带到`http://www.whdh.com/stormforce/`,上面有许多关闭的学校的列表。

好吧，也许他们改变了从最终名单中获得关闭的系统——但是他们不需要改变 URI。

### 火焰大厅-故事 2:微软网络会议

随着对网络依赖的增加，一个聪明之处是应用程序可以内置链接到制造商的网站。这在很大程度上被使用和滥用了，但是——你必须保持 URL 不变。就在几天前，我在微软的 Netmeeting 2/something 客户端的“帮助/微软在线/免费内容”菜单下尝试了一个链接，得到了服务器的错误 404 -未找到响应。他们现在可能已经修好了...

<address>(c)1998 [Tim BL](../../People/Berners-Lee/)</address>

历史注释:在 20 世纪末写这篇文章的时候，“酷”是一个褒义词，特别是在年轻人中，表示时尚、品质或适当性。在争夺 DNS 领域的热潮中，域名和 URI 路径的选择有时更倾向于表面上的“酷”，而不是有用性或持久性。这篇笔记试图改变追求酷背后的能量。