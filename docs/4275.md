# 更快、更好、更便宜——制作软件的艺术

> 原文：<http://jrsinclair.com/articles/2017/faster-better-cheaper-art-of-making-software/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

* * *

没有人愿意交付迟交的、超出预算的软件。我不知道有哪个软件开发人员早上醒来会想“我今天想做一件垃圾工作”。我怎样才能让我的雇主多花些钱？”然而，许多软件项目并不顺利。每一个新项目，似乎都有越来越多的压力要加快进度。那么，如果我们是做软件的，我们该怎么做？我们如何在不影响质量的情况下提高速度？

> 尽管有 50 多年的历史和无数的方法、建议和书籍，IT 项目还是不断失败。
> 
> —苏珊·摩尔

现在，我不是以某种专家的身份在这里写作。我从未经营过自己的软件公司。我不是在传递从大量学术研究或受控实验中提炼出来的智慧。我写这篇文章是为了整理我自己的想法，因为我试图理解我周围发生的事情。

为了正确地思考这个问题，我们需要从*为什么*开始。所有这些软件生产的目的是什么？为什么我们一开始就要做软件？让我们暂时把开源放在一边，讨论一下商业软件。让我们从*的生意说起。*

## 商业就是减少客户的痛苦。

按照我的理解，要经营一个成功的企业，我们首先要找到让人们痛苦的东西。这可能是一种隐喻或字面上的痛苦(尽管通常是隐喻性的)。然后，我们提供一种减轻痛苦的方法来换取金钱。例如，人们发现学习编码很困难(痛苦)。因此，教授编程的书籍和课程是有市场的。有些人不喜欢他们的外表。所以，在锻炼、化妆品、美容治疗等方面有完整的产业。企业向客户交付价值的程度取决于他们减少客户痛苦的程度(或对客户痛苦的感知)。如果人们相信我们可以减轻他们的痛苦，那么他们会很乐意付钱给我们。

在*软件产品业务中，*软件是我们提供来减少客户痛苦的东西。在这种类型的业务中，软件开发是交付价值的关键活动。客户购买(或订阅)产品，软件开发创造产品。当然，这只适用于*产品*的商家。如果我们销售的是咨询服务，或者是作为支持功能的 IT，那么情况就不同了。但是如果核心业务是软件产品，那么开发就是完成它的过程。

这并不是说发展是唯一增加价值的活动。例如，如果没有人知道我们的产品存在，那么它还不如*不*存在。所以销售和营销活动是必不可少的。我们还必须确保我们的产品能够真正解决客户的痛点。如果没有，我们就是在浪费时间。所以市场调查(不管是正式的还是临时的)也是至关重要的。我们也需要用户体验(UX)和平面设计活动来减少摩擦。我们产品中的摩擦阻碍了我们解决客户的问题。所有这些活动(营销、销售、市场研究、UX、设计)都很重要。如果你眯着眼睛看，它们看起来都很相似。它们就像同一个核心活动的不同方面:理解他人。但是，最终，所有这些活动只交付了针对客户价值的*计划*和*承诺*。正是软件开发将计划和承诺转化为产品。

> 当你接受“产品”、“设计”和“工程”只是对同一件事的不同观点时，一切都会变得更好。
> 
> ——格雷格·维恩

## 最小化对业务影响的交付时间

如果我们正确地做了所有这些“理解他人”的事情，那么这就是一个持续的活动。随着我们的前进，我们对我们试图解决的问题了解得更多。所以我们开始设计更好的解决方案。因此，我们需要我们正在创建的软件产品也做出改变。为此，我们需要一个敏捷的开发团队。一个能够快速交付价值，并能够快速应对变化的团队。这是软件开发实践的核心目标。正如丹·诺斯所说:

> “软件开发的目标是可持续地最小化对业务影响的交付时间”
> 
> —丹·诺斯

因此，拥有一个敏捷的开发团队非常重要。但是你如何*让*有一个敏捷的开发团队呢？你是否:

*   像对待国王一样对待你的开发者？
*   给他们买超快的，昂贵的电脑？
*   让他们去参加他们想参加的任何疯狂的科技会议？

我们可以为这些事情做一个很好的论证。如果你想*留住*你敏捷的开发团队，那么认真考虑每个人。快速的计算机和优秀的技术会议*将*提高开发者的表现。这项投资随着时间的推移会有回报。但是这些事情与*留住*优秀的开发者更相关。我们想考虑*建立*一个敏捷的团队。

所以，如果答案不是给开发者他们想要的任何东西，那么我们该怎么办？简单的回答是，去问开发商。但是，在正确的时间，用正确的方式问他们。关于开发人员，需要理解的是，他们往往是天生的问题解决者。优秀的开发人员喜欢他们的工作。他们喜欢他们的工作，因为他们可以整天解决有趣复杂的谜题，并获得报酬。优秀的开发人员乐于接受复杂的挑战并寻找优雅的解决方案。所以他们应该能够想出好主意来变得更加敏捷。但是许多组织鼓励开发者关注错误的问题。这种鼓励可能不是有意的，也不是有意识的，但它还是发生了。

## 关注错误的问题

这是怎么发生的？我们如何结束让开发人员关注错误的问题，甚至不知道我们正在这样做？这是因为我们将开发人员和客户分开了。一旦一个项目达到合理的规模，我们就会引入项目经理和业务分析师。我们引入这些人有一个很好的理由——开发者不能做所有的事情。软件项目很复杂。代码足够复杂，但除此之外，还有决定构建什么、规划开发阶段、构建推出和部署计划、与客户联络等所有工作……不胜枚举。开发人员有足够多的代码要担心。所以我们需要这些额外的人来帮忙。

但是，所发生的是，这些额外的东西变成了开发者与世界的接口。项目经理和业务分析师协调与外部涉众的沟通。项目经理尤其关心项目的交付。项目经理向管理层汇报。管理层关心的是:

*   这要花多少钱？
*   需要多长时间？
*   为什么这么贵？
*   项目为什么这么晚？
*   为什么还没有完成？
*   我的天啊，我们在这个迟到的项目上一天要花多少钱？！

可以理解的是，项目经理开始关注可预测性。他们需要计划、结构和评估。他们想知道发生了什么事，什么时候发生的。可预测性和可衡量性让他们在向管理层汇报时听起来很有能力。因此，他们与开发人员讨论评估、报告和截止日期。因此，开发人员开始关注截止日期、报告和评估。他们专注于评估和可预测性，以让项目经理满意。

但是这有一个不幸的问题。问题是估计和可预测性是不可能解决的问题。每次开发人员开始一项新任务时，他们都会面临一个令人不安的现实。任何给定的任务可能包含也可能不包含隐藏复杂性的巨大陷坑。我们希望任务简单。但也可能不是。世事难料。然后霍夫施塔特定律开始发挥作用:

> 霍夫施塔特定律:它总是比你预期的要长，即使你考虑到霍夫施塔特定律。
> 
> 道格拉斯·霍夫施塔特

考虑一下这个场景:一个项目经理要求一个没有经验的开发人员进行评估。没有经验的开发人员给出一个他们认为合理的估计。然后项目经理离开，把它变成一个截止日期和一个计划。为了安全起见，一个好的项目经理甚至会增加一点“脂肪”。但是不可避免的事情发生了——项目落后了。因此开发人员开始延长工作时间以满足最后期限。但是长时间的工作意味着开发人员会很累。他们开始犯更多的错误。但这仍然不够。这个项目仍然落后。项目经理要求知道是什么花了这么长时间。所以苦恼的开发者开始偷工减料。在这个过程中，他们开始运输虫子。所以现在的产品不仅姗姗来迟，而且漏洞百出。

这种情况带来了负的客户价值。当然，这个迟来的、有缺陷的产品可能仍然会解决一些客户的痛苦。但是这些错误会给 T2 带来新的痛苦，并且需要时间来修复。客户对我们帮助他们的能力失去了信心。这使得他们不太愿意付钱给我们。每个人都输了。

有经验的开发人员知道估算游戏是被操纵的，所以他们尽量不去玩它。想象一下，一个项目经理去找一个有经验的开发人员询问评估。他们所做的是给出一个听起来很荒谬的数字。但也足够小，项目不会立即被取消。接下来，项目经理(或销售人员)回来挑战这个荒谬的数字。“这个估计似乎比我们希望的要大一点。我们有没有可能稍微压缩一下，把这个数字降下来？”此时，有经验的开发人员会问:“我们需要达到什么样的数字？”销售人员返回一个号码。然后，经验丰富的开发人员搓着下巴说，“嗯，会很紧，但我们会看看我们能做些什么。我们必须去掉一些需求，只提供最基本的功能。”然后，她估计在不显得无能的情况下，他们能承诺兑现的承诺有多少。她只承诺这一点。这样，当她交付的比承诺的多得多时，每个人都很开心。但即使在这种情况下，霍夫施塔特定律仍然会露出它丑陋的一面。很快，我们又回到了赶时间和发布错误代码的状态。

> 评估通常是软件开发中不可避免的弊端。不幸的是，人们倾向于认为编写新软件就像盖房子或修理汽车一样，因此相关的承包商或机械师应该完全有能力在客户批准工作之前对要做的工作提供可靠的估计。[……]然而，对于定制软件，系统的大部分都是从零开始构建的，通常它是如何组装的，它最终是如何工作的，以及当它完成时它到底应该做什么都是移动的目标。通常在旅程开始时，你不知道你将走哪条路，也不知道目的地，所以很难知道你什么时候会结束。
> 
> —史蒂夫·史密斯

我在这里的观点不是抱怨软件评估。每个人都知道这是必要的邪恶。但这是一种必然的邪恶，最终会陷入恶性循环。我们偷工减料，发布质量差的代码，以满足最后期限。与此同时，我们向对方保证，我们会回来，稍后解决它。但是“以后”永远不会到来。我们已经落后于下一阶段，因为我们不得不回去修复那些错误。*和*我们现在构建在脆弱的、拼凑的代码之上，这些代码不是为快速变化而构建的。一旦陷入这个循环，开发人员的注意力就会从解决客户的痛苦上转移。相反，他们关注这样的问题:

*   有什么最快的方法可以让我们将这个特性标记为“完成”,并让项目经理不再烦我？
*   我怎样才能尽可能少地接触这些脆弱的代码呢？因为我碰得越多，它就越容易碎。
*   在这一大堆热气腾腾的技术债务中，我怎样才能挤出一小段我引以为豪的代码呢？
*   我怎样才能更好地向那些不知道我在做什么或有多复杂的人证明我的决定？
*   当客户开始抱怨我没有时间修复的 bug 时，我怎么能责怪别人呢？
*   我怎样才能在简历上写一些好的流行语，这样我就能在一个一切都不那么糟糕的地方找到另一份工作？

现在，我所见过的开发者中没有一个人希望 T1 发布迟到的、有问题的软件。但是我们要求开发者给出一个简短的评估，因为我们想更快地得到它。开发人员遵从是因为他们想要取悦。但是他们被卡住了，因为估计总是错的。所以他们现在面临交付的压力。他们想取悦别人，所以工作时间更长，并且偷工减料。他们在质量上妥协，因为每个人都在问他们‘完成了吗？’。但是没有人开心。该软件仍然是迟到和错误。

所以，我认识的大多数开发者都在尽他们最大的努力。但是他们被卡住了。他们忙着追赶，甚至都没想过要“更快”。所以，他们关注了错误的问题。他们专注于生存。当你快要饿死的时候，很难集中精力为退休存钱。当你一周七天都在为一个晚期项目工作时，也很难想出如何更聪明地工作。因此，第一步是要认识到提高速度需要投资。如果事情很糟糕，它将需要财务/时间投资和情感投资。

## 打破循环

早些时候，我建议询问开发人员如何减少对业务影响的交付时间。但是，当开发者处于“追赶”模式时，我们不太可能从他们那里得到很好的回应。当我们进入这种环境并说，“我们怎样才能走得更快？”我们可能会得到两种回应:

1.  用火焚烧它。 *“我们需要离开两年，从头重写一切。”*当开发人员完全被技术债务压垮时，就会出现这种情况。以至于他们觉得唯一的出路就是宣布破产。他们可能也有道理。但与此同时，我们可能没有这样做的预算，在我们重建的时候，市场肯定不会坐以待毙。
2.  **愤慨。** *“我们*比*走得快。我不能相信你认为你能通过半小时的头脑风暴解决这个复杂的问题！你怎么敢？!"*当开发人员感到被迫交付低质量的代码时，就会出现这种情况。然后，当客户抱怨有 bug 时，他们觉得自己受到了指责。他们的愤怒可能是有道理的。这种心态的开发人员根本不会帮助我们，除非我们能证明我们听到了他们的声音。他们需要知道我们理解他们的担忧。我们还需要表明我们对改变事物是认真的。

在这两种情况下，开发人员的担心都是有道理的，但他们都是内向型的。我们希望创造一种环境，让每个人都努力将对业务影响的交付周期降至最低。当开发人员停留在这种思维模式中时，它不会发生。第 0 步是表明我们对改变事物是认真的。这通常需要找到一些减压的方法。即使只是暂时的。

但即便如此，除非有所改变，否则开发者仍将是内向型的。他们会有很多关于如何改进他们正在做的事情的想法。其中一些可能是好主意。但是风险很大。我们需要开发人员专注于最大限度地缩短对业务产生影响的时间。我们需要让他们不再关注内部压力。我们需要让他们面对客户的痛苦。

## 让开发人员面临客户的痛苦

那么，如何让开发人员面对客户的痛苦呢？许多其他人已经就此写了很长时间，所以我只略述皮毛。这里有三个主意，按效率从低到高排列:

1.  让开发人员将他们制作的产品作为日常工作的一部分。在业内，这被称为*喝自己的香槟*或者*吃自己的狗粮*。这样做的好处是把开发者变成了产品的用户。所以任何明显的错误或问题都会给开发者带来痛苦。这种方法的问题是开发人员不是典型的用户(大多数时候)。开发人员使用软件的方式通常与大多数客户不同。因此，虽然这可能有助于开发人员修复主要的 bug，但它可能无法提供对典型用例的深刻见解。此外，这并不总是可行的。例如，想象我们正在为牙科保健员生产一种 SaaS 产品。开发人员可能很难将它集成到他们的日常工作流程中。
2.  让开发人员在支持团队中轮流工作。一个更好的方法是鼓励开发者加入某种产品支持名单。(他们可能需要相当强的鼓励。)这样，开发人员可以直接体验客户的痛苦。因此，当他们回复电话和电子邮件(或推文，或其他)时，客户会告诉他们问题。如果开发人员这样做的时间足够长，那么他们也会开始观察常见问题的模式。他们会看到反复出现的东西。不必再听到同样的抱怨是解决可用性问题的一个很好的动力。不幸的是，人们很少联系支持来告诉你什么工作得很好。所以反馈有些偏颇。
3.  让开发人员坐在一起，定期观察人们使用软件的情况。这是最不方便的选择，因为它要求最有条理。但也有可能带来最好的结果。通过这种方法，开发人员可以看到真实的人在现实生活中如何使用软件来做真实的事情。他们能看到好的，坏的，和丑陋的。

持之以恒地做这些事情是很难的。这需要努力和组织。大多数开发人员自然对它不感兴趣。我觉得写这些很尴尬，因为我没有像应该的那样经常这么做。但我相信努力是值得的。

让开发人员面对客户的痛苦是一种克服认知偏差的刻意努力。也就是说“这是学习谦逊的一种方式”我们开发人员倾向于认为自己很聪明。而且很多开发者*都*聪明。但是我们并不是什么都知道。也许我终于明白了一元绑定操作与函数组合的关系。这很好，但这并不意味着我了解我们的客户每天使用我们的软件时所面临的情况。将自己暴露在客户的痛苦之下让我想起我所知甚少。

> 根据我的经验，开发人员越孤立，最终产品就越差。大多数团队都有一层业务分析师，他们认为保护开发人员不受用户影响是他们的工作，反之亦然，这并没有什么帮助。创建一个开发者不知道谁是用户的环境是很危险的。
> 
> —杰夫·阿特伍德

现在，所有这些面向客户的热情模糊有一个突出的问题。简而言之，并没有让开发者走得更快。事实上，它占用了编码的时间，所以可以说它减慢了他们的速度。那我为什么要支持它呢？简而言之，如果你跑错了方向，跑得再快也没什么好处。让开发人员面对客户的痛苦是关于方向而不是速度。

## 问问开发商

我们希望*可持续地*最大限度地缩短对业务影响的交付周期。我的假设是，如果你给开发人员指出正确的方向，那么你就可以问他们如何去做。如果我们授权他们实施这些想法，那么我们应该开始看到结果。

理想情况下，这是一个持续的过程。我们询问开发人员他们是否有任何关于如何走得更快的想法。然后我们试用它们。几个星期后再来，问问进展如何。然后再问他们。继续问他们，直到每次你接近他们的工作区域时，你甚至不需要问他们。他们开始说这样的话:“我们对路由引擎进行的重构真的有回报了。但是，我认为，如果我们将一些逻辑移回到微服务层，我们将能够更快地将东西移入和移出。”你可能不知道这意味着什么，但如果我们看到更少的错误和更满意的客户，那么每个人都赢了。

如何询问特定的开发团队取决于你自己。有些人喜欢头脑风暴研讨会，而有些人更喜欢调查或一对一的采访。每种方法都有不同的优点和缺点。但是无论你选择哪种方法，一定要弄清楚所有的约束。如果你只有很少的预算，那就说出来。如果没有灵活性来推出任何期限，让开发人员知道。假设你有聪明能干的开发人员，他们会考虑这些事情。如果他们不明白，即使你已经解释了很多次，那么你已经学到了一些东西…

不过，在交流约束时一定要小心。如果我们告诉开发者没有预算；截止日期是固定的；一点回旋的余地都没有……然后他们会理所当然地回答说他们帮不上忙。在这种情况下你必须非常小心。快速生产的高质量软件是要花钱的。开发人员需要看到我们愿意在他们和他们的工具上投资。如果没有预算；没有在截止日期前移动的空间；而且没有任何迹象表明这种情况会改变…那么聪明的开发人员会去别处看看。我会为他们鼓掌。这是一个没有胜算的局面。这就是情感投资的切入点。向开发者表明我们关心他们，并且愿意在未来投资他们。并解释我们现在资源严重不足。然后，他们可能会想出一些有创意的解决方案，让我们摆脱目前的困境。

## 假设

我在这里做了一个有点大的假设。我在这里的假设是，当你解释约束时，你的开发人员足够聪明，能够理解它们。最大也是最明显的限制是，我们没有无限量的资金可以使用。制作软件要花很多钱。超出大多数人的预期或意识。雇佣优秀的软件开发人员并不便宜。我的大假设是，你至少有一两个聪明的开发人员能够理解这一点。

可悲的事实是，一些开发者就是不明白。那你会怎么做？没有简单的答案。但我怀疑，一些开发人员不理解的原因是因为他们从未接触过更大的图景。他们只是被要求做出不切实际的估计，并被告知要加快速度。他们不经常从顾客的角度或者从支付他们工资的人的角度看问题。他们开始得到它的唯一方法是有人给他们看。

我做的另一个大假设是，如果我们把开发者放在客户面前，他们不会让公司尴尬。是的，我参加过很多客户会议，会上开发人员在客户面前说了一些愚蠢的话或者发泄了他们的不满。不是每个人都准备好面对幻灯片，并被要求进行推销。但是，如果一个开发者可以被信任只是礼貌地握手问好，那么他们肯定至少可以坐在角落里静静地看着人们使用软件？也许他们一开始需要有人陪他们去。但是，如果一个人从来没有机会，他如何才能学会成为一个好的组织形象大使呢？

但是，我跑题了。回到跑得更快…

## 安全带和发动机升级

让我们假设你的团队充满了聪明的开发人员。当你向他们征求想法时，他们可能会想出一些起初看起来反直觉的东西。比如:

*   测试驱动开发(TDD)
*   连续累计
*   结对编程或 mob 编程
*   代码审查

所有这些技术都会减慢开发速度…首先。TDD 看起来很像是编写双倍的代码来产生相同的结果。结对编程听起来像是找两个多产的开发人员，把他们的产量减半。我可以理解一些怀疑。但这些不仅仅是时髦的流行语(这些技术中的大多数已经存在了几十年)。所有这些事情都有充分的理由。

让我试着用一个类比来解释。当你开车时，你系安全带。如今，我们希望我们的汽车有安全气囊和防撞缓冲区。但是，当你想开得很快的时候，你会穿上赛车安全带、头盔和防火服。在车上，我们增加了防滚架、扰流板和粘性轮胎。这不是一个完美的类比，但希望你明白我的意思。起初，像 TDD 和代码评审这样的事情会让你慢下来。他们可能会很尴尬，很难适应。但正是这些东西让车队能够安全地跑得更快。

> 非常确定的是，TDD 节省了时间和金钱，因为维护成本被考虑在内——大量的时间和金钱。
> 
> —埃里克·埃利奥特

像 TDD 和持续集成这样的技术是关于提高软件质量的。这意味着将更少的错误发布到产品中。在发布之前捕获 bug*意味着更少的重复工作、更少的尴尬和更快乐的客户。它们通常更快(也更便宜)修复。随着时间的推移，*而不是*花在修复 bug 上的时间加起来。更重要的是，这些技术也倾向于产生更灵活的代码。更容易更改或重用的代码。这意味着我们花更少的时间来对抗脆弱的代码库。我们可以花更多时间添加新功能或修改功能。最终结果是更好、更快的软件。*

## 收紧反馈回路

所有这些都是为了缩短从编写代码到交付给客户之间的时间。一旦到了那里，开发人员就可以观察到这个新代码是如何减少客户痛苦的。有了这些反馈，他们就可以进一步改进代码…等等。我们创造了一个良性循环。

> 对我们来说具有变革意义的是，从真实用户那里获得反馈的时间大大减少了。
> 
> —菲尔·威尔斯

如果你在过去几年里一直关注 IT 趋势，那么这个良性循环听起来会很熟悉。听起来很像[连续发货](https://continuousdelivery.com/)。但是时髦的词语不是重点。持续交付只是一套实践的标签。总之，这些实践提供了紧密的反馈循环。反馈回路允许我们在提高速度的同时降低风险。

这是有充分理由的。我们构建软件的环境不仅复杂，而且非常复杂。一个复杂的系统有许多部分。事实上，零件如此之多，以至于需要专家才能理解所有零件是如何组合在一起的。但是在一个复杂的系统中，不只是有很多部分，而是所有的部分都是相互联系并相互作用的。因此，当你改变一件小事时，整个系统可能会随之改变。这方面的一个经典例子是眼镜蛇效应:

> 英国政府担心德里有毒眼镜蛇的数量。因此，政府悬赏捉拿每一条死去的眼镜蛇。起初，这是一个成功的策略，因为大量的蛇被杀作为奖励。然而，最终有事业心的人开始为了收入而养殖眼镜蛇。当政府意识到这一点时，奖励计划被取消，导致眼镜蛇饲养者释放了现在毫无价值的蛇。因此，野生眼镜蛇的数量进一步增加。

对于复杂的系统，很难预测给定变化的影响。这是因为同样的改变做两次可能会有完全不同的后果。第一个变化导致系统以这样一种方式做出反应，它在下一次做出非常不同的反应。这可能会导致意想不到的后果，并使规划和估计出现问题。

> 理解复杂性的方法是，在空间中行动会导致空间发生变化，因果关系只能通过回顾才能理解。
> 
> ——利兹·基奥

那么，我们如何在一个复杂的环境中设法完成任何事情呢？专家建议的是“探索、感知和回应”换句话说，创造一个紧密的反馈循环来衡量某件事是否有效。然后我们尽可能快地迭代。我们保持较小的变化和较短的周期。因此，与故障相关的风险也很小，而且恢复成本更低。我们做了很多小实验，保留那些有效的，恢复那些失败的。

> 在复杂的环境中，你需要探索、感知和应对。你安全地做一些可能失败的事情，它会告诉你你对环境的反应，改变环境。这是高反馈、风险和创新的土地。
> 
> ——利兹·基奥

## 结论

我们不能仅仅通过应用“最佳实践”来建立一个高绩效的开发团队。不幸的是，软件开发中的银弹非常少。但是，当我们谦逊地承认我们并非无所不知时，有些模式会很有效。让开发人员面对客户的痛苦会结束一个反馈循环。这让我们可以确定，如果我们走得快，我们是在正确的方向上走得快。一旦做到这一点，我们就能以适合我们特定环境的方式进行持续改进。

![](img/ddd4659910f4001265a76cc512d63e8c.png)