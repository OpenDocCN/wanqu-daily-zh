# 为什么 WhatsApp 的 9 亿用户只需要 50 名工程师

> 原文:[https://www . wired . com/2015/09/whatsapp-serves-9 亿-users-50-engineers/？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://www.wired.com/2015/09/whatsapp-serves-900-million-users-50-engineers/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

本月早些时候，WhatsApp 首席执行官简·库姆在他的脸书主页上发布消息称，他的公司的即时通讯服务现在有超过[9 亿人使用](https://www.facebook.com/jan.koum/posts/10153580960970011?pnref=story)。随后，脸书首席执行官马克·扎克伯格迅速回复了他自己的两个帖子。其中一个说“恭喜”，另一个包括扎克伯格在 WhatsApp 首席执行官将他的 9 亿用户帖子输入智能手机时给库姆拍的一张厚颜无耻的照片。扎克伯格写道:“这是你写这篇更新的一个动作镜头。”

一年多前，扎克伯格和他的公司以 190 亿美元收购了这家初创公司，随后 WhatsApp 由脸书所有。这意味着脸书现在运行着互联网上最受欢迎的三个应用程序。其主要的社交网络服务在全球有超过 15 亿人使用，Facebook Messenger 是从脸书本土剥离出来的即时通讯服务，覆盖 7 亿人。但 Koun 宣布的 9 亿用户里程碑在很大程度上是 WhatsApp 的成就，而不是强大的脸书机器的产物。

WhatsApp 故事中(许多)有趣的部分之一是，它用如此小的团队实现了如此巨大的规模。当该公司被脸书收购时，它有 35 名工程师，用户超过 4.5 亿。如今，尽管 WhatsApp 的用户数量已经翻了一番，但该公司只雇佣了大约 50 名工程师，而且这个小小的工程人员继续几乎完全靠自己运营。在一个如此多的互联网服务正在迅速扩大到数百万用户的世界里，WhatsApp 展示了前进的方向——至少在一定程度上。

WhatsApp 很少谈论它的工程工作，或者说它运营的任何其他部分，但昨天，在加利福尼亚州圣何塞的一次活动中，WhatsApp 软件工程师 Jamshid Mahdavi [上台简要讨论了该公司相当不同寻常的方法。诀窍之一是该公司使用一种叫做 Erlang 的编程语言来构建其服务。尽管 Erlang 在更广泛的编码社区中并不流行，但它特别适合处理来自大量用户的通信，并且允许工程师动态部署新代码。但是 Mahdavi 说，这个技巧既与技术有关，也与态度有关。](https://www.youtube.com/watch?v=57Ch2j8U0lk)

Mahdavi 大约两年前加入 WhatsApp，当时这家初创公司已经成立并开始运营，它的工程方法与他见过的任何方法都不一样——部分原因是它使用 Erlang 和一个名为 FreeBSD 的计算机操作系统，但也是因为它努力保持其操作简单。“这是一种完全不同的建设大规模基础设施的方式，”他周一表示。“看到这种极简主义的解决方法令人大开眼界...只是需要解决的问题。”

并行编码

在使用 Erlang 的过程中，WhatsApp 是朝着为并发性设计的编程语言的更大努力的一部分，在这种情况下，许多进程同时运行。随着互联网服务接触到更多的人——并从所有这些人那里杂耍更多的任务——这样的语言变得更有吸引力。很自然。

凭借其新的反垃圾邮件系统——一个用于识别其社交网络上恶意和不受欢迎的消息的系统——脸书[使用一种叫做 Haskell](https://www.wired.com/2015/09/facebooks-new-anti-spam-system-hints-future-coding/) 的语言。Haskell 开始于 80 年代后期，是一种学术实验，现在还没有被经常使用。但是它非常适合脸书的垃圾邮件战斗，因为它非常擅长处理并行任务——因为它让程序员可以如此快速地处理紧急任务。与此同时，谷歌和火狐浏览器的制造商 Mozilla 正在努力寻找一个类似的新语言 Go 和 Rust 的最佳平衡点。

和 Haskell 一样，Erlang 也是 80 年代的产物。为电信公司制造硬件和软件的瑞典跨国公司爱立信的工程师开发了这种用于高速电话网络的语言。英国的 Erlang 专家 Francesco Cesarini 说:“他们不是发明一种语言，然后弄清楚如何使用它，而是着手发明一种语言来解决一个非常具体的问题。”。“问题在于巨大的可扩展性和可靠性。电话网络是当时唯一需要显示这些属性的系统。”

Erlang 仍然处于现代编码世界的边缘，但在 WhatsApp 和包括微信(WeChat)和 Whisper 在内的其他互联网公司，它已经找到了一个新应用的家，这些应用的运行方式与一个庞大的电话网络没有什么不同。本质上，WhatsApp 是手机短信服务的替代品。它也需要“可伸缩性和可靠性”

更重要的是，Erlang 让编码人员高速工作——这是现代软件开发的另一个重要部分。它提供了一种在应用程序继续运行时向应用程序部署新代码的方法。在一个不断变化的时代，这比以往任何时候都更有用。

保持简单，聪明

这种语言确实有它的缺点。相对来说，了解 Erlang 的编码人员很少，而且它不一定与当今互联网公司已经构建的许多代码相吻合。脸书在 Erlang 中开发了最初的脸书聊天应用，但最终进行了重建，以便更好地适应其基础设施的其余部分。脸书工程副总裁杰伊·帕里克(Jay Parikh)说:“你有一个叫二郎的小岛，很难造足够多的船回到岛上来把所有东西都钩住。”。

当然，WhatsApp 不必以这种方式与现有的基础设施整合。Mahdavi 认为 Erlang 编码员的相对缺乏不是问题。“我们的招聘策略是寻找最优秀、最聪明的工程师。我们没有特意让他们来，因为工程师了解 Erlang，”Mahdavi 周一表示。“我们希望工程师进来，用第一周的时间熟悉语言，学习使用环境。如果你雇佣聪明的人，他们就能做到这一点。”

该公司通过雇佣适应性强的工程师取得了成功，这些工程师在很多方面都很有适应性。当被要求解释公司的秘密时，Mahdavi 的回答似乎太简单了。但这才是重点。“首要的一课就是要非常专注于你需要做的事情，”他说。“不要花时间被其他活动、其他技术，甚至办公室里的事情，如会议，分散注意力。”

在 WhatsApp，员工几乎从不参加会议。是的，只有几十个。但这也是重点。