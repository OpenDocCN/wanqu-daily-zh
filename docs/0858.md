# “版本控制的未来”。汤姆·普雷斯顿-沃纳谈论… |作者:查理·郭|媒介

> 原文：<https://medium.com/@charlierguo/the-future-of-version-control-f50648187462?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

# “版本控制的未来”

# Tom Preston-Werner 讲述了 GitHub 的早期

T2】

***郭:*** *那么你和克里斯【万斯特拉斯】最初是怎么认识的呢？你从哪里得到 GitHub 的灵感？*

普雷斯顿-沃纳:我们是通过旧金山的 Ruby 用户组认识的。我们会去参加会议，我看到他讲话，我们总是谈论 Git。那是在 Git 还很难使用的时候，但是它真的在空中冒泡了，尤其是在 Ruby on Rails 社区。

人们开始注意到它，但是没有人真正知道如何使用它，因为它很难使用。我们在 Powerset 做了一点试验。当我看到它时，我想，“这显然是版本控制的未来。”

> 一旦你开始使用 Git，特别是与 GitHub 结合使用，就没有回头路了。Git 就是太牛逼了。

但是只有一个网站可以共享 Git 库，这很糟糕，所以我说，“我是一个网站开发者，为什么我不建立一个网站来使它更容易共享，有一个中央库，这样人们就不必建立自己的服务器，创建用户帐户和所有这些事情。”

当时，Chris 也一直在思考 Git 以及如何使用它，我们已经在另一个项目上合作过，一个 Ruby 中的进程监视器。所以我们知道因为那个项目，通过 Git 共享代码的体验有多糟糕。



Brian Wilson Octocat, via [https://octodex.github.com/](https://octodex.github.com/)



我想和 Chris 一起做，因为我是通过 Ruby 社区认识他的。所以在一次聚会之后——我们在酒吧见面，就像我们在 Ruby 聚会之后经常做的那样——我给 Chris 看了一个我已经开始着手的项目。这是一个用 Ruby 编写的 Git 包装器，叫做 Grit。我把它给他看了，我把我的想法告诉了他，说，“你有兴趣吗？”他说，“是啊！我加入。”所以我们开始在晚上和周末黑它。

我想让他做铁路方面的工作。我认为我可以做视觉设计和后端，他可以做 Rails 应用程序，我们两个会成为一个非常好的团队，因为他们有互补的技能。

T2】

***郭:*** *什么时候推出的产品？*

普雷斯顿-沃纳:在我们开始私人测试之前花了大约三个月的时间，所以这不是一个漫长的等待。一开始是非常非常基础的产品，你可以想象。只是两个人在三个月的晚上和周末一起工作。

T2】

***郭*** *:你的第一批用户是从哪里来的？*

普雷斯顿-沃纳:我们开始在 Ruby meetups 上向人们展示它，因为他们是我们的朋友。他们是我们会一起出去玩的人。事实上，当时有很多来自 Twitter、Engine Yard 和 Powerset 的人在那里。旧金山的那种人。

所以我们四处展示。我们就像这样，“嘿，我们正在做代码共享的事情，你可以有 Git 库并把它们放在那里。”我们向参加聚会的人发出邀请，并告诉他们可以通过我们的私人邀请系统邀请其他人。



The first version of the GitHub source code browser. Photo credit: Archive.org



所以我们就这样获得了我们的原始用户。他们只是通过我们所知道的现有的 Ruby 社区。这也是 GitHub 从 Ruby 社区开始的原因，因为它恰好是我们所在的社区。

我们非常幸运地让 Rails 加入进来，在我们公开发布时从他们现有的版本控制系统切换过来。那是在 2008 年 4 月，大约是我们开始编码后的六个月。这对我们来说意义重大。仅此一点就可能让 GitHub 成为可能。

T2】

***郭:*** *你是怎么让 DHH(大卫·汉森)和 Rails 队转行的？*

**Preston-Werner:** 我们给他们发了电子邮件，试图解释为什么我们认为他们应该转用 GitHub，大概是在四五个月后。他们回答说，“不用了，谢谢！”

然后在接下来的一两个月，或者不管多长时间，他们开始看到其他人使用 GitHub。实际上是 Merb。Merb 是第一个突出的项目，Ruby 项目，切换。这是 Ezra [Zygmuntowicz]和 Yehuda Katz 的项目，他们是我们的首批用户。

所以 Merb 正式转向 Git，这比 Rails 早了几个月。我认为这是第一件让人们扬起眉毛说“哦，有意思。一个真实的项目正在使用它。”因为 Merb 在当时是一个真正的项目。可能没人知道那是什么了。



The old Merb website, merbivore.com. Photo credit: Archive.org



但在当时，它是 Rails 的轻量级替代品。所以我们给铁路公司的人发了邮件，他们拒绝了我们。但我认为在接下来的几个月里，他们会看到越来越多的人使用它，足够他们开始习惯它的想法。可能已经开始玩它了。一旦你开始使用 Git，尤其是与 GitHub 结合使用，你就无法回头了。就是太好了，太牛逼了。Git 就是太牛逼了。

这一事件对我们的领养来说意义重大。因为它让 Rails 社区的每个人几乎一夜之间都转而使用 Git 和 GitHub 作为他们的版本控制。

T2】

***郭:*** *为什么会这样？*

普雷斯顿-沃纳:人们会使用他们最喜欢的项目使用的任何东西。为了做出贡献，您需要了解您的工具所使用的版本控制系统。其他人将此作为一个信号，知道他们应该为他们的包、插件、对框架有用的东西使用什么。

因为 Ruby on Rails 社区是早期采用者——这是他们当时选择使用 Ruby on Rails 的本质——所以他们愿意尝试 GitHub，做出改变而不用太担心它。这就是我们如何获得原始用户群的。先是 Ruby 社区，然后是 Rails。

T2】

***郭:*** *有没有尝试给 GitHub 招募其他项目？普雷斯顿-沃纳:是的，有一段时间我们给一群项目维护人员发了邮件，询问他们是否有兴趣将他们的项目转移到 GitHub，但是并不是非常成功。我们尝试了 jQuery，有一次我们中的一个人给 John Resig 发了一封电子邮件，让他转投 jQuery。而且那几年都没成功！*

你知道，我们会和他联系，和他开玩笑说他应该如何切换，最终他们切换了所有的 jQuery 插件，我想。他们转换了一些东西，但他们多年没有转换 jQuery 核心。主要是因为他们不想疏远他们的 Subversion 贡献者的重要基础。但最终他们让步了。

大多数项目维护者在早期说，“对不起，因为我们所有的 Subversion 贡献者，我们不能切换。”对于 Ruby core 本身，我们与 Matz 和其他人讨论了切换问题。当我和 Matz 或任何 Ruby 核心人员开会时，我总是会提起这个话题。但是我们发现，说服项目维护人员转行是不可能的。他们必须说服自己。

T2】

***郭:*** *被颠覆最常见的拦路虎是？*

普雷斯顿-沃纳:是的，那几乎总是原因。对于较小的项目，他们会自动切换，你不需要说服任何人。至少在 Ruby 和 Java 脚本社区中，你知道那会自然发生。



Female Coder Octocat, via [https://octodex.github.com/](https://octodex.github.com/)



但是对于那些有真正理由不转向 Git 和 GitHub 的人来说，这就是颠覆。或者在像 Linux 这样的情况下，他们的工作流已经有了一个现有的过程，如果他们试图改变，会造成太大的破坏。以 Linux 为例，他们有非常繁重的基于邮件列表的工作流程。他们接受补丁的方式是通过邮件列表，所有的讨论都在那里进行，他们有处理补丁的系统，只是他们已经建立的基础设施数量太大，无法切换到另一个系统。

显然，自从 Git 诞生以来，Linux 内核就一直在使用 Git。所以他们在使用 Git，但是因为工作流程的原因他们不能使用 GitHub。

T2】

***郭:*** *从那以后 GitHub 的注册流程有什么变化？*

普雷斯顿-沃纳:实际上，它基本上没有变化。实际上，你所需要做的就是在 GitHub 上，在你的账户上创建一个存储库，然后从命令行或任何工具推送至该存储库。

当时只有命令行客户端。很长一段时间没有图形界面。现在你可以使用任何可用的图形界面:GitHub for Mac，GitHub for Windows，Git Tower。现在有很多了。所以这些是你可以使用的新渠道，但是你在 GitHub 上创建一个仓库的方式基本上没有改变。

不同之处在于，现在您可以在 GitHub 上创建一个已经初始化并有 Readme 的新项目，这样您就可以克隆它了。你并不总能做到这一点。您必须在本地创建存储库，然后进行推送。所以，这有点方便，但也没什么不同。

我认为这是让 GitHub 变得非常流行的真正重要的事情。在 GitHub 上获取代码几乎没有障碍。而像 SourceForge 这样的东西，你必须通过申请和批准的过程，才能找到一个可以放代码的地方。把你的代码放在网上对他们来说是一个很高的门槛。

然后像 Google Code 这样的地方就可以了。你不需要获得许可，但它仍然是一个单一的命名空间，一个全局命名空间，并且它是基于项目的。你还必须选择开源许可，这是另一个障碍。因为当很多人编写代码时，他们并没有选择许可证和其他东西的想法。我不认为你应该强迫某人选择一个许可证，仅仅因为他们把一些代码放到网上。我认为那不合适。

> 人们将使用他们最喜欢的项目使用的任何东西。为了做出贡献，您需要了解您的工具所使用的版本控制系统。

因此，我们一直采取的立场是，如果你不想选择许可证，你不必选择。我们想让你更容易做到这一点，因为我们认为选择一个许可证是最好的做法，这样其他人就可以清楚地知道什么是许可证以及如何使用你的代码。但是我们从来不想强迫人们这么做，通过减少选择的数量，我们让人们更容易这么做。我们试图减少他们对这个问题的思考。这就像把你所有的代码都放到 GitHub 上，你就知道你再也不会丢失它们了。想分享的时候分享就可以了。

T2】

***郭:*** *你为公司手工做过哪些事情？*

普雷斯顿-沃纳(Preston-Werner):嗯，这家公司是服务于人们的科技建筑公司。使用它的人明白这意味着什么，在早期使用它的每个人都必须足够老练，首先知道它是什么；这意味着他们可能足够成熟，知道如何运行基本命令，并在上面编写代码。

我们必须手动做的事情是在技术支持中，我们是作为一个团队来做的。我们都支持。我们都支持了很多很多年。大概两年后，我们有了第一个全职支持人员。

你也必须认识到，尽管 GitHub 团队在开始时发展非常缓慢。三年后，我们是一个六人团队。我们不是那种在第一年就发展到 100 人的获得大量资金支持的初创企业。那不是我们的路。

我们被引导，我们让人们以自然的速度适应 Git。我们不能强迫人们使用 Git，这是不可能的。人们必须渴望自己去学习它，也必须渴望自己去使用它。所以，我们没有做大量的市场营销。我们在营销方面所做的一切都是不可扩展的，因为我们所做的营销基本上都是去参加会议讨论。我们做了很多会议讨论。

> 我们发现，说服项目维护人员进行转换是不可能的。他们必须说服自己。

这包括我们的创始人。我们会花很多时间旅行，尤其是国际旅行。我们举办了关于 Git 的讲座，以帮助人们学习如何使用它，并谈论我们作为一家公司以及我们正在做的事情。从创始人的角度来看，这绝对是不可扩展的。

我们确实保持了我们希望 GitHubbers 能够旅行并在会议上演讲的价值观。所以我们一直有一个政策，如果你在一个会议上得到一个发言的位置，GitHub 会支付你去那里演讲的费用。所以我们扩大了会议讨论的范围，把它分发给整个公司。

我们也喝过酒，基本上就是在酒吧聚会。它来自于这样一个想法，我们最喜欢的 Ruby meetups 的一个部分是与人们在酒吧喝酒和谈论技术，这是一个人们可以自由分享想法的地方。在会议期间，它更有组织性。人们可能会变得很不耐烦，通常是一个人和很多人交谈，而不是每个人都互相交谈。

所以，我们总是很享受见面的那部分，在那里你可以和每个人交谈。然后要么是在酒吧，要么是在其他地方，我们会弄几个小桶什么的，我们会坐在见面的地方，一起出去玩。直到我们想，“好吧，也许我们可以复制人们自由分享想法的相同体验。”去酒吧邀请一群使用 GitHub 的开发者来分享他们的想法。

这真的很有效。太棒了。我们有很多人会出来，他们会非常开心地谈论技术。在早期，他们有足够的共同点，谈话总是很好。你总是有一个共同点，那就是你是一个 GitHub 用户。这可能意味着你正在使用 Ruby 或 JavaScript 或其他动态语言，因为在早期，只有少数语言在 GitHub 上真正突出。



Visionary Octocat, via [https://octodex.github.com/](https://octodex.github.com/)



因此，这是我们做我所说的“创造超级粉丝”的一种方式，这意味着超越公司的期望，以给客户带来惊喜和快乐。我们想增加忠诚度，帮助他们理解我们是真正的人，我们关心他们所关心的。我们希望他们知道，他们有一个可以与我们互动的场所，让我们知道产品如何为他们工作，他们想要什么功能，他们在用它做什么。

所以，这是一个很棒的频道。我参加了我们在当地举行的每一次酒会，或者我所在的任何有酒会的地方。我去了每一个地方，除了我生病时的一两个，大概有三年了。它们将在旧金山举行。在早期，当我们刚开始做的时候，我们每周都做。后来我们改为每两周一次，最终我们改为每月一次。但是我去了很多酒会，以便能见到我们的用户。

我认为这可能会被认为是一些从长远来看没有规模的东西，尽管我在相当长的一段时间内成功地完成了它。

T2】

***郭:*** *当时的增长曲线是什么样子的？*

普雷斯顿-沃纳:增长总是相当稳定。从来没有一个时刻会出现疯狂的拐点。这只是一条稳定、长期的指数增长曲线。我认为这是因为人们花了很多时间才转向使用 Git。

要求一家公司转换他们的版本控制系统不是一件小事。大多数公司都有许多围绕其部署系统和 CI 构建的基础架构，并且他们的所有开发人员都接受过使用某些东西的培训。要求他们切换到新的版本控制系统，以及他们的所有项目，成本非常高。因此，公司规模越大，他们做这件事的时间就越长，因为改变这一点存在内在风险。

这是他们愿意考虑的变化，可能每十年一次。这就是为什么我认为增长如此缓慢而稳定，因为这对许多人来说是一个如此重大的变化。虽然随着新的创业公司的创建和新项目、开源项目的开始，他们可以从一开始就选择 GitHub，这很好。随着时间的推移，这变得越来越容易。

然后你会有像 CoffeeScript 或 Homebrew 这样的项目诞生在 GitHub 上。这些东西从一开始就与 GitHub 完美共生。我们开始看到这些，这是相当惊人的。是的，像家酿啤酒这样的东西，他们通过 GitHub 管理所有的配方。他们做的一切都在 GitHub 上，通过 GitHub 处理。这是他们产品包管理的核心机制。这看起来很酷。

T2】

***郭:*** *你在技术方面遇到过哪些挑战？*

普雷斯顿-沃纳:我们最初是在发动机场举办的，举办了很多年。他们太棒了，他们真的帮助我们取得了成功，我们与他们建立了合作伙伴关系。我们把他们的标志放在页脚，他们给了我们无限的主机空间，这让我们可以以一种自举的方式很好地工作，因为我们没有为主机支付那么多。



Dojo Octocat, via [https://octodex.github.com/](https://octodex.github.com/)



所以我们用了很长一段时间，但他们当时使用的是 RedHat GFS，这是他们的全局文件系统，所以所有的 Rails 服务器基本上都将 GFS 作为一个驱动器安装，所有的 Git 存储库都可以通过这个驱动器访问。因此，每个前端服务器都不必担心存储不在本地。它只是假装它是本地的。

但问题是，一旦我们获得了足够多的前端，就开始出现对这些文件的大量争用，并且锁争用开始导致性能问题。

在第二年和第三年之间的某个时候，因为那个架构，我们开始频繁地瓶颈。所以在那时，我花了很多时间，大概六个月左右，重新设计了整个站点，以便能够在分布式系统上运行，其中存储不再是本地的，而是通过 RPC 机制来访问。

我写了一篇博文，名为“[我们如何让 GitHub 变得更快](https://github.com/blog/530-how-we-made-github-fast)”，你可以看看，这篇博文讲述了我是如何做到这一点的。我完全重新设计了后端的工作方式，以允许我们使用商用 Linux 服务器作为存储节点，使用单独的服务器作为前端，这使得任何前端都可以联系任何后端，并能够找到存储库的位置。

> 我们一直采取的立场是，如果你不愿意，你不必选择许可证。

我们将其部署在 Rackspace 上，并且我们还与他们建立了合作关系，以便在页脚放置他们的徽标时获得折扣存储。我们这样做了很多年，但最终我们停止了。但是，我的意思是，这是我认为你可以考虑的另一件事，在某种程度上是不可扩展的。我们很早就建立了这些合作关系，因为这是一个双赢的局面。这些公司得到了广告，我们得到了更便宜的主机服务。

但是，是的，有一个大规模的重新设计必须发生在这个网站上，否则它就会倒闭。可靠性开始受到影响，我的意思是，当时在场的任何人都会记得那个阶段。一点都不棒。但是，为了让新的架构就位，我们一直在拼命工作，这是一项巨大的工作。我写了大概半打开源项目来完成它。

T2】

***郭:*** *公司早期还面临过哪些严重的障碍？*

普雷斯顿-沃纳:表现是首要的。还有信任。如果我们有一个严重的安全漏洞，这可能是一个公司的生存危机。这些对我们来说是重大的。

在 GitHub 的早期，我们很幸运，因为我们没有遇到任何规则。不存在必须以这种方式对抗的在位者。

T2】

T2】

⚠ *如果你有兴趣在未来听到更多郭查理的消息，* [*注册他的简讯*](http://tinyletter.com/charlierguo) *或* [*在 Twitter 上关注他*](https://twitter.com/charlierguo) *。*

⚠ *如果你觉得这个有趣、刺激或者有用，请点击下面的* ***“推荐”。*** *这将有助于向他人推广这一块。*