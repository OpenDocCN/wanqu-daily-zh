# Airbnb 和 React Native Expectations | Ash flurgh

> 原文：<https://ashfurrow.com/blog/airbnb-and-react-native-expectations/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

到现在为止，大多数 iOS 开发者可能已经听说了这个消息:Airbnb 正在从 React Native 中脱离。看到网上的反应有点奇怪——人们表现得兴高采烈，几乎是*在庆祝*的宣布。我在 twitter 上看到一些 iOS 开发者几乎*在 Airbnb 上翻白眼*，甚至*尝试*反应本土。但我不是来谈论 iOS 开发者社区的偏狭的，我是来谈论 Airbnb 的(相当优秀的)博客帖子的。

这些博客帖子非常出色，因为 Airbnb 首先列出了它对 React Native 的期望，然后解释了该技术如何满足(或未能满足)这些期望。这是一个关于大型团队如何评估技术，以及这些团队如何承担他们决策的后果的彻底、诚实的讨论。

所以我真的很喜欢这些帖子，但我不会说它们是完整的。稍后会详细介绍。首先，我想讨论一下 Airbnb 的实际预期。我将在这里总结它们，但是你真的真的应该[亲自阅读帖子](https://medium.com/airbnb-engineering/react-native-at-airbnb-f95aa460be1c)。

以下是 Airbnb 对 React Native 的目标，我将其解释为他们对该技术的期望:

1.  允许我们**作为一个组织更快地**前进。
2.  维护原生设置的**品质条**。
3.  为手机写一次产品代码**而不是写两次**。****
4.  ****改善**开发者体验**。****

****好吧，那四件事怎么样了？好吧，我再总结一下:****

1.  *****“工程师能够以无与伦比的速度前进”*，但也有技术和文化障碍阻碍了这一成功。****
2.  ****再次，一个合格的成功:*“我们能够完成许多我们不确定是否可能的事情。”*但他们指出了同样的技术挑战和内部工程资源的缺乏，这有时会让他们的团队感到沮丧。****
3.  ****这是一次失败( ***** ): *“我们最终在三个平台上支持代码，而不是两个”*，这听起来很可怕。而且，*“我们的应用中只有一小部分是 React Native”*，这意味着他们有很多开销，却没有多少收益。我想更详细地讨论一下这个期望，稍后再详细讨论。****
4.  ****一个*“混合袋”*，其中一些东西更容易和更快，而另一些东西则更糟。****

****(***注**:我对#3 的失败定性有争议；你应该去读一下[利兰·理查森回复我的帖子](https://twitter.com/intelligibabble/status/1010948686501691393)，以获得一个非常棒的、细致入微的关于 Airbnb 在 Android 和 iOS 之间分享体验代码的澄清。)****

****好的，乍一看，这似乎很有希望，对吗？我的意思是，Airbnb 说“60%的工程师会描述他们的体验是惊人的”，所以你的团队中的大多数人都同意。但有 5%的人“强烈反对”？有意思。很有意思。我们很快会回到这个话题，首先让我们谈谈第三个期望。****

****每个人都在谈论的重点是第三点:Airbnb 希望能够在 Android 和 iOS 上重用代码，但我们失望了。他们想要“写一次，到处跑”的体验。这就是我对这些帖子以及它们是如何被讨论的问题。****

****React Native 是[显式的**而不是**“写一次，到处跑”](https://code.facebook.com/posts/1014532261909640/react-native-bringing-modern-web-techniques-to-mobile/)，虽然这是一个普遍的误解。你可以编写一个应用程序并部署到 Android 和 iOS 的想法很有吸引力，像 [Expo](https://expo.io) 这样的解决方案确实存在，但跨平台代码重用是*而不是*React Native 的核心卖点。React Native 是一个“学一次，到处写”的平台；React Native 的主要卖点不是为多个平台构建一个应用程序，而是让你可以使用 React 。****

****仅此而已。****

****所以当人们把 Airbnb 的决定框定为 React Native 的失败时，我想知道他们对 React Native 对于 T3 来说是 T2 的真正理解有多少。如果你期望一项技术可以做一些它不是为之设计的事情，然后当它不能交付时你感到失望，这并不是技术的错，不是吗？此外，如果你的应用程序中“只有一小部分”甚至*使用了*那项技术，那么你就不会得到同样多的好处。****

****我尽量不把这说成是 Artsy 与 Airbnb 的讨论，但这很难避免比较，因为 Artsy 在我们的 React 原生堆栈上取得了如此巨大的成功。我认为这很大一部分来自于我们如何构建我们的 React 本机代码:所有的 JavaScript 都在[它自己的仓库](https://github.com/artsy/emission)里，它[作为一个 CocoaPod](http://artsy.github.io/blog/2018/04/17/making-a-components-pod/) 发布。[本机应用程序](https://github.com/artsy/eigen)只是导入 pod 并从中实例化视图控制器，就好像它们是普通视图控制器一样(因为它们*是*，它们的视图恰好是 React 本机组件)。在我编写任何 JavaScript 之前，我们的原生代码库已经使用 React Native 一年了，这对我来说是最小化的开销，我是一个对 JavaScript 出现在 Artsy 的应用程序中非常不高兴的人。****

****这让我想起了文化。我认为这些博客帖子很好地描述了他们体验中的技术部分，但是它们缺乏对采用 React Native 的非技术障碍的详细描述。****

****什么样的障碍？好了，不要再提 iOS 开发者社区的狭隘性了，但是……iOS 开发者在更广泛的软件行业中有点名气。Charlie Cheever，[从世博会的角度写下了这个话题](https://blog.expo.io/should-we-use-react-native-1465d8b607ac),他说:****

> ****[……]有些组织中的人强烈认为自己是 iOS 程序员和 Android 程序员，他们很难对 React Native 感到满意。特别是 iOS 程序员对它非常不满，一般来说,**认为 JS 是公司代码库的一种侵扰**,而 Android 程序员则有更复杂的感觉。****

****(重点是后加的。)****

****当我看到一个团队的大多数人将他们的体验描述为“令人惊叹”，而团队中极少数人(但我敢肯定，他们非常直言不讳)将它描述为“强烈负面”时，这真的让我想知道 Airbnb 内部关于 React Native 的讨论。****

****我明白，真的。我也认为 JavaScript 是一种侵扰。我花了很长时间才从 T2 的阴影中走出来。我的意思是，如果你被雇佣来编写 Swift/Objective-C，突然你的团队要求你使用 JavaScript 来代替，很自然会感到沮丧，甚至愤怒。但你知道还有什么吗？工程师不只是写代码，他们*解决问题*。当然，工程师会对他们团队使用的工具有所感受，我认为未来的博客帖子应该涵盖 Artsy 如何努力缓解原生 iOS 开发者和我们的 React 原生选择之间的文化紧张。但我希望我们能更好地控制自己的感情。****

****Airbnb 的经历被恰当地比作一次被拒绝的器官移植。如果你公司的文化是真的真的融入 iOS 原生开发，那么风琴就被拒绝了。****

****Airbnb 选择离开 React Native 的原因既是技术上的，也是文化上的，虽然我理解他们为什么没有公布这些紧张关系，但这给人的印象是，Airbnb 的决定完全是基于技术优势。但事实并非如此。****