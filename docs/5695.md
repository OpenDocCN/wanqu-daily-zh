# 代码评审是经理的工作

> 原文：<https://hecate.co/blog/code-review-review-is-the-managers-job>

在经典管理书籍《高产出管理》中，安迪·格罗夫认为“培训是管理者的工作”，因为这是管理者提高组织产出的最高杠杆活动。

对于大多数团队的经理来说，这仍然是很好的建议，但是对于现代软件开发团队的经理来说，支点已经转移了。通常使用 GitHub pull requests 等执行的代码审查现在是提高工程团队产出的最高杠杆点。

## 不仅仅是质量控制

历史上，代码审查过程被认为是一种质量控制工具。该技术的早期经验验证压倒性地集中在其预防缺陷的价值上。自从[拉式请求成为主流](https://johnbarton.co/posts/happy-tenth-birthday-pull-requests)以来的十几年里，这种实践已经发展到如此之多。

代码审查，不管是通过拉请求还是其他方式，仍然是发现代码缺陷的最好方法之一。除了普通的“一级”质量定义，即它是否工作，这也是一个把关“二级”质量的好地方，二级质量是代码库的可维护性中的缺陷。

拉式请求也变成了团队之间互相培训的地方，部分地包含了经理作为培训师的角色。这是团队文化发展的主要地方之一，尤其是如果团队是分布式的。对于开发团队来说，它也是事实上的信息辐射器，了解产品和代码库如何随时间变化的最好方法是进入代码评审循环。

一个拥有良好代码评审过程的团队正在改进他们的代码库，并互相提高。一个有着糟糕的代码评审过程的团队最多只能停留在局部最大值，并且更有可能遭受代码质量下降和互相伤害的痛苦。

鉴于代码审查是一个如此高风险的过程，任何一个好的领导者怎么能忽视它呢？将过程视为工程师自己的唯一领域可能很有诱惑力，但是就像在[中一样，管理者应该如何(以及为什么)编码？](https://hecate.co/blog/how-should-managers-code)我认为这是观点和方法的失败，而不是管理层不应该参与的领域。

## 质量

确保软件满足组织的质量目标一直是代码评审过程的最大驱动力。Jeff Atwood 在他 2006 年关于代码评审的文章中认为每个工程师都应该让他们的代码得到评审，他的论点 100%依赖于质量。

开发人员社区的讨论现在正偏离这一框架。在他 2015 年的 Railsconf 演讲[实现强大的代码审查文化](https://www.youtube.com/watch?v=PJjmw9TRB7s)中，Derek Prior 认为“代码审查不是为了捕捉错误。现代代码评审是关于社交、学习和教学的。”我不确定这是一个非此即彼的情况，但无论您是否同意，确保评审过程中的所有利益相关者对目的有一致的看法是很重要的。

需要注意的一件非常重要的事情是，假设代码评审至少覆盖了一些缺陷检测，那么下游部门，比如 QA 或安全团队，是否有过程依赖性。想到的例子是，在审计或安全供应商问卷调查响应期间，团队经常使用他们的同行评审过程来证明“有效的变更控制”。

如果您的团队在这样的环境中偏离了将缺陷检测包括在代码评审任务中，作为工程经理，您应该或者轻轻地将他们推回到正轨，或者去管理涉众的期望。

## 培养

我将借用伊恩·田对《T1》一书的简明摘要来总结安迪·格罗夫关于训练的观点

> 培训是经理为增加组织产出所能做的最有效的活动。如果一个经理花 12 个小时为 10 个团队成员准备培训，使他们的产出平均增加 1%，结果是这 10 个员工的产出增加了 200 个小时(每个人每年工作约 2000 个小时)。不要把培训留给外人，自己动手。

当您能够在代码评审过程中嵌入良好的对等培训文化时，您就获得了团队改进的一个突出的杠杆点，并将其提升到下一个级别。如果你能够用自下而上的实践来强化自上而下的培训计划，这将会非常有效。试着举办一次午餐，围绕一个特定的编码实践进行学习，让你的几个工程师支持这个信息，并围绕这个主题集中他们本周的评审意见。

如果您的团队目前在代码评审实践中没有太多的培训思维，作为领导者，您的首要任务应该是培养它。可能会做过头，滑入一种过于学术化的文化，在这种文化中，自省会将太多的注意力从交付上转移开，但我认为更常见的错误是对教育效益投资不足。运用你的判断力，在磨利你的斧子和向树挥舞之间找到正确的平衡。

如何在代码评审中具体发展这种训练心态是一个大话题，我建议从关于 [Awesome Code Review](https://github.com/joho/awesome-code-review#talks-and-podcasts) 的讨论开始。

## 行为与文化

对于许多团队来说，无论是分布式的还是非分布式的，GitHub 都是一个完成工作和培养文化的“地方”。通过深入了解团队的拉动需求，你可以了解到很多团队的动态。专业人员和个人在拉式请求讨论中经常模糊不清，评论可能会从详细的逐行代码分析迅速转移到分享当前的主题来促进或批评另一个开发人员。

[你不能代表公司文化](https://relate.zendesk.com/articles/cant-delegate-culture-cant-buy-culture-where-to-get-company-culture/)。作为经理，你要对你的团队文化负责。**任何一个负责工程集团文化的管理者，在 GitHub 周围画了一个框，说“这是一个工程空间”，从来不去参观，就是**** 玩忽职守**。

如果听起来我对这个话题有强烈的感觉，那是因为我确实有。如果要我举出一个创建黑卡蒂的理由，那就是当 Coraline Ada Ehmke 描述她在 GitHub 的一年时。一名工程师在拉动式请求流程中被挑选出来并受到如此不同的对待，这一事实令人震惊，我认为这是 100%的管理失误。

作为经理，你的职责是确保你影响范围内的所有人际关系都是健康和富有成效的。你应该在整个评估过程中保持足够的时间，以了解你的团队中的社会规范，并在偏离规范时深入调查。如果这种规范是不健康的，你应该推动这个群体走向更健康的规范，如果这不起作用，那就寻求更激烈的措施，而不仅仅是推动。

用澳大利亚前陆军总司令大卫·摩利逊的话来说，“你走过的标准就是你接受的标准”——如果你脱离了审查过程，那么无论当前的标准是什么，你实际上都是在走过。

## 但是怎么做呢？

因此，您同意管理您的拉动式请求流程和文化的整体健康非常重要。下一个自然的问题是如何参与这个过程？

在管理拉请求流程和微观管理它之间有一条细微的界限。在任何特定的拉取请求中发生的事情都是团队的领域，因此您应该抵制频繁干预流程本身的冲动。过程中的行为趋势是你的领域，如果你运行一个好的元审查过程，你的工作将主要在幕后。

第一步是继续关注拉取请求本身。当团队很小的时候，这很容易——你可以遵循常规的 GitHub 电子邮件或松散集成。随着团队的壮大，你的会议负担越来越重，这可能会变得更加棘手——在四个小时的会议和一百封 GitHub 电子邮件之后回到你的办公桌，这有点让人受不了。这是我构建的第一个黑卡蒂产品[的用例——为经理](https://hecate.co/products/dispatch)发送批量公关通知。

第二步是发展你的反馈模式。当你看到好评时，一定要大声喊出来。如果你有机会在这里或那里贡献一些代码，确保你作为一个被评审者树立了一个代码评审礼仪的光辉榜样。

小心“公开表扬，私下批评”的陷阱。虽然一般来说这是个好建议，但因为拉式请求注释实际上是一个永久的公共记录(在组织的上下文中)，让不良行为不受检查会给人一种这种行为没问题的印象。

我建议通常从私下推搡冒犯者开始。你可能完全误解了互动，可以就此打住。在最好的情况下，你可以让他们自己道歉并改正自己的行为。顺便说一句，我建议除了最糟糕的评论之外，不要编辑其他评论，然后添加解释性或道歉性的评论，而不是重写历史。你不能收回伤人的评论，但是把它们从记录中删除会让被评论者更加生气，破坏集体学习的机会。如果冒犯者拒绝道歉，留下一个公开但温和的责备。

重要的是，公开可见的对代码评审中行为的奖励和惩罚与团队的价值观一致。

第三步是跟踪你的团队的趋势。在我的第一个管理角色中，我每周记录团队活动，包括那一周我看到的特别好或不好的拉动式请求。每月或每季度安排一次时间来回顾您的记录，并对您团队的过程是如何发展的有一个定性的感觉。我们现在正在开发一个产品，叫做[心跳——代码评审实践的定性跟踪](https://hecate.co/products/heartbeat),如果你想尝试一下，现在就可以注册。

## 鳍状物

代码审查实践和工具是提高你的团队绩效的许多方面的支点——不要忽视它。虽然管理人员应该脱离日常的代码审查，但是他们应该积极参与这个过程。

如果你喜欢我们关于管理和代码审查的话题，请到 hecate.co 查看我们的内容。我们有一份很棒的时事通讯，订阅表格在页脚！如果你想鼓掌，这篇文章也被[分享到了媒体](https://hackernoon.com/code-review-review-is-the-managers-job-d412827a66c9)上。

*照片由 [Maia Habegger 在 Unsplash](https://unsplash.com/photos/Th6p15WAPP0)T3 拍摄*