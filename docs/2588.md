# 这就是为什么大多数移动开发项目都无法清理 Swift

> 原文:[http://clean-swift.com/mobile-development-projects-fail/?UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](http://clean-swift.com/mobile-development-projects-fail/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

你刚签了一个新客户。

你对参与这个新项目感到兴奋。这在技术上很有挑战性，在经济上也很有成就感。你要尽最大努力让这个项目对你和你的客户来说都是成功的。

你希望通过在你的投资组合中突出这个客户来建立你的声誉。他们会在新闻稿中提到你来进行一些口头营销。

## 您理想的客户和项目

你不只是接受任何客户和项目。这个感觉真的很好。

*   这个想法很好。这不是关于建立一个脸书克隆。
*   其实是有一个健全的盈利的商业模式的。不是为了获得免费用户。
*   客户聘请了一名设计师来制作一套漂亮的 PSD。
*   还有一个使用 InVision 构建的可点击原型。
*   他们甚至想了很多，列出了很多场景和边缘案例。

客户反应迅速，并准备好推进项目。他们签了合同，预付给你第一周的开发费用。这些都是伟大客户的标志。

## 当你开始开发时

客户签收后，设计师在 Dropbox 里与你分享一套设计精美的 PSD。它们看起来棒极了。你很兴奋能和这么伟大的设计师一起工作。

*当你将要切 PNGs 的时候…*

你知道 PSD 不是为 3 倍分辨率的 iPhone 6S Plus 设计的。没问题。只要让设计师知道，让他们做 3 倍就行了。

果然。PSDs 现在已经修好了。我们回去工作吧。

*当你将要切 PNGs 的时候…*

您发现一些带有投影的图像没有作为单独的图层进行处理。当表格视图滚动时，您需要透明的 PNs。但是如果没有背景图片，你就不能把它们切掉。你可以试着用你有限的 Photoshop 技能来修复它。但是最好请设计师把这些弄好。

好吧。现在有了合适的图层，你可以完美地切割你的透明 PNGs 像素。

*当你将要切 PNGs 的时候…*

你意识到设计师想要使用的一些元素在实践中很难实现。它们要求你阅读文档并研究堆栈溢出。你不知道要花多长时间。你只知道它会远远超过你最初的估计。

是时候回去和客户协商一些细节了。他们真的需要在这个 MVP 中吗？或者他们可以等到未来的版本吗？它们实际上有用吗，或者只是一些华而不实的东西？

客户是通情达理的，理解你的顾虑。所以它们是灵活的。你被赋予了创造力和找到更简单的解决方案的自由。或者甚至使用一个内置控件，只拍摄一个简单的背景图像。

*当你将要切 PNGs 的时候…*

你开始意识到这些 PSD 只捕捉用户界面，而不是用户与界面的交互。设计师的许多意图是隐藏的或模糊的。根据你的经验和一些常识，你可以做出最合理的假设。这个图像可能需要一个按钮，并导航到一个细节屏幕。这可能是打算作为滚动查看用户照片。

有些假设是对的，有些是错的。但是没关系。我们开个会把这些内容充实一下，让大家都同意。

随着会议的进行，更多的边缘案例被发现和考虑。

在仪表盘上显示用户的好友更新就可以了。但是当用户还没有关注任何人的时候，你就让这个部分空着吗？如果 app 因为用户在隧道里的火车上而取不到数据，表格视图应该显示什么？后端宕机时应该会发生什么？是否应该显示错误消息？还是默默失败？也许显示核心数据的缓存版本？什么是同步策略？

一些边缘情况可能并不明显，直到您实际尝试实现这些特性。唯一可以肯定的是。这种反复几乎肯定会导致范围蔓延。这对开发人员来说是个大问题。

当最初的设计完成时，客户和设计师之间的范围已经确定了。你没有参与给出你的技术输入，也没有被咨询给出你的小时估计。见鬼，你甚至没有被雇用，直到所有这些都做了。

提供 PSD 后，要求您给出两个数字——小时数和小时费率。客户货比三家，并试图找到开发商，他们愿意支付和舒适的工作在一起。

## 失败是向前看

在你和客户之间解决了这些问题之后，你终于可以继续开发了。

这是一个新的 Xcode 项目，所以你不用处理之前开发者剩下的 cruft。你可以自由地设计、构建、重构和单元测试。

然而，要将 PSDs 转换成实际的代码却非常困难:

*   在不同屏幕尺寸和分辨率、不同 RAM 和存储容量的 iPhone 和 iPad 上运行相当快。
*   不会在模拟器和应用程序需要支持的物理设备上崩溃。
*   解决了不同 iOS SDK 版本的所有细微差别和粗糙边缘。
*   包含了一套针对所有业务规则和边缘案例的单元测试。

如果发生任何事情:

*   如果应用程序没有安装在客户端的设备上，这是你的错。
*   如果应用程序未能完美匹配设计像素，这是你的错。
*   如果应用崩溃了，那是你的错。
*   如果应用程序很慢，那是你的错。
*   如果应用程序由于不可预见的边缘情况而产生意外结果，那是你的错。

这可能会变得更糟。你甚至会觉得，如果这个应用不成功，那是因为你。因为你不能按时按预算执行，客户不得不做出妥协，削减功能，接受劣质设计。不可能是因为理念或者设计。这个想法很棒。这个设计看起来很漂亮。所以肯定是开发商的错。

哦不，你是个糟糕的开发者。

## 这真的都是你的错吗？

在一个项目中，有许多事情可能会出错。我相信你也有自己独特的恐怖故事。但是你忙着写代码。没有时间后退一步去试图弄清楚为什么你会有这种感觉。

这是做开发者的天性吗？是不是所有的开发者都有这种感觉？只要你以写代码为生，你会永远有这种感觉吗？

这真的都是你的错吗？你是该受责备的人吗？

你可以试着推卸责任。你可以说这不是你的错。这个想法没有你想象的那么好。这个设计太复杂了。要求太苛刻了。边缘案例涵盖面太广。这个大型应用程序没有足够的时间和预算。或者这个团队就是配合不好。可能有沟通问题需要先处理。

你也可以选择承担所有的责任。是的。这是你的错。你没有正确设计你的应用程序。您没有正确地设计和分离您的类。你重构得不够。单元测试的覆盖范围有漏洞。

或者介于两者之间。一个流行的，感觉良好的，民间故事版本。我们作为一个团队工作。我们作为一个团队失败了。我们作为一个团队一起度过秋天。所以这是每个人的错。没有指责。

不管你把责任推到哪里，你仍然可以感受到负面情绪。它们很容易让人陷入深度抑郁。有些开发人员甚至辞掉职业，再也不写代码了。

屏住呼吸。我会给你看你失败的决定性原因。

## 比较 web 和移动开发

在 web 应用程序中，你要么是前端开发者，要么是后端开发者。

在移动应用中，你是应用开发者。

| 技能 | Web 前端开发人员 | Web 后端开发人员 | 移动开发者 |
| 将 png 从 PSDs 上切下来 | ✔︎ |  | ✔︎ |
| 编写 HTML /构建 UI | ✔︎ |  | ✔︎ |
| 编写 CSS /样式用户界面 | ✔︎ |  | ✔︎ |
| 编写 Javascript 代码 | ✔︎ |  | ✔︎ |
| 多平台/多设备、屏幕尺寸 | ✔︎ |  | ✔︎ |
| 多种浏览器/多种 iOS 版本、分辨率 | ✔︎ |  | ✔︎ |
| 响应式设计/手柄旋转 | ✔︎ |  | ✔︎ |
| 构建自定义视图 | ✔︎ |  | ✔︎ |
| 同步策略 |  | ✔︎ | ✔︎ |
| 持久性策略 |  | ✔︎ | ✔︎ |
| 建立工作关系网 |  | ✔︎ | ✔︎ |
| 任何其他业务逻辑 |  | ✔︎ | ✔︎ |

在 web 应用程序中，前端开发人员从 PSDs 中分割 png。他编写 HTML 和 CSS。他编写 Javascript 代码。他负责多个平台和浏览器。他创造了一个既适用于桌面又适用于手机的响应式设计。

在移动应用程序中，应用程序开发人员将 png 从 PSDs 中分割出来。您构建用户界面并设计其样式。您可以使用自动布局约束来对齐事物。你负责不同的 iOS 版本、设备、屏幕尺寸和分辨率。在纵向和横向之间切换时，你要确保一切看起来都很好。

设计师可以用 Xcode 搭建用户界面吗？

自动布局需要理解代码和 iOS SDK。对于非程序员来说，在移动应用程序中构建用户界面是非常困难的。

设计师必须:

*   安装 Xcode 并设置证书和预置描述文件。
*   了解何时使用标签栏控制器、导航控制器、拆分视图控制器、页面视图控制器。
*   知道何时使用表格视图，何时使用滚动视图。
*   了解静态和动态原型表格视图单元格之间的区别
*   创建 UITableViewCell 子类。
*   充分掌握所有内置控件。
*   知道如何在故事板中设置约束，并在代码中调整它们。
*   将 IBOutlets 和 IBActions 连接到视图控制器。
*   使用 segues 创建应用程序的导航。

作为一名有经验的开发人员，你也知道在故事板中应用的技巧，可以使编写代码更容易。例如，设计者不可能知道他应该使用子视图控制器来分解这个复杂的屏幕。

如果你必须教设计师静态和动态原型单元格之间的区别，以及如何创建 UITableViewCell 子类，你还不如自己动手。

如果你不能合理地期望一个设计师用 Xcode 构建用户界面，有没有一个移动前端开发者可以做到这一点？

据我所知，不存在这样的角色。但是为什么不呢？

用编程术语来说，故事板和代码之间有太多的耦合。

一个移动前端开发人员要成为一个有效的移动前端开发人员，基本上需要知道和应用程序开发人员一样多的代码。如果这样的人存在，他本质上是一个应用开发者。

但是等等，还有更多…

移动开发人员还必须创建证书、预置描述文件和授权，在 iTunes Connect 中添加应用程序，生成 TestFlight 构建，提交应用程序以供审查。这听起来更像是开发人员的工作。但作为一名应用程序开发人员，你要承担一切。但是用同样多的时间，估计，和付出！

**移动开发=前端开发+后端开发+开发运营**

你做的是三个人的工作，而给你的是一个人的资源——时间和金钱。从概念到应用商店，你必须戴上许多帽子。

当客户想要构建一个 web 应用程序时，他们知道他们需要一个好的设计，构建漂亮的 HTML 和 CSS，在后端有一个服务器，以及一些保持应用程序运行的开发人员。当一个客户想要建立一个移动应用程序时，他们只知道雇佣一个设计师和一个应用程序开发人员。

这就是移动开发如此艰难的原因。这就是大多数移动开发项目失败的原因。

你可能没有这样想过。

## 你能做些什么呢？

你现在知道事实了。你这个移动开发者，其实既是前端开发者，也是后端开发者。这种双重责任是大多数移动开发项目失败的主要原因。

你也看到了不可能将这些角色分开，因为故事板和代码之间存在着严重的耦合。

你能做些什么来改变这种情况，提高项目成功的可能性？

您可以从三个方面来设定正确的期望值，并确保生成干净、高质量的代码。

### 提高你的沟通技巧

你不想让自己失败。你想为自己的成功做准备。要做到这一点，你需要从一开始就设定现实的期望。

你想让你的客户了解事情的复杂性，而不是内部运作。

而不是说:

> iPhone 6S Plus 上的坐标系是 414 x 736 磅。但是物理分辨率只有 1080 x 1920。为了在 retina 屏幕上显示 3 倍的资源，它首先需要在光栅化期间以 1242 x 2208 的像素渲染图像，然后将渲染的图像下采样到 1080 x 1920 以在屏幕上显示。

你的非技术型客户会完全不知所措，仍然不知道 PSDs 需要哪种分辨率。

说:

> 请要求设计师在**1242 px 2208 px**画布上制作 3 倍资产的 PSDs。如果他需要更多信息，你可以把这个链接发给他，链接是[揭开 iPhone 屏幕](http://www.paintcodeapp.com/news/iphone-6-screens-demystified "iPhone 6 Screens Demystified")的神秘面纱。

现在需要传递的是一个决议，而不是三个。外部链接中也提供了更多详细信息。

少即是多。一个链接胜过千言万语。

你的客户会尊重你的专业知识，欣赏你的专业精神。用更少、更简单的话，你的客户可以理解问题，同时感觉在控制中。

当你的潜在客户第一次向你提出这个项目时，他们会告诉你这个想法、理想的用户、特性和需求。他们想知道要花多长时间和多少钱。很容易告诉他们，这将需要 6 个月的时间，花费 50，000 美元，或你每小时的费用。

但是如果你把前端和后端开发的数字分开，你会走得更远。列出你要为每个人完成的任务。

你的潜在客户会意识到开发一个移动应用并不像他们想象的那么简单。他们会更愿意接受你的评估。他们会比你的竞争对手更认真地对待你，因为你清楚地确定了他们没有想到但现在意识到是必要的项目。

钱通常不是问题。你的客户希望有成功的项目。他们不想为失败付出代价，即使代价更低。

这是否意味着如果你的估算超出了客户的预算，你可能会失去这个项目？

是的。酪

失去一个糟糕的项目比赢得一个糟糕的项目要好。抱着不切实际的期望从事一个糟糕的项目注定会失败。它会耗尽你的时间和精力。你和你的委托人都会输。代码质量会受到影响。应用程序将会失败。你会赢得坏名声。

### 设定您的设计准则

你是一个有经验的开发者。您知道 PSD 应该是什么样子，以便轻松地将图像切片，这些图像可以立即在资产目录中使用。

准备一份文档，列出您的设计要求和最佳实践。发给你的客户和设计师。这会让你的客户知道你以前已经做过很多次了。你很了解你的手艺。

如果你是一家同时提供设计和开发服务的咨询机构，你可以让你的设计师拥有一套标准的设计最佳实践。类似于代码风格指南。

这将节省设计人员和开发人员之间的许多来回。由此产生的 PSD 将立即可用。

### 提升你的发展技能

有了沟通和设计，你还在和其他人一起工作。但是作为一名开发人员，你要对自己编写的代码负责。

您可以完全控制应用程序架构。你有责任确保你的代码正确运行。当需求改变时，确保你的代码是*容易改变的也是你最感兴趣的。*

你如何确保这些事情发生？

我知道的唯一方法是学习如何根据我们之前最好的软件工匠几十年的经验和成熟的技术来设计你的应用程序。只有在应用程序架构就位后，单元测试才有意义。

测试之前先有架构。

我已经谈到了如何[将干净的架构应用到 Swift 项目中](/clean-swift-ios-architecture/ "Clean Swift iOS Architecture for Fixing Massive View Controller")以及如何[用](/testing-view-controller-part-1/ "Testing View Controller – Part 1") [TDD](/test-driven-development-using-clean-architecture-part-1/ "Clean Swift Architecture Test Driven Development Part 1 – View Controller") 编写单元测试。我鼓励你研究它并提出问题。同时，不要害怕自己去尝试。

如果你决定升级，我保证你会成为一个更好更快乐的程序员。你会喜欢写代码，而不是诅咒和猴子补丁。