# Etsy CTO Q&A:我们需要软件工程师，而不是开发人员——新的堆栈

> 原文：<http://thenewstack.io/etsy-cto-qa-need-software-engineers-not-developers/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

当谈到开发工作的实践时，很少有公司像 Etsy 这样走在最前沿，Etsy 曾宣称其新雇佣的工程师会在第一天工作后将代码提交给生产部门[。不要被](https://codeascraft.com/2012/03/13/making-it-virtually-easy-to-deploy-on-day-one/) [Etsy](https://www.etsy.com/) 狡猾的外观所迷惑。去年，这家电子商务巨头从全球超过 2400 万买家那里获得了 23.9 亿美元的收入。该公司甚至聘请了 PHP 的创始人拉斯马斯·勒德尔夫，PHP 是该公司的首选语言。

我们最近在该公司的布鲁克林总部采访了该公司的新任首席技术官约翰·奥斯帕(John Allspaw)关于该公司的开发渠道、机器学习的使用以及该公司对潜在新员工的要求。

你能描述一下**Etsy 目前的架构吗？**

JA: 架构相对简单。在高层次上，没有太多过于复杂的东西，我认为我们更喜欢这样:PHP、Linux、Apache 和 MySQL。我们使用 Elasticsearch 和其他基于 Lucene 的搜索工具。我们以各种方式修改了 Solr 和 Elasticsearch。我们的“大数据”堆栈是 Hadoop 和 Vertica。

我们的工作是用 Scala 编写的。很长一段时间，它们都是用 JRuby 级联编写的，我相信现在它们完全是 Scala 了。我们是一个 CentOS 平台，是配置管理的大厨，我们已经将配置管理和一些配置内容组合在一起。

还有一些更有趣、更小的基础设施部分，你可以称之为“数据科学”和“机器学习”,它们使用 C，也使用 Scala。可能我们的堆栈中有 Fortran，因为它实际上是——我没有意识到这一点——但许多任务学习方法都与矩阵数学密切相关。

我们希望利用拥有少量知名工具所带来的所有优势。当您拥有少量知名工具时，您就可以专注于产品。我们不想为了工程而工程，就像你不想让一个木匠过分关心他有什么样的锤子一样——在某些时候，这并不重要。

## 阻止工具的扩散

**TNS:** 但是如何阻止工具的泛滥呢？

**JA:** 我们多年来一直在做的事情之一就是认识到，如果您要解决一个问题，并且您认为您需要以一种新的、新颖的方式来解决它，而这种方式无法用我们已经拥有的技术堆栈或模式来解决，那么这很好，只是我们需要明确这样做的运营成本。引入新的和不同的东西会给组织带来巨大的长期成本。

所以这不仅仅是免费的问题，也是你必须支持它，然后其他人必须学习它的一点点…

JA: 所以我们做了一些叫做“架构回顾”的事情我是一名开发人员；我正在研究这个 t ![dumbo_office_063](img/afcaea060665b3ceab0cc7d547515be2.png)兴；我遇到了一个问题；我尝试了各种我们通常尝试解决类似问题的方法；如果这些还不够，我想做的是问公司里更多的工程师，“嘿，我正在研究这个问题。我认为解决的唯一方法是使用这个无人知晓的全新事物。请说服我不要这样做。”

我希望有人举手说“在你描述了这个问题后，我确切地知道你在做什么，因为看看这个——六个月前，我有一个非常类似的事情，我终于弄明白了。你可以用我的东西！”

没有理由重新发明轮子。

有些人可能会认为这是自上而下限制自主性或创造性的一个例子。我会说这很容易，而且相当愤世嫉俗。想想如果你不需要考虑这些新东西，你会在产品中拥有多少自由。我们希望雇用对他们将要建造的房子感到兴奋的工程师，而不是对他们将要使用的新“John Deere 钉枪 3000 XT”感到兴奋的工程师。

你能告诉我们新功能的部署流程吗？

**JA:** 我们希望优化将代码投入生产的过程[并使之]足够简单，让您对部署充满信心。因此，当事情没有按照您预期的方式发展时，您知道您实际上在谈论生产问题，而不是部署问题。

因此，如果(一名新工程师)在第一天或至少在他们开始工作的第一周做不到这一点，那就意味着我们的部署过程太困难了。或者我们的入职流程太难了。

## 你建造它，你拥有它

你如何最小化开发和生产之间的差异？

JA: 我认为这将永远是一个未解决的问题。实际上，目前我们使用容器的唯一地方是在开发环境中。所有的基础设施组件都是为 Etsy 栈以及在 API 或 Web 上开发而呈现的。

我们很久以前就停止了在开发中复制生产数据的尝试。因为我们有超过 3600 万个不同的列表，很多语言，很多货币，所以我们不可能确定性地在数据中产生多样性。因此，我们所做的是——我认为其他大公司也这样做——提供一种只读代理。

工程师们在生产时对自己的工作负责？

JA: 哦，耶！你建造它，你拥有它。如果你写代码，你就是那个一直在思考，试图预测，它应该工作的所有方式，以及它可能不工作的所有方式的人![dumbo_office_027](img/7cad4f65b63e23623995ad4bfcbd1a2a.png)。就像 Etsy 卖家非常乐意在他们网站上出售的东西上签名一样，工程师也需要有同样的[所有权自豪感]，说“这是我的代码；无论成功与否，我都要为此负责。”

如果你负责按下那个写着“部署到生产”的大按钮，就会有一种明显的责任感。接下来你会想到的是“我怎么知道它是不是坏了？”它有可能被打破而我不知道吗？“突然间，您对监控、警报和指标收集的情况更加熟悉了。

**TNS:** 与此同时，我认为你已经从工程师那里抽象出了许多支持基础设施。他们不必担心支持堆栈的特定配置？

JA: 是也不是。我认为这确实是一个普遍的期望——抽象。不同的是，你是否抽离出来，以便你真的可以说“我不必担心这个”？或者你正在抽离，因为你意识到了那些勇气，但是现在想把你的注意力集中在这个领域。这就是我们要找的。

每天的事后总结都充斥着人们在停机前一秒钟坚称“我不需要关心这个”的假象。

如果“抽离”对你来说什么都不是，而是“这不是我的工作”、“我不在乎”或“我对那不感兴趣”的委婉说法，我想 Etsy 可能不适合你。因为当事情发生时，当事情没有按预期的方式发展时，你不能举起你的手臂说“这不是我的问题”这就是我所说的“保护你的屁股”工程，它可能在其他公司有效，但在这里无效。

讽刺的是，我们发现，事实上，工程师们更愿意知道。我从未听说过哪个工程师不想了解更多的网络知识。我从未听说过一个工程师想说“你知道吗，我不想关心数据库模式设计。”所以如果事实是人们真的关心，那么假装我们在抽象是浪费时间。因为你不会在乎，直到你在乎的那一秒，而当你在乎的时候，那就是你想要在乎的。

## 工程与开发

这就是程序员或软件开发人员和工程师的区别。我们想雇佣工程师；我们不想雇佣软件开发人员。

工程学，作为一门学科和一项活动，是多学科的。就是乱七八糟。这实际上是工程学最棒的部分。不是每个人都知道所有的事情。这是关于关注共同的，相互的理解。作为一名从第一天开始工作的工程师，我[不是]最了解 Etsy 网络协议如何工作的人，我将被鼓励去寻找这些领域的专家，直到我做到这一点。也许会有什么东西坏掉，然后我会学习新的东西。

同样，Etsy 的网络工程师是了解和判断他们是否对应用程序机制有足够理解的专家，作为 CTO，我有责任创造条件，让人们能够模糊这些界限，并说“我想学习很多关于数据库的知识！”或者“我想学习很多关于网络的知识。”我不需要成为 OSI 网络模型所有深奥知识的专家。但是我需要不断期待我工作的一部分是探索边界——我知识的悬崖——并继续前进。

## 机器学习

**TNS:** 你们用机器学习做什么？它还在开发阶段吗…？

JA: 哦，不，不！我最喜欢的关于我们如何使用机器学习的例子是搜索。

同样，在 Etsy，我们有超过 3600 万件商品！在某种程度上，它们都有相当大的独特性。没有 SKU。我们从买家和卖家那里了解到，让他们喜欢 Etsy 的一个原因是，他们说他们可以在那里找到在其他地方找不到的东西。

所以这很好，很好。但是想一想。如果你发现的东西在别的地方不存在，你怎么知道它存在(当你去 Etsy 找它的时候)？那是从哪里来的？我该如何描述你要找的东西？我不得不做一些推断性的猜测，我不得不做出推论并使用启发式方法来判断你的口味。

因此，我们必须推出一个级别，看看穿羊毛雨衣的人群是否真的喜欢天然剃须产品。我不够聪明，无法告诉你所有的数学知识。但是[数据科学团队](https://dl.acm.org/citation.cfm?id=2623338)已经就如何为这样的长尾提供建议这一特殊问题发表了几篇非常著名的论文。

**TNS:** 那么，有没有人才库可以帮助你积累这方面的专业知识？是来自统计方面，还是来自哪里？

JA: 我认为，最终，我们会像同行公司一样从同一个人才库中挑选人才。再说一次，我们不想雇佣一个只对统计学感兴趣的统计学家。如果要在一个展现出令人难以置信的算法能力的软件工程师和一个展现出一定流畅性，更重要的是对他们所做工作的财务和法律影响有好奇心的工程师或数据科学家之间做出选择，我们总是会选择后者。一直都是。因为，这就是雇佣程序员和雇佣工程师的区别。

你不可能在看到与软件开发相关的新闻时看不到“自动化”这个词。在我们所处的世界里，围绕软件中注入了多少判断，正在发生非常重要的对话。你可以这样说无人驾驶汽车；你可以这样说无人机。请记住，我们正在编写具有观点的代码——无论是在电子商务、汽车还是支付处理系统中。

当我们写代码的时候，我们会试着预测当我们不在的时候，代码会发现自己在什么情况下。因此，我们必须用软件来编码决策。那么这些决定是从哪里来的呢？嗯，我们通常没有注意到的是，我们对这些决策进行编码的方式——有些决策是代码会遇到的，这是我们甚至没有计划到的……

例如，我认为有些情况下更安全的做法是闯黄灯。我认为在有些情况下，最安全的做法是打破速度限制。所以我要把这些观点用代码表达出来。

像机器学习这样的事情的前景是，它描绘了一幅未来的画面，软件将能够做出所有这些决定，而人类的判断将永远是错误的。

我认为从这个角度来看有很大的缺失。这就是我们说要在 Etsy 采取以人为中心的工程方法的原因。我们可以尽可能假装算法会让一切变得伟大和完美，但这只是在我们认为人类脆弱、有缺陷、容易出错、容易引发事故等诸如此类的情况下，这是完全错误的。事实是，意外和失败发生的次数比成功少得多。所以从高层次的角度来看，在 Etsy，这不仅仅是一件空洞的事情。我们希望将工程视为工程，而不是被玫瑰色的算法眼镜所蒙蔽。

所以我想说的是，更进化的视角——我们在这里要采取的视角——是，不是问“为什么某事失败了”的问题，而是问为什么某事成功了，这真的很容易跳过。

Mara Kruk 的转录服务。

<svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 68 31" version="1.1"><title>Group</title> <desc>Created with Sketch.</desc></svg>