# SQLite 的适当用法

> 原文:[https://sqlite.org/whentouse.html?utm_source=wanqu.co&UTM _ campaign = Wanqu+Daily&UTM _ medium =网站](https://sqlite.org/whentouse.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

SQLite 不能直接与客户机/服务器 SQL 数据库引擎(如 MySQL、Oracle、PostgreSQL 或 SQL Server)相比，因为 SQLite 试图解决一个不同的问题。

客户机/服务器 SQL 数据库引擎努力实现企业数据的共享存储库。它们强调可伸缩性、并发性、集中化和控制。SQLite 努力为单个应用程序和设备提供本地数据存储。SQLite 强调经济、高效、可靠、独立和简单。

*   **Embedded devices and the internet of things**

    因为 SQLite 数据库不需要管理，所以它在没有专业人员支持的设备上运行良好。SQLite 非常适合用于手机、机顶盒、电视、游戏机、相机、手表、厨房电器、恒温器、汽车、机床、飞机、遥感器、无人机、医疗设备和机器人:即“物联网”。

    客户机/服务器数据库引擎被设计成位于网络核心的一个精心维护的数据中心内。SQLite 也在那里工作，但 SQLite 也在网络边缘蓬勃发展，在为应用程序提供快速可靠的数据服务的同时保护自己，否则这些应用程序将具有不可靠的连接。

*   **应用文件格式**

    SQLite 通常用作桌面应用程序的磁盘文件格式，这些桌面应用程序包括版本控制系统、财务分析工具、媒体编目和编辑套件、CAD 软件包、记录保存程序等等。传统的文件/打开操作调用 sqlite3_open()来附加到数据库文件。随着应用程序内容的修改，更新会自动发生，因此文件/保存菜单选项变得多余。可以使用[备份 API](backup.html) 实现文件/另存为菜单选项。

    这种方法有许多好处，包括提高性能、降低成本和复杂性以及提高可靠性。更多信息请参见技术说明[“aff _ short . html”](aff_short.html)和[“appfileformat . html”](appfileformat.html)和[“faster hanfs . html”](fasterthanfs.html)。这个用例与下面的[数据传输格式](#wireproto)和[数据容器](#container)用例密切相关。

*   **网站**

    SQLite 非常适合作为大多数中低流量网站(也就是说，大多数网站)的数据库引擎。SQLite 能够处理的网络流量取决于网站使用其数据库的程度。一般来说，任何一个每天点击数少于 100K 的站点都应该可以很好地使用 SQLite。100，000 次点击/天的数字是一个保守的估计，而不是一个硬性的上限。SQLite 已经被证明可以处理 10 倍的流量。

    当然，SQLite 网站([https://www.sqlite.org/](https://www.sqlite.org/))本身也使用 SQLite，截至 2015 年撰写本文时，它每天处理大约 40 万到 50 万个 HTTP 请求，其中大约 15-20%是触及数据库的动态页面。动态内容使用[每个网页大约 200 条 SQL 语句](np1queryprob.html)。这种设置运行在一个单独的虚拟机上，该虚拟机与另外 23 个虚拟机共享一个物理服务器，但仍然在大多数时间将平均负载保持在 0.1 以下。

*   **数据分析**

    理解 SQL 的人可以使用 [sqlite3 命令行 shell](cli.html) (或各种第三方 sqlite 访问程序)来分析大型数据集。可以从 CSV 文件中导入原始数据，然后将这些数据分割成小块，以生成各种摘要报告。更复杂的分析可以使用简单的脚本来完成，这些脚本是用 Tcl 或 Python(这两种语言都带有内置的 SQLite)编写的，或者是用 R 或其他语言编写的，使用现成的适配器。可能的用途包括网站日志分析、体育统计分析、编程度量的汇编以及实验结果的分析。许多生物信息学研究者都是这样使用 SQLite 的。

    当然，同样的事情也可以用企业客户/服务器数据库来完成。SQLite 的优点是更容易安装和使用，生成的数据库是一个文件，可以写入 USB 记忆棒或通过电子邮件发送给同事。

*   **企业数据缓存**

    许多应用程序使用 SQLite 作为企业 RDBMS 相关内容的缓存。这减少了延迟，因为现在大多数查询都是针对本地缓存进行的，避免了网络往返。它还减少了网络和中央数据库服务器的负载。在许多情况下，这意味着客户端应用程序可以在网络中断时继续运行。

*   **服务器端数据库**

    系统设计人员报告了使用 SQLite 作为在数据中心运行的服务器应用程序上的数据存储的成功，或者换句话说，使用 SQLite 作为特定于应用程序的数据库服务器的底层存储引擎。

    在这种模式下，整个系统仍然是客户机/服务器:客户机向服务器发送请求，并通过网络获得回复。但是，客户机请求和服务器响应是高级的和特定于应用程序的，而不是发送一般的 SQL 和获取原始表内容。服务器将请求转换成多个 SQL 查询，收集结果，进行后处理、过滤和分析，然后构造一个只包含基本信息的高级回复。

    开发人员报告说，在这种情况下，SQLite 通常比客户机/服务器 SQL 数据库引擎更快。数据库请求由服务器序列化，因此并发不是问题。“数据库分片”也提高了并发性:为不同的子域使用单独的数据库文件。例如，服务器可能为每个用户提供一个单独的 SQLite 数据库，这样服务器可以处理成百上千个并发连接，但是每个 SQLite 数据库只由一个连接使用。

*   **数据传输格式**

    因为 SQLite 数据库是一个采用[良好定义的跨平台格式](fileformat2.html)的单一压缩文件，所以它经常被用作将内容从一个系统传输到另一个系统的容器。发送方将内容收集到一个 SQLite 数据库文件中，将该文件传输给接收方，然后接收方使用 SQL 根据需要提取内容。

    SQLite 数据库有助于系统之间的数据传输，即使端点具有不同的字长和/或字节顺序。数据可以是大型二进制 blobs、文本和小型数值或布尔值的复杂混合。通过添加新的表和/或列，可以很容易地扩展数据格式，而不会破坏传统的接收器。SQL 查询语言意味着接收者不需要一次解析整个传输，而是可以根据需要查询接收到的内容。这种数据格式是“透明的”,因为人们可以使用多家供应商提供的各种普遍可用的开源工具轻松地对其进行解码。

*   **文件存档和/或数据容器**

    SQLite Archive 的想法展示了 SQLite 是如何作为 ZIP 存档或 Tarballs 的替代品的。存储在 SQLite 中的文件归档只比同等的 ZIP 归档稍微大一点，在某些情况下甚至更小。SQLite 归档具有增量和原子更新功能，并且能够存储更丰富的元数据。

    [Fossil](https://www.fossil-scm.org/)2.5 版及更高版本提供了 [SQLite 归档文件](sqlar.html)作为下载格式，此外还有传统的 tarball 和 ZIP 归档文件。sqlite3.exe 的[命令行 shell](cli.html) 版本 3.22.0 和更高版本将使用[创建、列出或解包 SQL 归档。存档命令](cli.html#sqlar)。

    SQLite 是一个很好的解决方案，适用于任何需要将不同的内容捆绑到一个独立的自描述包中，以便通过网络进行传输的情况。内容以一种定义良好的、跨平台的、稳定的文件格式编码。编码是高效的，并且接收者可以提取内容的小子集，而不必读取和解析整个文件。

    SQL 档案作为向许多客户端广播的软件或内容更新的分发格式非常有用。例如，这种想法的变体被用于向机顶盒发送电视节目指南，以及向车辆导航系统发送空中更新。

*   **替换为*特设的*磁盘文件**

    许多程序使用 [fopen()](http://man.he.net/man3/fopen) 、 [fread()](http://man.he.net/man3/fread) 和 [fwrite()](http://man.he.net/man3/fwrite) 来创建和管理本地格式的数据文件。SQLite 作为这些*特别*数据文件的替代品工作得特别好。与直觉相反，SQLite 在读写磁盘内容时比文件系统快。

*   **内部或临时数据库**

    对于拥有大量必须以不同方式筛选和排序的数据的程序来说，将数据加载到内存中的 SQLite 数据库中，并使用带有连接和 ORDER BY 子句的查询来以所需的形式和顺序提取数据，通常比尝试手动编写相同的操作更容易、更快。以这种方式在内部使用 SQL 数据库也给了程序更大的灵活性，因为可以添加新的列和索引，而不必重新编码每个查询。

*   **在演示或测试期间替代企业数据库**

    客户端应用程序通常使用通用数据库接口，该接口允许连接到各种 SQL 数据库引擎。将 SQLite 包含在受支持的数据库组合中，并将 SQLite 引擎与客户端静态链接，这是很有意义的。这样，客户端程序可以独立地与 SQLite 数据文件一起用于测试或演示。

*   **教育和培训**

    因为它易于安装和使用(安装很简单:只需将可执行文件 **sqlite3** 或**sqlite3.exe**复制到目标机器上并运行它), sqlite 是一个很好的数据库引擎，可用于 SQL 教学。学生可以轻松地创建任意数量的数据库，并可以通过电子邮件将数据库发送给教师进行评论或评分。对于对研究 RDBMS 如何实现感兴趣的更高级的学生来说，模块化的、经过良好注释和记录的 SQLite 代码可以作为一个很好的基础。

*   **实验性 SQL 语言扩展**

    SQLite 的简单、模块化设计使其成为一个很好的平台，可以原型化新的、实验性的数据库语言特性或思想。

1.  **数据是否通过网络与应用分离？→选择客户端/服务器**

    关系数据库引擎充当减少带宽的数据过滤器。因此，最好将数据库引擎和数据放在同一个物理设备上，这样高带宽引擎到磁盘的链路就不必穿过网络，而只需穿过低带宽应用程序到引擎的链路。

    但是 SQLite 内置在应用程序中。因此，如果数据位于独立于应用程序的设备上，则需要跨网络的更高带宽的引擎到磁盘链路。这是可行的，但不是最理想的。因此，当数据位于与应用程序不同的设备上时，通常最好选择客户机/服务器数据库引擎。

    *Nota Bene:* 在本规则中，“应用”是指发布 SQL 语句的代码。如果“应用程序”是一个[应用服务器](whentouse.html#serversidedb)，并且如果内容与应用服务器驻留在同一个物理机器上，那么 SQLite 可能仍然是合适的，即使最终用户在另一个网络跳跃之外。

2.  **很多并发作家？→选择客户端/服务器**

    如果许多线程和/或进程需要在同一时刻写入数据库(并且它们不能排队和轮流)，那么最好选择一个支持该功能的数据库引擎，这通常意味着一个客户机/服务器数据库引擎。

    对于每个数据库文件，SQLite 一次只支持一个编写器。但是在大多数情况下，一个写事务只需要几毫秒，因此多个写操作者可以简单地轮流进行。SQLite 将处理比许多人想象的更多的写并发。然而，客户机/服务器数据库系统，因为它们手边有一个长期运行的服务器进程来协调访问，通常可以处理比 SQLite 多得多的写并发。

3.  **大数据？→选择客户端/服务器**

    如果您的数据增长到一个磁盘文件无法容纳的程度，那么您应该选择 SQLite 之外的解决方案。SQLite 支持最大 281 TB 的数据库，假设您可以找到支持 281 TB 文件的磁盘驱动器和文件系统。即便如此，当内容的大小看起来可能会达到 TB 级时，考虑集中式客户机/服务器数据库也是不错的选择。

4.  **否则→选择 SQLite！**

    对于具有低写入者并发性和少于 1tb 内容的设备本地存储，SQLite 几乎总是更好的解决方案。SQLite 快速可靠，不需要配置或维护。它让事情变得简单。SQLite“刚刚好”。