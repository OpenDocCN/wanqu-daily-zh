# 开发人员能从随叫随到中学到什么？

> 原文：<https://jvns.ca/blog/2017/06/18/operate-your-software/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

我们经常说随叫随到是一件坏事。例如，在我写这篇文章的前一天晚上，我的电话在半夜把我吵醒，因为电脑出了问题。那一点都不好玩！我脾气不好。

不过，在本帖中，我们将讨论你能从随叫随到中学到什么，以及它如何能让你成为一名更好的软件工程师！。为了从随叫随到中学习，你不一定需要在半夜被叫醒。在这里，我所说的“随叫随到”是指“当你的代码出错时，要对它负责”。这可能意味着一觉醒来就发现了一夜之间发生的问题，需要在工作日解决它们！

这里的一切都是由 Charity Majors 的一个令人惊讶的 Twitter 帖子合成的，她在帖子中问“随叫随到如何让你成为一名更好的工程师？”:[https://twitter.com/mipsytipsy/status/847508734188191745](https://twitter.com/mipsytipsy/status/847508734188191745)

### 了解什么样的生产问题是常见的和不常见的

当你设计一个系统时，你需要为它的错误情况而设计！当我刚开始做工程师时，我发现想出错误案例真的很难。任何事情都可能出错！但是有一个比“任何事情都可能出错，防范一切”更好的系统故障模型是很重要的因为通常你必须优先考虑在哪里花时间，你应该花时间担心实际上很可能发生的边缘情况。

随叫随到可以很快告诉你你的系统经常遇到什么样的边缘情况！

比如看到一些软件失败后，知道 DNS 查询也可以失败。对 DNS 查询(以及一般的网络请求)进行错误处理是很有用的，即使您认为您正在与之对话的服务器大多是可靠的！

我还知道，原则上 RAM 可能会出错(当你在内存中设置一个值时，它可能会被设置为其他值！)但这在我的实践中从来没有发生过(目前还没有！)所以我担心的比较少。(这可能是因为服务器使用 ECC 内存？)这篇文章[利用 DRAM rowhammer bug 获得内核特权](https://googleprojectzero.blogspot.ca/2015/03/exploiting-dram-rowhammer-bug-to-gain.html)是一个很好的例子，说明如何利用有缺陷的 RAM 进行攻击。

### 尽早学习内置监控和诊断功能

没有什么比系统崩溃更好的了，负责修复它，并且没有办法看到什么是错误的，以使您相信构建监控和登录应用程序的价值。

随叫随到将会很快教会你调试应用程序所需的*种*诊断。如果您因为应用程序花费异常长的时间进行数据库查询而被分页，那么您可以开始监控数据库查询需要多长时间！那么下一次，打电话的人就更容易发现这是不是问题所在。

最棒的是，这些课程甚至会持续到你当前的随叫随到之后——你会注意到“嘿，每次我写一个程序，我都会记录它的数据库查询需要多长时间，这次我会把它放在开始的地方！”

### 了解系统中不属于你的部分

很容易把系统中你不拥有的部分想成一个黑盒。“我只是进行数据库查询，它们正常工作，这很好，数据库团队负责数据库”。

但是，对您所使用的系统的局限性有一个基本的了解实际上是非常有用的！如果您在 web 应用程序的后端工作，您想知道可以对数据库进行多少次查询，大约需要多少网络带宽，可以写入磁盘多少，等等。

如果您因为应用程序进行了太多的数据库查询而被分页，这是一个极好的机会来了解您所使用的数据库的局限性！然后(你能在这里看到一个模式吗？)下一次，当你做一些需要大量数据库查询的事情时，你可以提前检查一下，确保没有问题。

### 增强对自己判断的信心

这篇文章中有几段很棒的引言:

> 它帮助我获得了对自己判断的信心。你必须做出重大决定，采取可怕的行动，经历可怕的决定。
> 
> 我不再怀疑自己。如果有人呼我，我会崩溃，没有时间去怀疑自己。

### 了解什么需要紧急关注

有些问题需要马上解决，有些问题……真的不需要。过去，我真的很难理解为什么一些工程师会告诉你“是的，这没什么大不了的”，然后..对吗？

建立这种直觉非常重要(否则每次出现错误时你都会惊慌失措，你将一事无成！).当您需要一个系统时，您会在紧急问题发生时看到它们，并了解它们的原因。因此，你慢慢获得了“哦，好吧，当 X 发生时，它通常会导致一个严重的问题，但当 Y 发生时，它不是一个大问题”的直觉。

这也让您能够主动预防即将到来的问题——如果您看到一些令人担忧的事情发生，您可以在团队中的任何人不得不在半夜被吵醒之前解决它。

### 学会设计可靠的系统

所有这些都有一个共同的线索。作为软件工程师，我们工作的很大一部分是设计系统，即使事情不像你预期的那样发生，也能继续为你的客户工作。学习如何为失败而设计的一个很好的方法是随叫随到。

Kamal 向我指出，拥有一个代码很好(没有太多错误等)的系统是很容易的，但是由于一些基本的设计选择，它在生产中不能很好地运行。例如，您可以设计一个系统，它需要在每次用户发出请求时进行多次数据库查询。因此，充分理解不同设计选择的生产含义将有助于您设计更好的系统！

### 学习如何做出最小有效的改变

当出现[事件](https://increment.com/on-call/when-the-pager-goes-off/)时，您希望在修复根本原因之前稳定系统(好吧，这个服务器着火了，在找出原因之前，我们能不能把流量从它那里转移开？)!当您被寻呼时，这是一项有用的技能，但当您的系统需要帮助，但不一定有时间/资源来立即完全修复它时，这也是一项有用的技能。

### 了解分布式系统、一致性和竞争条件

> 随叫随到让我了解了比赛情况

最近，我收到一个警告，说我写的一份工作失败了。我看了一会儿，然后我意识到“哦，这是因为 S3 列表操作最终是一致的”——我的代码在 S3 列出了一个前缀，它得到的结果不是最新的。(这里的“最终一致”实际上意味着“最终”——显然，有时您会从 S3 桶中添加/删除一个对象，而它在几分钟内不会出现在列表操作中)

这就是 S3 应该如何工作的，但是我写代码的时候并没有真正考虑到这一点。按理说，我应该更仔细地阅读文档，但在实践中看到这样的问题有助于我理解当系统失败时“最终一致”的系统是什么样子，并记住下次编写代码时要记住这一点。

### 我喜欢的其他语录

> 我的团队非常认真地对待随叫随到的问题:在每周的会议上回顾每一个呼叫我们的问题，并分配任务去解决
> 
> 对我来说，教训是过程是重要的，为持续改进而努力是值得的。

和

> 随叫随到意味着我不能挑选喜欢的/舒适的话题，而避开困难的/不愉快的话题。我被迫延伸和学习。

和

> 能够把一个人的骄傲放在一边，说“我需要帮助，即使我正在叫醒某人来帮助我。”

和

> 这让我更好地了解如何将复杂的故障情况分解成更容易调试的小部分…

### 负责我的程序的运行使我成为一个更好的开发者

我从来没有真正在这样一个世界中工作过:我写了软件，然后把它扔到墙外，让另一个团队来操作。但是我确实想写软件，然后看看它在实践中是如何失败的，这是一次很好的经历！我觉得能够编写软件并看到它在几个月/几年的实践中是如何运行的是一种巨大的特权。

也就是说，我个人从来没有经历过特别繁重的值班轮换，我可能被传呼过的最多的情况是这样的..每周 2-3 次，每 4 周一次。但是我觉得我还是从中学到了很多！

我可能在这里遗漏了许多重要的东西，但是我在 2 个月前写了这篇文章，所以它已经比我通常的“写这篇文章并在 4 小时内发表”晚了很多。