# 进行代码评审的 7 个最佳实践

> 原文：<https://blog.asana.com/2016/12/7-ways-to-uplevel-your-code-review-skills/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

成为一名优秀的代码评审员并不容易，即使已经写了将近七年的代码。当我四个月前加入 Asana 时，我意识到我需要提升我的代码审查技术。这里有一些对我有帮助的代码评审最佳实践。

### 1。与您的团队一起对代码评审的目标进行优先级排序

安排一个时间和你的团队成员讨论代码评审的主要目标。如果你试图使用代码评审来加强风格的一致性，但是你的团队成员依靠你的眼睛来捕捉错误，你们两个都不会从代码评审中得到最多。如果你们都同意代码审查的目的，你将能够更有效地利用你的时间。

我最喜欢的代码评审目的是

*   帮助我学会如何像我的同事一样思考，这样我就可以更容易地浏览和修改代码。
*   传播关于最近哪些文件和功能发生了变化的知识，以便当有 bug 潜入时，至少有两个人可以帮助诊断和修复问题。在一个团队中，没有人应该是孤独的。

我最不喜欢的代码评审目的是

*   抓虫子。我认为自动化测试和使用应用程序是发现代码实际运行方式的更好方法。
*   执行基本的风格规则。我认为棉绒更适合这个。为什么要在计算机做得更好的事情上浪费人类的时间？此外，收到一堆负面和不重要的评论会破坏团队和信任的感觉。

### 2。运行应用程序并尝试使用功能

阅读代码是一种非常不自然的与代码互动的方式。仅仅通过阅读来发现错误需要多年的练习。电脑比你的大脑更擅长运行代码。

很有可能，如果你运行这个应用程序，你会做一些与作者在测试他们的改变时所做的略有不同的事情。你可能会发现他们漏掉的重要案件。

当处理具有复杂生命周期的代码时，在运行的代码中设置断点会非常有用。运行代码并命中三个断点可能会让您节省半个小时的时间来理解各个部分是如何组合在一起的。此外，如果代码遵循的生命周期与您预期的不同，那么您可能已经发现了一个 bug 或者了解了一些关于您的应用程序的重要信息。

### 3。可视化方法调用层次结构

我经常发现自己忽略或掩饰细节。我需要一些技巧来迫使我的大脑更深入地吸收代码。有时绘制或可视化哪些方法调用哪些其他方法，或者哪些对象使用哪些其他对象会有所帮助。关键是考考你自己。读书不如从自己的记忆中提取一些东西写下来。如果你现在测试一下自己，以后你会更好地回忆起这个变化。

### 4。一看到请求就进行代码评审

即使这看起来像一个大的复习，也要尽快通过第一关。你的同事会很感激，他们的善意会帮助你作为一名评审员成长得更快。

立即进行代码审查并不总是容易的，尤其是如果他们修改了大量代码或者启动你的应用需要很长时间。如果你发现自己在代码评审上拖延，这些提示可能会帮助你更快地开始:

1.  设定一个时限，比如半个小时。在你第一遍的时候，花半个小时试着理解变化，并写下问题。如果在期限结束时，你认为你可以批准变更，批准变更。如果你还没有准备好，把你到目前为止的想法或问题发给作者，安排一个时间，你打算做一个更详细的检查，批准或要求修改。
2.  在你的机器上保留两个独立的库，一个用于你自己的变更，一个用于你正在审阅的变更。这样，编译您同事的更改不会破坏与您自己的更改相关联的编译工件。

### 5。在你阅读它之前，想象一下你会如何做这个改变

请先阅读功能描述，并尝试列出您希望更改的文件。然后，检查作者实际更改的文件。如果它们与你的预期不同，找出原因。有些文件可能被意外更改，或者有机会了解代码库。像这样测试自己是实现类似特性的一个好方法。

### 6。阅读现实开发环境中的变化

Phabricator 和 GitHub 大多只针对显示文本差异进行了优化。像 App Code、IntelliJ 和 RubyMine 这样的编辑器针对显示代码进行了优化(我非常喜欢 IDE 中内置的 Jetbrains code-diff 工具)。

将更改放到您自己的机器上，这样您就可以看到编译错误、警告和测试失败。这也将为您提供您通常用来浏览代码的工具，如点击命令和搜索用法。查看整个文件——不要将视线局限于发生变化的行——将有助于您了解相关的代码段是否在文件中分散得太远，以及文件的整体布局是否便于未来的程序员使用。

### 7。总是给予认可，除非你能证明有 bug

当你提出修改建议时，假设作者能够处理这些修改。让他们慢下来等待第二轮的代码审查几乎是不值得的，尤其是如果更改是简单的事情，比如重命名变量或提取重复的方法。

如果你因为风格而让作者等待更长时间，从长远来看代码会变得更糟。放慢变更的速度使得人们不愿意提交澄清和清理代码的小变更。

如果你觉得没有资格给予认可，就用那些话说出来，并想出一个让合适的人来看代码的计划。当你忘记点击“批准”时，修改的作者不知道你是否忘记了，或者你认为代码被破坏了，或者你不关心他们是否被阻止了。通过明确下一步是什么来帮助他们感受到你的良好意愿。

### 每个团队都是不同的

希望这些策略已经给了你和你的团队一些关于如何进行代码评审的对话。如果您有兴趣了解我们的团队、工程最佳实践或空缺职位，请查看我们的 [工程团队页面](http://www.asana.com/jobs/eng) 。代码审查快乐！