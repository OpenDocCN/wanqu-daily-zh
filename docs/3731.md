# 我们如何建立一个持久的企业

> 原文:[https://www . cock roach labs . com/blog/how-were-building-a-business-to-last/？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://www.cockroachlabs.com/blog/how-were-building-a-business-to-last/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

CockroachDB 的灵感来自于对可用的开源数据库和云 DBaaS 产品的失望。除了开源软件之外，它从未被视为任何东西。

2014 年末，随着 GitHub 社区令人鼓舞的兴趣和一些有远见的风险投资者的询问，到了做出决定的时候了:我们应该成立一家公司来加速 CockroachDB 的开发吗？一方面，雇佣一个优秀的团队可以更快地开发出可行的产品。另一方面，我们的目标不再仅仅是构建下一个伟大的开源数据库。它必然会扩展到包括对我们的员工和投资者的关注。

我们面临着如何围绕开源软件开展业务的难题。

## 围绕开源软件建立业务

自从 RedHat 开辟了第一条道路以来，开源软件商业模式一直在不断发展。很少有人成功使用 RedHat 以支持和服务为中心的原始模式。事实上，大多数投资者认为早期的开源商业模式是一个失败的提议。两种常见的 OSS 商业模式是:

*   **开芯。**这通常涉及一个强大的免费开源核心产品，通常由 APL、MIT 或 GPL 授权。这才是核心。围绕核心，一个商业实体提供一系列专有软件，增加或扩展其功能。这些专有附加软件作为商业软件出售，通常与支持和服务捆绑在一起。
*   使用开源软件的云托管服务。通常，这也涉及专有软件(例如多租户、计费、服务仪表板)，但最终产品是作为服务而不是软件销售的。

这两种模式被许多公司成功地采用。Cloudera、Elastic 和 Confluent 是我喜欢的三个例子，它们都有不同的模型，处于将开源产品转变为成功业务的不同阶段。

### 警示故事

风景也包含了警示的例子。一些开放源码软件公司为付费功能设置的门槛太低，使得核心开放源码软件产品感觉“步履蹒跚”。2017 年，任何核心能力不需要商业许可就无法扩展的产品都可能将门槛设得太低。也有一些公司未能在早期提供足够的专有价值，而开放核心正迅速成为基础设施的标准部分。那些看到核心产品价值的大公司，以及那些在其他情况下乐意为改进付费的公司，别无选择，只能构建他们自己的定制扩展。

有一些优秀的开源软件公司由于缺乏收入而停止开发他们的产品。有些是最近的，包括 [RethinkDB](https://rethinkdb.com/blog/rethinkdb-shutdown/) 。以前对默认进入开放核心的能力更自由的公司已经决定为了生存能力的利益更有洞察力(见[保罗·迪克斯的 InfluxDB 帖子](https://www.influxdata.com/update-on-influxdb-clustering-high-availability-and-monetization/))。

这是一个微妙的平衡动作。为开源软件构建付费的“企业”功能可能会让人感觉很脏。付费功能削弱了开源的吸引力，并可能导致大量的社区焦虑。另一方面，令人沮丧的是，看到庞大的云服务提供商重新包装 OSS 以获得实质性收益，却没有找到培育开源生态系统的方法，或者数千亿美元的跨国公司放弃挣扎中的 OSS 公司的支持许可。如果你真的想围绕开源软件建立一家公司，你必须走一条狭窄的道路:过早引入付费功能，并冒着减少采用的风险。过晚引入付费功能，可能会鼓励经济搭便车。在任何一个方向偏离太远，你的努力最终只会继续成为无偿的开源贡献。

## 那么，CockroachDB 将如何赚钱呢？

我相信最终我们会同时采用云托管模式和开放核心模式。对 DBaaS 的需求发展很快，只写了第一章(剧透:AWS 赢了)。但在不久的将来，我们的产品更适合那些打算在公共或私有云中运行数据库的公司。换句话说，我们追求开放核心模型，尽管有一些有趣的蟑螂实验室的特性。

第一，发牌。许多采用开放核心模型的公司将其专有特性实现为闭源扩展。其他公司提供两个或更多产品，企业版包含封闭源代码，并作为编译后的二进制文件分发。这些模型有明显的缺点。它们很难升级，它们通常涉及多个开发分支，管理起来令人沮丧，而且它们排除了开源在新特性方面的好处:外部开发人员不能调试或定制产品的专有部分。

### CockroachDB 社区许可证(CCL)

我们将提供不同的付费企业功能。我们 GitHub 中的所有内容目前都是根据 Apache License 2 (APL)条款授权的。我们引入的企业功能将包含在新许可证覆盖的源文件中，称为[cocroach db 社区许可证](/cockroachdb-community-license/) (CCL)。源代码仍然是可用的，但是因为它不包括免费再分发的权利，它不是定义上的[开源](https://opensource.org/docs/stable/osd)。它的目的是确保企业特性的商业使用在超过评估期后是有报酬的。这些特性在默认情况下是不启用的，会在文档、代码和帮助消息中清楚地标记出来，并且只能由操作员或开发人员选择启用。我们发布的二进制文件将包含这些特性，但结果是，不能在 [FLOSS](https://en.wikipedia.org/wiki/Free_and_open-source_software) 许可下发布。然而，对于那些需要它的人来说，一个“纯”的 FLOSS 发行版也是可用的，没有企业特性。

因为 CCL 许可证覆盖的所有特性的源代码都是可用的，我们希望其他人能从我们正在构建的东西中学习，并有一天能构建更好的产品。我们希望我们的客户定制软件，以适应他们自己的野心。

### 我们如何决定 CCL 许可证涵盖哪些功能？

这是一个困难的问题，最终也是平衡行为的症结所在。我们将选择提炼为一个试金石:**初创公司成功所必需的特性将是 APL，以及开放核心的一部分；一个主要只对已经成功的公司有用的特性是 CCL，它是企业产品的一部分。**为新功能选择哪种许可证将由我们的直觉和社区反馈决定。

然而，因为这样的决定是主观的，它们会随着时间而演变。将企业功能从 CCL 转移到 APL 是很简单的，我们认为对于初创公司需求很高的任何功能来说，这都是理所当然的。

**一家初创公司需要从数据库中获得什么才能在 2017 年取得成功？**

激发 CockroachDB 设计灵感的每一个特性:

*   跨数据中心部署和一致的复制，以克服故障灾难(例如停机和数据丢失或不一致)。
*   水平可扩展性和面向未来的云原生设计。
*   具有分布式 ACID 事务和查询执行的 SQL API，用于提高开发人员的工作效率。

虽然上述一些特性在其他数据库中被认为是企业级的，但我们相信它们构成了构建产品和服务的适合各代人的基础，并且它们将在 APL 下保持免费和可用。毕竟，这些是定义 CockroachDB 的特性。

那么，初创公司不需要什么才能成功，但一家成熟的公司会考虑一项重要的要求，甚至是新用例的改变游戏规则的推动者？

我们计划在 2017 年推出两款此类产品。

第一个是完全分布式的增量功能，使用可配置的存储接收器(例如 S3 或 GCS)快速一致地备份和恢复大型数据库。同样的功能，*但非分布式的*，将对所有用户免费开放。

第二个是地理分区，这是一种行级控制数据复制方式和位置的机制。地理分区允许单个逻辑数据库为地理上分散的客户提供低延迟访问，并实现对数据主权要求的遵从。

构建 CockroachDB 是两年多的心血，现在我们即将发布 1.0 版。我们认识到构建具有这些功能的新数据库所固有的挑战，并且我们正在努力确保我们能够继续开发 CockroachDB，只要在下一版本中有更好的产品发布。

在 HackerNews 论坛上分享你的想法。