# RESTful 的真正含义是什么

> 原文:[https://codewords . recurse . com/issues/five/what-restful-actually-means？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://codewords.recurse.com/issues/five/what-restful-actually-means?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)



如果你从事 web 开发，你可能听说过 REST。但是如果你像我一样，你通常只是假装知道那是什么，当有人问你你做的东西是否美味时，礼貌地点头。我使用 HTTP，呃，这意味着它是 RESTful 的，对吗？最近，我决定冒险一试，找出这个听起来平和的流行语到底是什么意思。

## 什么是休息？

REST 代表代表性状态转移。它是一组设计原则，用于使网络通信更具可伸缩性和灵活性。这些原则回答了许多问题。系统的组成部分是什么？他们之间应该如何沟通？我们如何确保可以随时更换系统的不同部分？该系统如何扩展以服务数十亿用户？

Roy T. Fielding 在 2000 年的博士论文 [*架构风格和基于网络的软件架构的设计*](https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm) 中首次提出了术语 REST。在论文发表的时候，万维网(或简称“网络”)已经非常流行了。菲尔丁实质上后退了一步，分析了使网络比竞争的互联网协议更成功的特征。然后，他设想了一个让网络交流“像网络一样”的设计框架所以 REST 是一套通用的原则，并不是专门针对 Web 的。它可以应用于其他类型的网络，如嵌入式系统。REST 也不是一个协议，因为它没有规定实现细节。

## 现场约束

Fielding 的论文概述了一个系统被认为是 RESTful 所必须满足的一些架构约束。下面，我将简要概述这些限制，并讨论 Web 如何使用其核心技术:HTTP、HTML 和 URIs 来满足这些限制。(如果你对 URI 不熟悉，就想想“网址”吧。有区别，但对我们的讨论并不重要。)下面我们来逐一看看守备约束。

### 客户端-服务器

第一个字段约束指定网络必须由客户机和服务器组成。服务器是拥有感兴趣的资源的计算机，而客户机是希望与存储在服务器上的资源进行交互的计算机。当您浏览互联网时，您的计算机就像客户端一样向服务器发送 HTTP 请求，以便访问和操作信息。RESTful 系统必须在客户机-服务器模型中运行，即使一个组件有时像客户机，有时像服务器。

客户端-服务器架构的非 RESTful 替代方案是基于事件的集成架构。在这个模型中，每个组件持续广播事件，同时监听来自其他组件的相关事件。没有一对一的交流，只有广播和窃听。REST 需要一对一的通信，所以基于事件的集成架构不是 RESTful 的。

### 无国籍的

无状态并不意味着服务器和客户机没有状态，它只是意味着它们不需要跟踪彼此的状态。当客户端不与服务器交互时，服务器不知道它的存在。服务器也不记录过去的请求。每个请求都被视为独立的。

### 统一界面

“统一接口”约束确保服务器和客户机之间有一种通用语言，允许在不破坏整个系统的情况下交换或修改每个部分。这是通过 4 个子约束来实现的:资源的识别、通过表示来操纵资源、自描述信息和超媒体。

#### **接口约束 1:资源标识**

“统一接口”的第一个子约束影响资源被识别的方式。在 REST 术语中，资源可以是任何东西 HTML 文档、图像、特定用户的信息等。每个资源必须由一个稳定的标识符唯一标识。一个“稳定的”标识符意味着它不会在交互中改变，即使资源的状态改变，它也不会改变。如果一个资源确实被移动到了另一个标识符，服务器应该给客户机一个响应，指出这个请求是错误的，并给它一个指向资源新位置的链接。

Web 使用 URI 来标识资源，并使用 HTTP 作为其通信标准。为了获取存储在服务器上的资源，客户端向标识该资源的 URI 发出 HTTP GET 请求。每当您在浏览器中键入一个地址时，您的浏览器都会向该 URI 发出一个 GET 请求。如果它收到一个 200 OK 响应和一个 HTML 文档，那么它会在窗口中呈现页面，以便您可以查看它。

#### **接口约束 2:通过表示操纵资源**

“统一接口”的第二个子约束表示客户机通过向服务器发送表示来操纵资源——通常是一个 JSON 对象，包含它想要添加、删除或修改的内容。在 REST 中，服务器完全控制资源，并负责做出任何更改。当客户端希望对资源进行更改时，它会向服务器发送一个表示，表示它希望得到的资源是什么样子。服务器将请求视为建议，但仍拥有最终控制权。

让我们考虑一下网络博客的例子。当用户发表新的博客文章时，他们的计算机想要告诉服务器需要添加新的博客文章。为此，它发送一个包含新博客文章内容的 HTTP POST 或 PUT 请求。服务器发回一个响应，指示帖子是否已创建，或者是否有问题。在一个非 REST 的世界中，客户端可能实际上正在发送操作指令，例如*添加一个新行*和*将博客的标题设为“RESTful 实际上意味着什么”*，而不是简单地发送它希望最终产品看起来像什么的表示。

#### **接口约束 3:自描述消息**

自描述消息是确保客户机和服务器之间统一接口的另一个约束。自描述性消息是包含收件人理解它所需的所有信息的消息。在单独的文档或另一条消息中不应有附加信息。

为了理解这如何应用于 Web，让我们分析一组 HTTP 请求和响应。

当用户在其 web 浏览器的地址栏中键入*http://www.example.com*时，浏览器发送以下 HTTP 请求:

```
GET / HTTP/1.1
Host: www.example.com 
```

这个消息是自描述的，因为它告诉服务器使用了什么 HTTP 方法，以及使用了什么协议(HTTP 1.1)。

服务器可能会发回这样的响应:

```
HTTP/1.1 200 OK
Content-Type: text/html

<!DOCTYPE html>
<html>
  <head>
    <title>Home Page</title>
  </head>
  </body>
    Hello World!
    <a href= “http://www.recurse.com”> Check out the Recurse Center! </a>
    <img src="awesome-pic.jpg">
  </body>
</html> 
```

该消息是自描述的，因为它通过指示`Content-type`是`text/html`来告诉客户端它需要如何解释消息体。客户机在这一条消息中就有了适当处理它所需的一切。

想象一下另一种通信方法，服务器在一个响应中发送二进制代码，然后发送一个单独的响应，告诉客户端如何解释二进制代码——无论是图像还是代码片段。如果两个响应不知何故没有按顺序到达，或者如果在它们之间插入了第三个响应，那么客户可能会对如何正确解释响应感到困惑。

最后一个接口约束是超媒体约束。超媒体是一个时髦的词，指的是从服务器发送到客户机的数据，它包含了客户机下一步可以做什么的信息——换句话说，它可以发出什么进一步的请求。在 REST 中，服务器应该只向客户机发送超媒体。

HTML 是一种超媒体。为了更好地理解这一点，让我们再次看看上面的服务器响应。

*   `<a href= “http://www.recurse.com”> Check out the Recurse Center! </a>`告诉客户端，如果用户点击链接，它应该向*http://www.recurse.com*发出 GET 请求。
*   `<img src="awesome-pic.jpg">`告诉客户端立即向*http://www.example.com/awesome-pic.jpg*发出 GET 请求，这样它就可以向用户显示图像。

* * *

当一个系统有每个资源的标识符，通过从客户机向服务器发送表示来操纵它们，并且有自描述的和由超媒体组成的消息时，就说它有一个统一的接口。这可能是 RESTful 系统最重要的属性，因为它允许客户端智能地适应变化。服务器可以改变底层的实现，而不会破坏与之交互的所有客户机，因为每个交互都是独立的，当底层状态或实现改变时，标识符不会改变，超媒体给客户机指示下一步可以进行的状态转换。服务器不需要记住客户机的任何信息，也不需要做任何特殊的事情来迎合客户机，反之亦然。

### 其他领域约束:缓存、分层系统和按需编码

还有三个字段约束，我们将在这里简要探讨。

**缓存**指的是服务器响应应该被标记为可缓存或不可缓存的约束。当客户端存储以前从服务器收到的响应时，就会发生缓存，这样，当再次需要该数据时，它可以通过使用缓存的数据来节省网络上的往返行程。“自描述消息”的接口约束使得缓存成为可能，因为客户端知道关于单个资源的所有相关数据都在一个响应中发送。它不必担心意外地只缓存了它需要的部分信息，而遗漏了其他部分。

**分层系统**指的是可以有比服务器和客户端更多的组件。这意味着系统中可以有多个层。但是，每个组件都被限制为只能看到下一层并与之交互。代理是一个附加组件，它将 HTTP 请求中继到服务器或其他代理。代理对于负载平衡和安全检查非常有用。代理对于发送请求的初始客户机来说就像服务器，然后在中继该请求时就像客户机。网关是另一个附加组件，它将 HTTP 请求转换为另一个协议，传播该请求，然后将收到的响应转换回 HTTP。客户端可以简单地将网关视为常规服务器。网关的一个用例是需要从 FTP 服务器下载文件的系统。

**按需编码**是唯一可选的约束，指的是服务器向客户端发送可执行代码的能力。这就是 HTML 的`<script>`标签中发生的事情。当加载 HTML 文档时，浏览器自动从服务器获取 JavaScript 并在本地执行。

* * *

总之，RESTful 系统是满足现场约束的任何网络。RESTful 系统对于不同的用例应该是灵活的，可伸缩的以适应大量的用户和组件，并且随着时间的推移是可适应的。我们探索了当涉及到浏览器和人类用户的交互时，万维网是如何 RESTful 的。为机器对机器的交互设计 RESTful Web APIs 是一个复杂得多的主题；有关更多信息，请参见下面列出的参考资料。请记住，REST 是一个理论设计，我们今天拥有的网络在某些情况下仍然存在不足。

下一次，你不必再假装知道 RESTful 的真正含义。

## 进一步阅读

