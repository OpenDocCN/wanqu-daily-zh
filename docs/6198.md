# 构建 Lyft 的营销自动化平台| Ajay Sampat | Lyft 工程

> 原文:[https://eng . lyft . com/lyft-marketing-automation-b 43 b 7 b 7537 cc？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://eng.lyft.com/lyft-marketing-automation-b43b7b7537cc?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

# 构建 Lyft 的营销自动化平台



我们以用世界上最好的交通工具改善人们生活的使命而自豪。在美国和加拿大，每个月都有超过 5000 万次碳中性的 Lyft 骑行，而我们对拼车的潜力还只是皮毛。

我们增长的一部分是我们收购流程的改进，如发起针对特定地区的广告活动，以提高知名度，并考虑我们的多模式产品。协调这些活动以大规模获取新用户变得非常耗时，这让我们不得不接受自动化的挑战。

# 增长收购

收购通常由数据驱动的跨职能团队领导，该团队关注规模、可测量性和可预测性。你可能见过 Lyft 这样的广告:



通过左侧列出的各种渠道，收购在入职漏斗的顶部和最大部分运作。没有两个渠道是平等的:我们与不同的合作伙伴、技术和战略合作，以确保 Lyft 是消费者的首选。Lyft 的其他团队专注于用户旅程的不同部分，以提供世界级的体验。下面显示了一个高级视图。



# 动机

大规模获取用户意味着 Lyft 运营的每个地区每天都要做出数千个决定:选择出价、预算、创意、激励措施和受众；运行测试；还有更多。仅仅是跟上这些重复的任务就占据了大量营销人员的注意力，并可能导致次优的决策。这对企业来说成本很高，而且无法扩展。



通过自动化日常决策，我们可以有效地扩展并创建一个数据驱动的学习系统。这也让营销人员专注于创新和实验，而不是经营活动。

# 自动化之路

我们的目标是:建立一个营销自动化平台，以提高成本和产量效率，同时使我们的营销团队能够运行更复杂、影响更大的实验。

要求:

1.  能够预测新用户使用我们产品的可能性。
2.  在不同的内部和外部渠道中分配营销预算的衡量机制。
3.  在数以千计的广告活动中部署这些预算的杠杆。

营销业绩[数据](/amundsen-lyfts-data-discovery-metadata-engine-62d27254fbb9)有助于反馈循环，不断滋养强化学习系统。

以下是我们需要自动化的问题示例:

*   在数千个搜索关键词中更新竞价。
*   关闭表现不佳的显示创意。
*   根据市场改变推荐值。
*   识别高价值用户群。
*   在各种活动中分享不同策略的经验。

因此，我们创建了 Symphony——一个编排系统，它采用业务目标，预测未来的用户价值，分配预算，并发布预算以推动新用户使用 Lyft。

# 体系结构

Symphony 架构由三个主要组件组成:生命周期价值(LTV)预测器、预算分配器和投标人。





我们的技术堆栈包括 Apache Hive、Presto、内部机器学习(ML)平台、 [Airflow](/running-apache-airflow-at-lyft-6e53bb8fccff) 和第三方 API。一个轻型前端馈入业务目标并启动创意。该体系结构有许多可移动的部分和依赖项，需要严格的日志记录和监控。我们深入研究下面的每个组件。

# 终身价值(LTV)预测者

了解用户的潜在价值对每个企业都至关重要。该组件的目标是根据来自各种获取渠道的用户价值来衡量这些渠道的效率。然后，可以根据来自给定渠道的用户的预期价值以及我们愿意在特定地区为这些类型的用户支付的价格来分配预算。



上图从较高的层面描述了我们如何计算用户的预期 LTV，同时考虑双向市场中的供应和需求。我们尽力准确预测 LTV，因为它有助于我们制定中长期战略目标。



在用户生命周期的早期，很难了解他们的留存、乘车或交易价值，因此我们没有尝试直接测量 LTV，而是根据历史数据进行预测。随着用户与我们的服务进行互动，预测会有所改善。



这里的基准代表一群用户的平均预期 LTV。这些预测反馈给预算分配器，帮助它决定来自一组特定活动的用户的价值。

# 预算分配器

预算分配器结合 LTV 预测收集营销业绩数据。预算分配是使用马尔可夫链蒙特卡罗(汤普森抽样)完成的。假设 *a* & *b* 来自具有其自身参数的分布(例如 *a* 来自具有平均值μa 和标准偏差 **𝜎** a 的分布)，则形式为 *LTV = a * (spend)^b* 的曲线符合数据。这里有一个窍门——我们不像在标准回归中那样试图直接估计 *a* & *b* 。而是估计它们分布的参数:( **μ** a， **𝜎** a) & ( **μ** b， **𝜎** b)。因此，我们不是用固定的 *a* & *b* 来绘制曲线，而是每天从这些分布中抽取不同的估计值*a*&*b*——这自然给我们的成本曲线创建过程注入了一定程度的随机性。



这种类型的随机搜索似乎是浪费，但从长远来看，适度的探索实际上是最佳的。它帮助我们探索曲线上的点，我们通常不会考虑收敛到全局最优。

预算分配器将每个活动的分配发送给各自的渠道投标人进行部署。

# 投标人

投标人发布以目标价格点投放广告所需的最终更改。竞标者由两部分组成——调音师和演员。调谐器根据可用的杠杆(如关键字、标题、价值、谷歌搜索的投标类型)决定如何部署资本，同时也考虑特定渠道的背景。参与者通过 API 集成将实际出价传达给内部和外部渠道，如工作公告板、搜索、展示、社交和推荐。

多年来，我们与合作伙伴建立了良好的关系，他们帮助我们的产品面向正确的受众。每个通道基于其复杂程度，支持不同的投标策略。下面列出了一些流行的策略。



我们不断尝试用正确的策略设定每个活动的出价，并在不断变化的数字媒体环境中更新节奏。

投标人包含许多特定于渠道的细微差别，有助于他们做出最佳决策。竞标者还考虑了一定程度的近期权重和季节性，以应对市场波动。

# 结论

Lyft 营销自动化的长期成功取决于将人类反馈纳入我们的机器学习平台。这通常被称为“人在回路中”的机器学习，使机器能够处理自动化范围的问题，同时使人类操作员能够专注于知识相关的问题。没有来自驱动自动化引擎的人的好的输入，模型的质量将受到影响(“垃圾进，垃圾出”)。

没有手动更新出价或分配预算的认知开销，我们希望我们的营销团队能够更灵活地将受众和创造性的变化应用到营销活动中。他们有更多的时间和精力来:

*   了解我们的用户和他们的兴趣
*   构思新的广告形式、信息和渠道
*   为目标上的大人物形成假设

对于 Symphony 的持续迭代，我们有许多令人兴奋的想法:

*   永不停止的实验
*   融入季节效应，如天气和时间
*   为我们的投标人提供更好的市场环境
*   智能细分和个性化

借助 Symphony，我们在节省营销人员时间的同时，实现了更高的投资回报。该系统为超过 3000 万名骑手和近 200 万名司机的不断增长的生态系统提供动力(基于 2018 年的数据)。营销自动化在 Lyft 仍处于初级阶段，虽然这些方法迄今为止已经帮助我们扩大了规模，但随着我们的成长，我们将继续学习和改进。我们为我们光明的机器学习和实验驱动的未来感到兴奋。

# 承认

非常感谢团队——[亚历克斯·阿门塔](https://www.linkedin.com/in/alexcarmenta)、[贾里德·鲍曼](https://www.linkedin.com/in/jared-bauman-17928922)、[威廉·博尔赫斯](https://www.linkedin.com/in/alkanwilliamborges)、[安娜·坎帕内利](https://www.linkedin.com/in/annacampanelli)、曹东伟[卡罗琳·康威](https://www.linkedin.com/in/carolynjonesconway)、[伊斯梅尔·科斯库纳](https://www.linkedin.com/in/ismailcoskuner/)、[彼得罗斯·达威特](https://www.linkedin.com/in/petros-dawit)、[贾里德·加博尔](https://www.linkedin.com/in/jaredgabor/)、[朗菲何](https://www.linkedin.com/in/langfei-he-4694334)、[罗伯特·b·卡斯帕](https://www.linkedin.com/in/robertkaspar/)

成长团队正在积极寻找有才华、有动力的工程师、数据工程师、科学家、产品经理和营销人员加入我们的团队。了解 Lyft 的[生活，并访问职业版块了解最新的职位空缺。](https://www.lyft.com/careers/life-at-lyft)





















