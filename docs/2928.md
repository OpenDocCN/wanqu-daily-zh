# 6 个月的错误(也是为什么我从不缩写变量名)——beehollander

> 原文:[https://beehollander . WordPress . com/2016/07/08/the-6 month-bug-and-why-I-will-never-abbreviate-variable-names/？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://beehollander.wordpress.com/2016/07/08/the-6-month-bug-and-why-i-will-never-abbreviate-variable-names/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

我曾在美国一家著名的国防承包商工作。我很高兴我做到了，因为这一直是我的梦想，但我也很高兴我有机会继续前进。我学到了很多东西，遇到了很多优秀的人，只要我活着，我永远不会缩写另一个变量。

我参与了一项关于隐形飞机和为其制造的雷达接收器的合同。"为什么隐形飞机需要雷达接收器？"你问？嗯，两个原因。这些接收器是定制的，能够接收和识别敌人系统发射的雷达脉冲的地理位置和国籍。首先，知道敌人的雷达在哪里，从地理上来说，有助于你不意外地飞过他们的头顶(如果你的影子正好飞过敌人的空军基地，雷达隐形有什么用？).第二，它给你情报来分析敌人在哪里找你(如果有一个山顶上的俄罗斯 SAM 站点上个月不在那里，你就知道可能出事了)。

在测试实验室中有一个接收器，你通常会看到 20-30 磅精美的航空级铝，填充 10-20 个定制的电子卡，运行价值 50-100 万美元的软件。移动它很容易，我处理过的大多数都是在实验室里，因为空军与它们之间的某种问题。99.9%的这些问题本质上都是电子问题，因此我们必须能够欺骗这个盒子，让它认为自己正在空中飞行，并接收来自敌方网站的雷达脉冲。测试设备和软件在购买时可能是最先进的，但根据合同，在测试系统获得批准后将保持不变。然而，由于它们是在 90 年代初批准的，人们只能想象 20 年后我们必须处理的文物。古老的 CPU 以 MHz 为单位，操作系统许可证比我还老，软件的用户友好程度就像冬眠的熊一样。我工作的一部分是执行新的合同，合同中要求我们将所有东西升级到现代化的测试设备和运行设备的新软件。然后好戏开始了。

这个巨大的任务有很多层，我必须处理的一层是在同一个接收器上运行旧测试和新测试，检查任何差异，找到软件根本原因，并纠正错误。事情进行得相当缓慢但稳定，因为有许多小问题需要解决，但没有一个问题像 SlowPOP 一样留在我的记忆中。缓慢上升时间脉冲对脉冲，又名 SlowPOP，是一种测试，以确保当上升/下降时间与正常情况相比非常缓慢时，当接收到两个雷达脉冲相互重叠时，接收器可以正常工作。确切的细节不仅令人厌烦，而且是机密的，所以可以说，结果看起来不太对。输入参数已被调整，因此测试通过了…差不多吧…但是看起来还是不太对，而且调整后的参数和原始参数不太接近，让我感觉不舒服。

我重启了。我重新校准了。我重装了。我跑啊跑啊跑。我问道。我问道。我要求的。我提问。我猜测。
在过去的几个月里，我们运送了其他可交付产品。
有趣的是，每次我问起 WaveGenAPI，每个人都说“这不可能是错的，80%的其他测试都在使用它，而且它已经完美了一年多。”
最后，在每隔一块石头转了一圈后，我知道必须检查 WaveGenAPI。

当我调查 WaveGenAPI 背后的代码时，经过几天的挖掘，我有了第一个怀疑对象。有一句台词好像不对。它添加了一堆术语，其中一个似乎不正确。我把 WaveGenAPI 的作者带到了实验室，和我坐在一起，一起看结果，他是我非常尊敬的人，有着 26 年的经验。他默默地盯着它看了将近半个小时，只问了一些零星的问题，包括基本的检查和可能性。然后他最后只是说了句“接得好”,我们握了握手，他就走开了。

问题是:一个文件。一行。一个学期。一个变量。一封信。

这位高级程序员是在变量名空间有限的时代接受培训的，所以他的典型做法是对长度不超过 8 个字符的所有内容使用变量名。在这种情况下，讨论中的变量代表脉冲“下降沿高度的百分之十的时间”。这个词应该是“Ttpfe”，但他错误地称之为“Ttpre”，这是一个真正的“上升边缘”对应词。这个术语应该已经存在，这就是为什么打字错误没有标记出“未定义”的错误。此外，除了 SlowPOP 之外，所有测试的误差时间差可能小于一皮秒。找到并修复这个错误是大约 6 个月工作的高潮，也是迄今为止我职业生涯中最满意的 bug 发现。现在，SlowPOP 将永远是完美的，而不仅仅是足够接近。

这就是为什么只要我活着，我就不会缩写我的变量名。

TL；博士，花了 6 个月的工作才发现一个错误的字母，一个比我多 26 年经验的工程师写的错别字。

### 像这样:

像 装...

### *相关*