# 多重云是个陷阱——勇敢的新极客

> 原文:[https://bravenewgeek.com/multi-cloud-is-a-trap/?UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://bravenewgeek.com/multi-cloud-is-a-trap/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

它出现在 *很多* 与客户的交谈中。我们想成为云不可知者。我们需要避免供应商锁定。我们希望能够在云提供商之间无缝转移工作负载。我再说一遍: *多云是陷阱* 。除了安抚一些可能对亚马逊数据中心运行的东西不太感兴趣的主要零售商之外，我想不出多少理由来说明为什么对于任何 *规模的组织来说，多云应该是优先选择。*

多云战略在理论上看起来很棒，但它会产生不必要的约束，导致徒劳无功。对大多数人来说，它最终会分散注意力，制造更多的问题，花费更多的钱。我将对这一说法稍加说明，因为这是一个大胆的总括声明，但请耐心听我说。现在，只要知道当我说“多种云”时，我指的是跨供应商运行相同的服务或设计应用程序，使它们能够毫不费力地在供应商之间移动。我是 *而不是* 谈到利用每个云提供商的最佳部分或跨供应商使用更高级别的增值服务的概念。

多重云的出现有很多原因，但大体上可以归纳为以下几点:灾难恢复(DR)、供应商锁定和定价。我将逐一讨论这些问题，然后讨论多云技术究竟在哪里发挥作用。

### 灾难恢复

多方云被作为实施灾难恢复的一种手段。在讨论灾难恢复时，清楚了解云提供商的工作方式非常重要。像 AWS、GCP 和 Azure 这样的公共云提供商有一个区域和可用性区域的概念(注意，Azure 最近才在选定的区域推出了可用性区域[](https://azure.microsoft.com/en-us/updates/azure-availability-zones-ga/)，他们已经艰难地了解到这是一个 [好主意](https://www.datacenterknowledge.com/microsoft/azure-outage-proves-hard-way-availability-zones-are-good-idea) )。 *区域* 是特定地理区域内数据中心的集合。一个 *可用区* (AZ)是一个区域内的一个或多个数据中心。每个 AZ 通过专用的网络连接和电源备份进行隔离，区域内的 AZ 通过低延迟链路进行连接。AZs 可能位于同一栋建筑中(具有独立的计算、电源、冷却等)。)或完全分离，可能相隔数百英里。

整个地区的停电是极不寻常的。当它们发生时，这是一个引人注目的事件，因为这通常意味着一半的互联网被破坏。由于 az 本身在一定程度上是地理上孤立的，一场自然灾害摧毁整个地区基本上相当于一颗陨石摧毁了弗吉尼亚州。区域故障更常见的原因是配置错误和其他操作员错误。而难得的是，他们 [做](https://aws.amazon.com/message/41926/) [发生](https://aws.amazon.com/message/680587/) 。但是，区域是高度隔离的，提供商在交错的窗口中对它们执行维护，以避免多区域故障。

这并不是说多区域的故障是不可能的(就像一块陨石毁灭了半个美国大陆或者一些奇怪的连锁故障一样)。一些骨干基础设施服务可能会跨地区，这可能会导致[](https://status.cloud.google.com/incident/cloud-networking/18012)更大规模的事件。但是，虽然在多个云提供商中存在显然比在单个提供商中的多区域策略更安全，但这也有很大的成本。灾难恢复是一个令人难以置信的微妙话题，我认为它没有得到应有的重视，我认为云可移植性在实践中对最小化这些成本没有什么作用。您不需要成为多云来拥有强大的灾难恢复策略，除非，或许，您正在以 Google 或 Amazon 的规模运营。毕竟，Amazon.com 是世界上最大的零售商之一，所以如果你的灾难恢复策略能够与他们的相匹配，你的情况可能会非常好。

### 供应商锁定

供应商锁定以及相关的恐惧、不确定性和疑虑是另一个经常被提及的采用云计算战略的原因。情郎看中了这一点 [停止浪费你的啤酒钱](https://blog.realkinetic.com/stop-wasting-your-beer-money-12c3fe5e4d54) :

> 云。DevOps。无服务器。这些都是为了将共同需求商品化而产生的运动和市场。它们可能不是完美的解决方案。是的，你最终可能会“被锁在里面”但我相信这是值得冒的风险。没有听起来那么糟糕。蒂姆·奥莱利有一句话总结了这一点:
> 
> “锁定”是因为其他人依赖于你的服务，而不是因为你完全控制了一切。
> 
> 我们被锁定是因为我们受益于这项服务。首先，这意味着我们正在利用这项服务的全部价值。而且，作为一个消费者群体，我们拥有比我们意识到的更多的影响力。这些提供商将会做必要的事情来继续提供我们从中受益的价值。这是推动他们收入的原因。正如 O'Reilly 指出的那样，提供商实际上拥有的控制权比你想象的要少。他们将建立一个他们认为对其市场最大部分有利的系统。他们将关注我们作为市场参与者所重视的东西。
> 
> 竞争是杠杆的另一个关键部分。尽管像 AWS 这样的提供商很强大，但还有很多竞争对手。虽然竞争对手试图提供差异化的解决方案来填补他们认为的市场空白，但他们也需要满足基本需求。这就是为什么我们在这些提供商中看到如此多的公共服务。这都是为了我们的利益。我们应该利用提供给我们的这个杠杆。是的，从一个提供商转移到另一个提供商仍然会有成本，但我相信这些成本实际上比从本地转移到云的成本要低得多。一旦你真正上了云，你就获得了敏捷性。

我所看到的公司为避免供应商锁定而经历的精神体操和对多云的“理由”总是让我震惊。令人困惑的是，公司愿意花大量的钱在那些无论如何都不会让他们与众不同的事情上，事实上，这迫使他们将资源从与业务不同的事情上转移。

我认为这有几个原因。首先，正如 Beau 指出的，我们倾向于高估自己的能力，低估自己的成本。这导致我们错误地估计了构建还是购买的决策。这也与 [宜家效应](https://en.wikipedia.org/wiki/IKEA_effect) 密切相关，在这种效应中，消费者对他们部分创造的产品赋予了不成比例的高价值。第二，随着组织中的权力和影响力已经从 it 转移到业务部门，特别是随着 [产品思维](https://svpg.com/product-vs-it-mindset/)——这给我的印象是 IT 运营部门试图 [保持控制和相关性](https://vimeo.com/159168637) 。

不可知的云不应该是驱动关键决策的足够重要的目标。如果这是你的起点，你就严重限制了你充分获得云优势的能力。你只是租用计算机。像 Pivotal Cloud Foundry 和 Red Hat OpenShift 这样的平台宣传能够在每一个主要的私有云和公共云上运行，但是这样做——根据定义——需要一个抽象层来抽象每个云平台的所有差异化功能。当你抽象掉区分特征以避免锁定时，你也抽象掉了 *值* 。您最终会被供应商“锁定”，这基本上意味着您没有利用服务的全部价值。要么抽象将事物简化为一个公共接口，要么不是。如果是这样，还不清楚它如何利用差异化的提供商功能并保持云不可知。如果不是这样，就不清楚它的价值是什么，也不知道如何才能真正实现云计算。

不要太挑剔 PCF 或 Red Hat，但随着主要云提供商继续 [拆分自己的平台，并以更民主化的方式重新捆绑](https://bravenewgeek.com/there-and-back-again-why-paas-is-passe-and-why-its-not/) ，这些多云平台的价值主张开始减弱。在前 Kubernetes 和容器时代——也就是平台即服务(PaaS)的全盛时期——有一个引人注目的故事。现在，随着容器、Kubernetes 的流行，特别是像谷歌的[【GKE】](https://cloud.google.com/kubernetes-engine/)和 [GKE 本地](https://cloud.google.com/gke-on-prem/) (以及其他提供商的同类产品)，这个故事变得越来越难以讲述。有趣的是，最近宣布的[Knative](https://cloud.google.com/knative/)是与 Pivotal 和 Red Hat 等公司密切合作构建的，这似乎是一部利用 Kubernetes 的势头从企业采用无服务器计算中获取一些价值的戏剧。

但是需要有人将这些云平台作为服务来运行，这就是问题所在。这一职责通常由运营或共享服务团队承担，他们现在需要在多个云中运行 it，并且可能与供应商签订服务合同。

多云部署需要多种云平台的专业知识。PaaS 可能会从开发人员那里抽象出来，但是会推给运营人员。我们甚至还没有深入了解认证多个平台的安全性和法规遵从性的含义。对于一些现在正在寻求迁移到云的公司来说，这将严重破坏事情的发展。一旦我们超越了空灵的营销语言，我们就真正进入了多云意味着什么的毛骨悚然的细节。

如今，运行不受管理的 PaaS 的空间越来越少您。这对任何企业都没有战略意义。我还想指出，像 Pivotal 和 Red Hat 这样的公司的收入很大程度上是由服务驱动的。这些平台充当了 [拉动专业服务收入](https://www.sec.gov/Archives/edgar/data/1574135/000104746918002061/a2234898zs-1.htm#dn42701_selected_consolidated_financial_data) 的方式。

一般来说， *非战略性* 系统的厂商锁定给企业带来的风险较低。例如，数据库存储数据。无论是 Amazon DynamoDB、Google Cloud Datastore 还是 Azure Cosmos DB——可能存在技术差异，如 NoSQL、关系、ANSI 兼容的 SQL、专有等等——从根本上说，它们只是将数据放入和取出。在它们之间移动可能涉及到工程上的努力，但这并不是不可克服的，而且我们使用它们所获得的好处往往远远超过这一成本。当依赖核心 *战略* 系统时，供应商锁定会成为一个问题。这些可能是执行实际业务逻辑的系统，或者是公司业务的关键促成因素。正如 [Joel Spolsky 所说的](https://www.joelonsoftware.com/2001/10/14/in-defense-of-not-invented-here-syndrome/) ，“如果是核心业务功能——自己做，不管怎样。选择你的核心业务能力和目标，并在内部完成。”

### 定价

价格竞争力可能是云计算最弱的论据。事实是，随着他们越来越商品化，所有供应商都在竞相降低成本。在供应商之间，你最终会在一些领域花费更多，而在另一些领域花费更少。 [多云价格套利](https://thenewstack.io/why-enterprises-are-adopting-a-multicloud-strategy/) 不是一个东西，它只是人们假装是一个东西的东西。其一，是 *胡乱* 不切实际。另一方面，它没有考虑到批量折扣。正如我在我的[AWS 和 GCP](https://bravenewgeek.com/gcp-and-aws-whats-the-difference/) 的比较中提到的，这实际上更多地归结于 *由于他们不同的理念，当你选择云提供商时，你想在哪里投入资源。*

根据 Beau 之前的观点，定价的锁定角度，即供应商锁定你，然后抬高价格，是没有意义的。首先，这不是规模经济的运作方式。一旦你在云中，从一个提供商转移到另一个提供商的成本比你在本地时要低得多，所以这根本不符合提供商的最佳利益。他们将采取必要措施来占领最大的市场份额，竞争力量将推动基础设施即服务(IaaS)成本下降。由于竞争环境和获取市场份额的愿望，定价可能会趋同。对于云提供商来说，要想增加利润，他们需要进一步向软件即服务(SaaS)和增值服务的方向发展。

此外，大多数公共云提供商提供批量折扣。例如，AWS 为 EC2 提供[](https://aws.amazon.com/ec2/pricing/reserved-instances/)的预订实例，折扣高达 75%。其他 AWS 服务也有批量折扣，亚马逊使用 [合并计费](https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/useconsolidatedbilling-discounts.html) 来合并一个组织中所有帐户的使用量，以便在可能的情况下为您提供更低的整体价格。GCP 提供 [持续使用折扣](https://cloud.google.com/compute/docs/sustained-use-discounts) ，这是在计费月份的大部分时间运行 GCE 实例时自动应用的折扣。他们还实现了他们所谓的 [推断实例](https://cloud.google.com/compute/docs/sustained-use-discounts#inferred_inst) ，即将部分实例使用打包到一个实例中，以防止您在替换实例时失去折扣。最后，GCP 同样有一个相当于亚马逊的保留实例叫做[](https://cloud.google.com/compute/docs/instances/signing-up-committed-use-discounts)。如果资源分布在多个云提供商之间，就更难获得这些折扣。

### 多重云的意义

我说过我会声明我的要求，这就是。是的，对于大多数组织来说，多云可能是一种干扰，通常 *是* 。如果你是一家刚刚开始考虑云计算的公司，那么它除了让你偏离真正重要的事情之外，没有任何作用。它会让事情慢下来，播下 FUD 的种子。

一些公司试图同时与多家供应商合作，试图对冲全部投资于一家供应商的风险。我认为这是适得其反的，实际上 *增加了* 不成功的风险。对于较小的商店，选择一个供应商，集中精力生产它。尽可能利用托管服务，不要以使用云计算为由拒绝。对于较大的公司来说，在多个供应商上进行扩建并不是不合理的，但是应该通过受控实验来完成。这是云的优势之一，我们可以进行有限的投资和试验，而无需大量的前期支出，请注意多云 PaaS 产品和服务合同。

但是不，这并不意味着多云没有一席之地。事情从来没有那么简单。对于拥有多个业务部门的大型企业来说，多云化是一种必然。这可能是不同成熟度级别的产品团队、公司 IT 基础设施以及合并和收购的结果。多重云的主要价值，我认为也是为数不多的理由之一，是在有意义的地方利用每种云的优势。这又回到了在堆栈中向上移动的提供者。随着他们试图通过增值服务实现差异化，多重云开始变得更有意义。其次，由于数据主权的原因，可能是多云的一个例子，但我认为这越来越不需要考虑地区和可用性区域的流行。然而，一些服务，如 Google 的 Cloud Spanner，可能会因为是“全球可用”的服务而放弃 AZ 粒度，所以在处理像 GDPR 这样的法规时，这是需要注意的。最后，对于拥有主机托管设施的企业来说，混合云将永远是现实，尽管当将这些设施扩展到多个云提供商时会变得复杂。

如果你刚刚开始尝试云计算，那么你不应该首先考虑多云计算战略。It *绝对* 不应该是你的指导目标，也不应该是驱动核心决策或业务战略项目的东西。它有一个时间和地点，但除此之外，它只是一个傻瓜的差事——从真正重要的事情上转移注意力。

### *相关*