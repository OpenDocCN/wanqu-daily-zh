# 魔兽争霸的制作第一部分-荣誉守则

> 原文：<https://www.codeofhonor.com/blog/the-making-of-warcraft-part-1?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

回到时间的黎明之前，也就是说当电脑游戏是为 DOS 操作系统编写的时候，我开始开发一个叫魔兽争霸的游戏。

## 我要领导一个项目！

虽然我为超级任天堂和世嘉创世纪开发了几个 PC 游戏、几个 Mac 游戏和七个主机游戏，但我要么在这些项目中担任初级角色，要么这些项目是游戏“端口”而不是原始开发工作。游戏“移植”是将游戏从一个平台(如 Amiga)转移到另一个平台(如任天堂)并转换代码、设计、插图和其他游戏资产的过程。

我的角色包括两份工作:作为制作人领导开发团队——这是游戏行业对项目经理、设计师、传道者和猫牧人的称呼——以及作为首席程序员编写大部分游戏代码。这在当时可能不那么令人生畏，当时一个游戏项目可能会雇用 10 或 20 名开发人员，而现在，开发团队拥有 200 或更多开发人员。

## 魔兽的来源

我工作的那家初创公司的开发人员——当时名为 Silicon & Synapse，但后来更名为 Blizzard，以示对我们暴风骤雨式开发方法的认可——在空闲时间玩了很多游戏。从玩游戏中产生了创作魔兽的灵感。

我们是在玩了(一遍又一遍地)一款由韦斯特伍德工作室开发的名为《沙丘 2》的游戏后，受到了创作《魔兽争霸》的启发。《沙丘 2》可以说是第一款现代即时战略(RTS)游戏；一个滚动的世界地图，实时单位建设和移动，和个人单位战斗。除了一定的规模和图像质量，它在设计上和现代的 RTS 如星际争霸 2 没有太大的不同。

它的前身《沙丘 1》——一款非常有价值的游戏——分享了一些相同的元素，但它的半实时单位战斗被包装在一款冒险游戏中。《沙丘 2》摒弃了前辈们认为玩家代表游戏世界中的一个角色的想法，而是专注于现代 RTS 机制:收获资源、建立基地、收获更多资源、建立军队，最后找到并征服敌人。

我和暴雪的其他人一起在午休时间和下班后玩起了沙丘 2，玩了三场比赛中的每一场来确定他们的优势和劣势；然后和办公室里的其他人比较比赛风格、战略和战术。

虽然这个游戏非常有趣，但它有几个明显的缺陷，需要修复。最值得注意的是，我和我的朋友们玩这个游戏的唯一方式是对着电脑。很明显，这种游戏风格非常适合多人游戏。与回合制游戏不同，在回合制游戏中，每个玩家必须等待所有对手发出单位移动命令，实时游戏可以让所有玩家同时发出命令，这种游戏注重快速、果断的战术移动，而不是漫长的战略规划。

带着这个单一的目标，游戏的开发开始了，却没有任何认真的努力去计划游戏设计，评估技术需求，建立时间表，或者为所需的人员做预算。餐巾上也没有。回到暴雪，我们称之为“每日商业计划”，也就是标准操作方法。

## 初始发展

作为这个项目的唯一开发者，并且在最初阶段缺乏一个艺术团队，我截屏了《沙丘 2》的艺术作品，直到我的前进进度保证有一两个艺术家为止。艺术家们忙于其他许多紧迫的截止日期，此时不需要分心——我们总是时间紧迫。

我开发游戏引擎的早期编程工作包括创建基于图块的滚动地图渲染器、绘制游戏单元和其他位图的 sprite 渲染器、制作游戏单元动画的 sprite 排序引擎、发布鼠标和键盘事件的事件调度程序、控制单元行为的游戏调度程序以及控制应用程序行为的大量用户界面代码。随着项目的这一部分在最初几周完成，开始有可能“玩”一个单人游戏，尽管我直到后来才实现单元构造；早期游戏需要使用输入的命令在屏幕上产生单位。

每天我都以有机的方式建立在先前的努力之上。在没有时间表里程碑或项目外部驱动的情况下，我处于选择下一步构建哪些功能的令人羡慕的位置，这让我非常有动力。我已经喜欢上了游戏开发，开始做这种绿色领域的编程就像毒品一样。即使是现在，在进入游戏行业大约 22 年后，我仍然热爱编程的创造性。

## 第一个独特的功能:多单位选择

我特别自豪的一个特点是单元选择。与沙丘 2 不同，它只允许用户一次选择一个单位，并且需要疯狂地点击鼠标来启动联合单位战术战斗，很明显，让玩家选择多个单位将加快特遣部队的部署，并极大地改善游戏战斗。

在我开始从事游戏行业之前，我曾与几个低端的“计算机辅助设计”(CAD)程序广泛合作，如 MacDraw 和 MacDraft，为我父亲的酒窖业务设计酒窖，因此使用“点击并拖动”矩形选择隐喻来聚集一组单位进行指挥似乎是很自然的。

我相信魔兽争霸是第一个使用这种用户界面隐喻的游戏。当我第一次实现这个特性时，可以一次选择和控制大量的单元；可以选择的单位数量没有上限。

虽然一次选择和控制 100 个单位在我实现的简单寻路算法中表现出可怕的弱点，但在我让基本算法工作后，我仍然花了几个小时选择单位并将游戏单位分派到地图周围的目的地，而不是编写更多的代码；到那时为止，这是我在编程生涯中创造的最酷的特性！

在开发过程的后期，经过团队成员之间的多次设计争论，我们决定允许玩家一次只能选择四个单位，这是基于这样一种想法，即用户需要关注他们的战术部署，而不是简单地聚集一群暴徒，然后立刻将他们投入战斗。我们后来在魔兽争霸 2 中把这个数字增加到了 9。《命令与征服》是《沙丘 2》的精神继承者，它对可供选择的单位数量没有任何上限。当然，值得再写一篇文章来讨论设计的分支。

除了能够同时控制多个单位之外，在这个阶段,《魔兽争霸》一点也不像《沙丘 2》的精简版，以至于我开玩笑说，虽然《魔兽争霸》的确受到了《沙丘 2》的启发，但这个游戏完全不同——我们的雷达小地图在屏幕的左上角，而他们的在右下角。

## 团契的形成

到 1994 年初，我已经取得了足够的进展，可以在这个项目上获得额外的帮助。罗恩·米勒、萨姆·迪迪埃、斯图·罗斯、鲍勃·费奇、杰西·麦克雷诺兹、麦克·默尔海姆、米基·尼尔森和其他人也加入了我的行列。在我们公司于 1994 年 2 月被 Davidson & Associates 收购后，许多人开始从事这款游戏的开发工作。

罗恩·米勒留着金色长发，体格健壮，显然是维京勇士的后代。他最初是作为一名艺术家被聘用的，因为他在 Virgin Games 为 Gameboy 游戏创作美术作品的技能，但他惊人的创造力和设计敏感性导致他在许多暴雪项目中担任设计角色，他在魔兽争霸中担任了类似的角色。

山姆·迪迪埃是一个强壮、敦实、伟岸的角色，他一点也不像一只缩小到人类比例的熊，他的英雄角色和史诗般的绘画现在是暴雪游戏的*权威艺术风格，他在 16 位主机游戏上磨练了他的计算机绘图技能，但他在会议期间和任何其他空闲时间绘制幻想艺术作品的爱好证明了他有能力领导这个新游戏的艺术方向。*

斯图·罗斯是一名插画师，他的背景使他设计了沿用至今的暴雪标志，最初他参与了背景磁贴地图的设计，但后来他在《魔兽世界》的最终设计中扮演了重要角色。斯图是一个令人难忘的配音演员，他在《人类的农民》中扮演一个受压迫的野蛮劳动者，是一个喜剧天才。

在我开始开发魔兽争霸的同时，Bob Fitch 已经开始了另一个项目的程序员和项目负责人的工作。暴雪公司的总裁阿伦·亚德翰给鲍勃布置了一项任务，制作一个名为“人们玩的游戏”的文字游戏，包括纵横字谜、争夺、拼字游戏和其他类似的娱乐活动。Bob 对这个项目明显缺乏热情，这导致他在这个标题上几个月都没有什么进展；随着魔兽争霸表现良好，鲍勃被释放来协助我，他对游戏的热情帮助项目更快地向前推进。

杰西是加州理工学院的毕业生，他开始为 IPX 网络协议开发网络驱动程序，这样游戏就可以在局域网上玩了。暴雪的两位创始人之一，麦克·默尔海姆，后来承担了一项更加困难的任务，编写一个“混合模式”的调制解调器驱动程序。虽然魔兽争霸是一个 DOS“保护模式”游戏，但由于 DOS 操作系统及其运行的 80386 芯片架构的古怪，调制解调器驱动程序可以从保护模式和实模式调用，因此经常可以发现他在办公室盯着满是诊断号的屏幕，处理与可重入代码相关的复杂计时问题。最终，现代代码坚如磐石，考虑到我们当时拥有的原始工具集，这是一个相当大的成就。

## 魔兽艺术

阿伦·亚德翰希望获得战锤世界的许可，试图通过品牌认知度来增加销量。战锤是魔兽艺术风格的巨大灵感，但各种因素的结合，包括商业条款缺乏吸引力，以及开发团队中几乎每个人(包括我自己)都渴望控制我们自己的世界，这使得任何交易的可能性都变得渺茫。我们已经有过与 DC 漫画公司合作制作《超人的死亡与回归》和《正义联盟特遣队》的可怕经历，我们不希望我们的新游戏出现类似的问题。

现在想想如果暴雪没有控制魔兽世界的知识产权会发生什么是令人惊讶的——暴雪不太可能成为今天游戏行业的主导者。

《魔兽争霸》发行几年后，我的父亲从亚洲旅行回来，送给我一套战锤模型的礼物，是一个骷髅御者和马的形状，并说:“我在旅途中发现了这些很酷的玩具，它们让我想起了很多你的游戏；你可能想让你的法律部门联系他们，因为我认为他们在敲诈你。”嗯！

## 游戏开发的阻碍因素

早期开发过程中一个有趣的方面是，当我在开发一个可以用调制解调器或局域网玩的游戏时，公司没有办公室局域网。因为我们开发了容易放在软盘上的控制台游戏，所以它不是必需的，尽管它肯定会简化备份。

因此，当我开始与其他艺术家和程序员合作时，我们使用“运动鞋网络”，在办公室之间来回携带软盘，以整合源代码修订和艺术品。

Bob Fitch 是该项目的第二个程序员，他和我会定期来回复制文件和代码更改。我们会周期性地犯集成错误，我们修复的 bug 会再次出现。我们会追踪它并发现——在集成变更时的文件复制过程中——我们不小心覆盖了错误修复，我们必须记住我们以前是如何修复它的。

这种情况发生了很多次，因为我们开发代码的速度很快，而且除了“记住”我们曾经处理过的文件之外，我们缺少任何处理代码集成的过程。在这方面，我有点幸运，因为我的计算机是我们执行所有集成的“主”系统，所以我的更改不太可能丢失。现在我们使用源代码控制来避免这种愚蠢的行为，但是在那时我们甚至不知道它是什么！

随着越来越多的程序员、设计师和美工在游戏中工作，游戏进度大幅提高，但是我们也发现了一个很大的阻碍。该游戏最初是在 DOS“真实模式”下开发的，这意味着只有 640K 的内存可用，比操作系统少了大约 120K。你能相信那时的电脑有多垃圾吗？？！

当美术团队开始创建游戏单元、背景和用户界面作品时，我们迅速耗尽了所有的内存，并开始寻找替代方案。解决方案的第一次尝试是使用 EMS“分页内存”映射，并在 640K 内存屏障“之上”存储 art 资源。

程序员讲述的关于内存管理的故事就像老人们讲述的走上山去学校，赤脚，在雪地里，两种方式，除了内存管理的故事更可怕，实际上是真的。

无论如何，幸运的是，EMS 解决方案不起作用；事实证明有更好的解决方案。一家名为 Watcom 的公司发布了一个 C 编译器，其中包括一个 DOS 模式的“扩展器”，允许以“保护模式”编写程序，访问线性 32 位内存，这是今天每个程序员在编写 32 位(甚至 64 位应用程序)时都想当然的事情。虽然更新源代码需要几天时间，但 DOS 模式扩展器工作得很好，我们又开始工作了，现在可以访问更多的内存。

## 不是结论

在本系列的下一篇文章中，我将讨论 Stu Rose 和设计妙招，魔兽争霸的第一个多人游戏，几乎杀死多人游戏的 bug，Bill Roper 如何使魔兽争霸变得令人敬畏，如何将游戏安装到软盘上，Westwood Studio 对我们游戏的反应，以及我和开发团队的其他成员在 18(！idspnonenote)开发的游戏中挖掘出的其他精华。)年前。