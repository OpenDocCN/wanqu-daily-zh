# 《地下城主的兴衰》|

> 原文：<https://medium.com/@ziobrando/the-rise-and-fall-of-the-dungeon-master-c2d511eed12f?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

# 地下城主的兴衰

软件开发中有一种常见的反模式隐藏在众目睽睽之下，只等着有人来命名。

时间到了，名字叫 ***【地下城主】*** 。

每当你着手一个企业软件开发项目，涉及重写一个大型遗留系统的某个部分时，你可能会碰到一个地下城主。以下是一些与众不同的特征。

*   地下城主是最初软件的*作者，该软件在早期用于支持业务，现在仍然如此(尽管有些令人头疼)。*
*   他对软件根深蒂固，事实上他比任何人都了解软件。即使他不再是一名软件开发人员，他仍然离它的诞生很近。
*   每当软件出现问题(这种情况确实发生了)时，他就是要找的人。
*   他们通常被*的爪牙*包围着，这是一个互补的反模式，应该有一个自己的帖子(即将发布)。

地下城主的黑暗秘密在于**他知道现存遗留软件**中的每一个陷阱，因为**是他在**周围留下陷阱的人。

这不是故意的，也不是邪恶的。软件很少是*完成-完成*的，当你有了更好的洞察力时，你不一定有可能为了配合新的学习而重构。知识以*偶然复杂性*的形式开始在地下城主的头脑中积累，并无声无息地成长。

无形但稳定。

最终的结果是*对于每一个重大的变化*，*地下城主必须参与*。他是唯一一个能够引导开发者穿越雷区的人。或者看起来是这样。

# 让一个地下城主作为产品所有者或领域专家是一个糟糕的主意

Cyrille Martraire 在今年的 DDDEurope 中很好地展示了这一点:

[https://twitter.com/ziobrando/status/692993841515909120](https://twitter.com/ziobrando/status/692993841515909120)

现在让我们坦率地说:在许多项目中，现有解决方案的前开发人员在替换开发项目中扮演了角色，现在我不得不揭露真相:

> 我从未见过这种方法奏效。

主要原因是地下城主被置于一个完全矛盾的境地:

*   一方面，更换是必要的，因为公司成长了，现在有了更多的预算，这是因为遗留软件使之成为可能。换句话说，这位 DM 在肩负业务方面做得非常出色。自尊是令人高兴的。
*   另一方面，替代是必要的，因为*我们现在正在触及原始方法*的极限，无论是模型、技术、市场演变还是对它们的理解。发布一个新的解决方案，比原来的好得多，将证明 DM 做得不好。这不一定是*真的*有问题。这是对这种事情发生的无意识恐惧(也许是骗子综合症)，驱使着这些未说出口的想法。想象一下，当走过一群评论*“哦，终于有像样的软件了！”的员工时，那种尴尬的感觉*。

这不是一代人的问题。我 45 岁，我遇到过比我年轻得多的 DM。这更多的是一个态度问题，但主要是一个制度问题。优秀的开发者之所以会变成地下城主，是因为这是系统要求的。没有道德。没有判断。

要求一个人违背自己的利益是一种微妙的酷刑。这就是引擎盖下将要发生的事情。

现在的问题是:*你想被一个脑子如此四分五裂的人领导吗？*

因为这正是将要发生的事情:

*   在意识层面，地下城主将*参加会议*和*为新开发者提供专业知识*；他最终会丢掉太多的知识，混淆领域知识和他自己的解释，通常是为了节省一些时间。
*   在无意识层面，来自开发团队的新想法将不可避免地让他处于防御姿态。毕竟，我对这个问题已经思考了多年，你有什么资格在几天内提出一个“更好”的解决方案？或者，换一种说法，*更聪明的想法会让他觉得或者看起来很蠢。*

如果你还没有，请看看 Gerald M. Weinberg 的[](https://www.amazon.com/Secrets-Consulting-Giving-Getting-Successfully/dp/0932633013?ie=UTF8&*Version*=1&*entries*=0)**咨询的秘密，很多这些动态在第一页就暴露了。**

**让我更好地阐明在可能的结果中会发生什么。**

1.  **这个新项目比之前的项目好得多，可以带来更好的收入，还有许多有趣的副作用。然而，这也将暴露出*遗留软件有多糟糕*以及*为了让它比需要的时间更长而损失了多少钱*。在健康的公司文化中，这不一定是个问题。这是学习商业的一部分。在某些文化中，这是不可接受的。**
2.  **新项目**比旧项目**稍好。自我在某种程度上是安全的，但接下来整个事情将开始看起来尴尬:*为了这么一点点优势，真的有必要重写软件吗？然而，一点点*的改进，尤其是来自以前没有的新技术，可能是最甜蜜的地方。****
3.  *这个新项目是一个失败的项目，一场没有结果的无休止的大屠杀。这是地下城主自我的最佳选择，也许公司的钱包会受到打击，但在改进他的创作方面的失败将会看到他的胜利。尽管有更大的预算和大批开发人员*，没有人能比他做得更好*。*



*这种情况将地下城主置于化身博士和海德先生的境地。尽管有最好的意图，他们的帮助将是微不足道的。或者可能有负面影响。*

*如果问题不是技术，而是*模型*或者*对问题的理解*，那么来自地下城主的帮助可能就是一颗毒丸。他们通常会强迫新的开发团队重新运行他的建模过程:破坏所有的乐趣，并最终重复他自己的错误，并总体上使项目不是最好的地方。*

*观察支持软件开发的学习过程，我们可以发现一个显著的不同:最初的学习主要是*发现*，而第二轮将倾向于对现有模型的*遵从*。带着最好的意图(不是重新发明轮子，省钱，等等。)新系统的开发者将被剥夺健康学习的可能性。*

*现在，读者可能正在寻找解决方案。我没有。这篇文章主要是因为沮丧地看到反复出现的功能障碍，然后责怪人们或不幸的环境。*

*以下是一些常见的策略。*

## *假装是一个技术问题*

*公司可以嗅到问题，但可能无法正确诊断。指责一项技术变得过时是一个廉价的替罪羊。*

*   ***好:**在编写软件时，新技术还不可用。使用新的东西，如*微服务，*可以允许软件编写时不可用的方法。不管这是真是假，**荣誉是安全的**。(澄清:*我并不推荐微服务或任何其他技术方法*，只是用一个例子来说明一种足够新的技术。请不要用这个当稻草人)*
*   *坏的:在实践中，这通常会导致对现有代码库进行代价高昂的重写，而对实际系统行为的改进很少或没有。大多数时候，产生的价值是*负的*:受制于遗留限制的新技术在开发团队中产生了一种**挫败感**，这通常会导致更严重的麻烦。在看到大量资金被用于开发最终包装遗留数据库的大型 SOA 后，我不相信这行得通。*

## *先考虑钱*

*通常 DM 已经承担了一些管理责任，甚至是公司的一些股份。如果 DM 开始首先考虑业务，并且只担心投资回报和拥有成本，这是一件好事。*

*   *好的:假设，从他的管理角色来看，地下城主现在脱离了世俗的东西，比如表格结构、主键和验证标准。*
*   ***坏**:他不是。对解决方案的依恋还在。开发人员安装一条消息总线来代替一个*数据库触发器*将是一种残酷的折磨。但是钱也讲述了一个不同的故事。当一个不同的实现显示可以节省很多钱的时候，那么保留旧软件太久的成本也暴露出来了。这可能很可怕:想象一下，你发现你 10 年前做的一个错误的设计决策给你的公司造成了数百万的损失…你会高兴地揭露它吗？*

## *让他们成为新团队的一部分*

*一个梦幻般的出路可能是给他们提供进入历史的选择，成为交付旧版本软件的获胜团队的一员，也成为新团队的一员。就像运动员的职业生涯跨越几代人一样。*

*   *好消息:理论上，这可以唤醒最佳本能。这些人很聪明，成为新游戏的一部分可以让他们释放出最大的能量。*
*   ***坏**:重新学习的量会很大。他们将会发现自己的生产力不如年轻的同龄人，擅长无用的事情，但在重要的事情上却慢得令人尴尬。退回到“旧方式”或“黑暗面”的诱惑将永远存在。如果 DMs 在此期间向上爬，这是不可行的。*

## *绕过他们*

*从一开始就认识到他们的贡献很小或者可以忽略不计。让他们选择扮演“脾气暴躁的老人”的角色来评论新一代开发人员的成果，但基本上通过在当今的开发人员和利益相关者之间建立直接的沟通渠道来绕过他们(无论如何这是一个好主意)。*

*   ***好**:你可能会发现*真正的问题是什么*，而不需要拘泥于昨天的解决方案。从现在发生的对话中可以产生更多的见解，最终导致不同的产品，更符合当前的需求。*
*   *坏消息:旧软件仍然存在。即使为了绕过系统，也需要进行协作。将一个内部软件视为一个不受控制的第三方，可能会使项目领导受到审查，而相反的情况可能会为破坏打开大门。*

## *分开的路径*

*我并不是建议雇佣一个杀手，而是承认没有地下城主这个项目会更好。如果你正在寻找一个范式的转变，你将需要一个有着不同态度和情感纽带的团队。*

*   ***好**:团队现在可以寻找可用的最佳解决方案，*无论如何，*并最终从替代方法中实现突破。这个项目现在正处于一个*学习*的道路上，而不是一个从众的道路上，情绪会反映出来。地下城主现在摆脱了维护遗产的诅咒，终于可以起死回生了。*
*   ***坏的**:一个理论上的大省钱者(我们已经有了领域专长)不见了。重新学习的需求是显而易见的，并将影响项目评估。每当做出一个糟糕的决定时(这是会发生的，因为团队将会学习)，地下城主的鬼魂就会出现在房间里，警告事情应该以不同的方式完成，并与关键利益相关者玩无休止的*“如果……会怎么样”*心理游戏。团队中没有 DMs 并不能保证成功*(嗯，…什么都不能保证)*。这主要取决于地牢的大小，但也取决于许多其他因素。总的来说，这不是一个容易的决定。有*感恩*还有*事业*。它们并不总是一起出现。*

## *将 DM 转变为“纯粹的利益相关者”*

*很多问题都围绕着产品负责人这个角色。这双手掌握了太多权力。让一个地下城主成为众多利益相关者中的一员可能会缓解这个问题。*

*   *好的:涉众需要通过 PO 来引导开发，所以他们不应该微观管理待办事项，也不应该混合显式和隐式的需求。只有“官方的”才会交付。*
*   *坏消息:这种方法是否可行在很大程度上取决于相关人员和组织(内部项目？承包商？DM 目前的角色是什么？).它可能会再次演变成一场权力斗争，或者允许微妙形式的破坏。*

# *如果你是地下城主呢？*

*如果你在这幅画像中认出了自己(猜猜看，我也认出了自己的一些特征)，你可能会失望，因为我没有给出很多可行的解决方案。*

*但实际上，你的命运掌握在自己手中，这里有几个小技巧可以让你的生活变得更轻松。*

## *不搭理*

*你做得很好。考虑到在编写软件时所知道的约束和情况，您已经尽了最大努力。你可能自己也做了很多事情，因为结对编程那时不在卡里。所以 ***谢谢*** ！然而，当您忙于工作时，其他人有幸尝试了 NodeJS、*微服务和许多您可能无法处理的酷东西，因为您已经没有那么多空闲时间了。*(再次澄清。这一次让很多人把我描绘成一个年轻的开发人员，把技术当作一颗银弹。我实际上是相反的:一位前开发人员承认，我将不再有特权在某一特定的技术上做得和我以前编写代码时一样好。***

*新团队会做的很烂。他们会浪费时间，他们会一直实施错误的解决方案，或者不太成熟。那很好。他们正在学习。这是一个无法跳过或加速的步骤，只有*促成了*。*

## *开始新的东西*

*真正的乐趣是在早期，没有那么多的责任(毕竟企业没那么大)，人们需要你？从头开始做一些完全不同的事情怎么样？*

## *重启，但是真的*

*这是从地下城主的角度来看的*“让他们成为新团队的一部分”*，我说过这不太可能行得通。但是我的统计样本不足以给出确定性，而且我有幸在我的职业中遇到了独角兽。所以如果你想试试…*

*…将过去的解决方案从你的脑海中抹去。远离舒适区。每个人都知道你可以用你常用的工具解决这个问题，你已经做到了。“大师”这个词意味着你成为一名 DM 是因为你很优秀。*

*而是用全新的工具开始建模(嗯…[event storing](http://www.eventstorming.com)那时可能还没有)，寻找不同的实现，可能只是因为最初的那个*很无聊*。软件开发是*学习*，这就是乐趣所在。*

*毕竟，*斯汀*在*警方*之后成功重塑自我。；-)*

# *结论？*

*正如我之前提到的，*挫败感*是写这篇文章的主要驱动力。主要是沮丧地看到项目解决方案，人们应该以一种不可行的方式行事，并看到围栏两边的斗争。*

> *光靠逻辑和善意解决不了问题。*

*大多数 DM 令人讨厌的行为更多的是无意识习惯的结果，而不是故意的，但是团队经常阅读故意的邪恶意图(顺便说一句，正如一些读者所做的)。我只是认识到这种反复出现的情况，*将*命名为反模式，希望能提高一些意识，并开始寻找一些更好的解决方案，因为*忽视这个问题对*没有帮助。*



****更新*** *:这个帖子引起了一些骚动。所以我猜测这是“澄清部分”。**

*我无意提出的一件事是代/年龄问题。感谢安·维特布洛克给我指出了这一点。这不是**:这是* ***的态度*******的系统*** *的恶性循环，而我已经 45 岁了，不是某个人描绘的小混混。它的开始是因为有人编写了一个允许公司成长的软件。****

**这也不是一个技术问题。我使用微服务和 Node.js 仅仅是出于软件编写时不可用选项的例子。技术可以被用作借口，但它通常既不是问题的一部分，也不是解决方案。**

**可能的性别偏见也受到了批评。由于许多原因(也许我的样本太少或者不够多样化)，我想不起任何类似的涉及女性的情况。**

***还有一点我不是故意的，就是* ***把人当资产*** *(虽然我也意识到了危险)。感谢* [*詹姆斯·考维利耶*](https://twitter.com/JamesCauwelier) *的唤醒。驱使我写作的原因是看到基于善意的方法失败时的沮丧，以及由此导致的斗争双方的痛苦:最糟糕的折磨之一是迫使人们违背自己的利益，帮助一个团队证明自己愚蠢或过时，或者干脆扼杀你的创作，就是其中之一。这支球队的日子也不好过:他们在用一套他们无法击败的体系打球；所有明智的决定都已经做出了。***

**我也没有指出在系统层面缓解问题的解决方案，主要是因为已经太晚了。我不认为这个问题会在一个普通项目的时间框架内被轻易解决。这就是极端措施开始有意义的原因。**

**因此，这变成了对开发人员的警告，警告他们将反模式作为项目设置的风险。从长远来看，文化肯定会发挥作用:尝试的自由、庆祝失败和学习是防止这种情况出现的重要因素。**

**我也认为这还不够:我见过人们为自己设定自己的标准，尽管周围的文化更加宽松。完美主义是 DMs 的一个普遍特征。像 ***结对编程*******集体代码所有权*** *(或者无论什么带入* ***集体学习*** *)这样的既定做法，都有助于防止 DM 的兴起。许多想法来自于单人节目，尤其是深夜单人节目，组织应该意识到这种方式的风险和危险。****

**我也被指责“丑化角色”。不，我是用 ***命名*** *它。James 建议我不要称之为反模式，也不要指责这个人。***

**我认为问题在于情况，而不是人。但我还是觉得反模式名字应该指的是人: ***没人想当或者成为地下城主*** *。这就是我给它命名的原因:提前叫醒电话！***

***讲完整个故事，被丑化的人物是* ***到底 DM 是怎么被新开发团队*** *看到的。这是让我害怕的部分。然后，你和这个人交谈，发现非常人性化的行为，却忽略了一些习惯的后果。或者你发现深奥的知识和缺乏将它传递给合作者所需的技能。人类的东西。他们是好人，但在新团队的眼中他们是邪恶的，除非我们尝试做一些不同的事情。***