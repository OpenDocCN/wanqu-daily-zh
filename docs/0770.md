# Jerry 谈 Java:简单性

> 原文：<http://blog.jerryorr.com/2015/03/simplicity.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

最近，我一直在思考软件简单性的重要性。我记得在我的职业生涯中有一段时间，我认为一个单一的系统，做一切都是理想的；我梦想构建能够满足用户所有可能需求的整体应用程序，我寻找无所不包的框架，消除对任何其他依赖的需求，并抽象出尽可能多的挑战。当我可以采用一个包含所有内容的框架时，为什么要在我的应用程序中导入几个小库呢？

随着时间的推移，我写了更多的软件，但是，我开始意识到在我之前很多程序员都明白的事情:**当软件专注于做好一件事的时候，它工作得最好**。由此推论:**试图做太多事情的软件不会在所有事情上都表现出色。**

我看到最近这种哲学被讨论得更频繁了，特别是在对像 [JSF](http://en.wikipedia.org/wiki/JavaServer_Faces) 和[安古拉杰](http://en.wikipedia.org/wiki/AngularJS)这样的整体框架的反弹中；我还没有决定是简单越来越受欢迎，还是我现在更加注意到简单，因为我更欣赏它。但是，即使简单性正在软件开发中获得牵引力，它也不是一个新概念。迪杰斯特拉本人在 1975 年写道:

> 简单是可靠的前提。我们如何说出可能伤人的真相？T3】

或者考虑一下自 20 世纪 60 年代以来以各种形式出现的 Unix。类 Unix 系统(如 Linux 和 Mac OS X)中的实用程序倾向于只做**一件事**，但是**做得很好。**有一些实用程序，例如:

*   `find` -在目录结构中搜索与表达式匹配的文件
*   `xargs` -使用前一个命令的输出作为参数执行任意命令
*   `egrep` -搜索匹配给定正则表达式的文本
*   `identify` -检索图像元数据(是 [ImageMagick](http://www.imagemagick.org/) 的一部分)
*   `cut` -提取文本片段
*   `tar` -创建文件档案

就个人而言，这些都是相当简单的程序。它们通常单独有用，但不会做非常复杂的事情。

但是，假设您想要搜索整个文件系统，并将任何一年的所有寒假照片收集到一个单独的归档文件中？好吧，也许你可以找到一些大型的单性程序来帮你做这件事；你可能需要为它付费，它确实比你需要的要多得多，但仍然可能不会完全如你所愿。或者，您可以编写几个简单的程序来实现您的目标:

`find . -iname '*.jp*g' -print0 \ | xargs -0 -L 1 -I @ identify -format '%[EXIF:DateTime] %d/%f\n' @ \ | egrep '^[[:digit:]]{4}:12' \ | cut -d' ' -f3- \ | tar -cf december.tar -T -`

它使用`find`列出所有以 jpg/jpeg 结尾的文件，然后`xargs`将每个文件传递给`identify`，后者列出每张图像的拍摄日期及其名称。然后`egrep`将列表过滤为任何一年 12 月拍摄的图像，并且`cut`将输出修整为仅列出 12 月的文件名。最后，`tar`获取文件列表，并将它们放入归档文件中。同样，这些单独的任务都不是特别复杂；然而，当这些简单的程序组合在一起时，我们能够做一些相当复杂的事情。

作为一名程序员，理解编写**复杂软件**和编写做复杂事情的**软件之间的区别是很重要的。**复杂的软件很难写，很难测试，更容易出问题。相反，我们应该编写许多**简单的**、**经过彻底测试的**软件，并组合这些简单的软件来做复杂的事情。

如果你正在编写实用程序库，让它们尽可能集中，而不是编写一些万能的超级实用程序带——把这些留给蝙蝠侠吧。如果你正在写应用程序，确保你写的是紧凑的、经过良好测试的模块化代码；像 [Browserify](http://browserify.org/) 这样的模块系统确实可以在客户端提供帮助。保持简单。

*更新:添加`-print0`到`find`和`-0`到`xargs`以正确处理文件名中的空格。感谢 [Graingert](https://www.blogger.com/profile/00882044005568424722) ！*