# Apple Pay 的真正工作原理以及为什么你应该立即开始使用它——柯克·列侬

> 原文：<http://www.kirklennon.com/a/applepay.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>



# Apple Pay 的实际工作原理以及为什么您应该立即开始使用它

<cite>Published by [Kirk](../about.html) on <time datetime="2014-10-20">October 20, 2014</time>, updated <time datetime="2014-12-30">December 30, 2014</time></cite>

Apple Pay 的发布受到了很多媒体的关注，也引起了很多误解。在不指名道姓的情况下，公平地说，关于它如何工作以及为什么它优于(并且，明确地说，它远远优于)现有的支付机制，存在着大量的误解。在我们开始研究它实际上是如何工作的之前，看一下现有的问题是有用的。

## 现在的信用卡怎么了？

在美国，这个问题的答案几乎无所不包。你的信用卡号码，或者用行业术语来说，主要账号(PAN)，被嵌入在背面的原始磁条中，并且，为了更好地测量，通常被压印在正面。卡本身没有任何有意义的安全性。为了在电话/互联网交易中使用，该卡上还印有一个三位数或四位数的安全码，尽管这个数字不是交易绝对需要的，似乎只是随机要求的。当你去商店时，你刷你的卡，你的纯文本 PAN 被商家看到，然后通过你希望的安全加密连接发送到信用卡处理器进行验证。问题不在于交易的结束。万事达等信用卡公司和发卡银行通常在保证系统安全方面做得非常出色。问题出在商家身上。他们可以看到你的号码，并将其存储在他们的系统中，这对于退货来说很方便，但也有问题。支付卡行业(PCI)安全标准委员会制定了严格的规则来管理持卡人数据的存储、使用和传输，虽然商家可能需要遵守 PCI，但这并不一定意味着他们实际上是安全的，或者不存在合规措施没有完全解决的其他漏洞。仅在过去的一年里，就有大量大型商户宣布了重大信用卡违规事件，这提醒了我们这一点。

## 芯片卡呢？

在美国之外，大多数国家很久以前就已经从使用所谓的“磁条”卡转向更安全的 EMV 卡，也就是通常所说的“芯片和密码”美国将在明年最终开始转向 EMV 卡，尽管大多数银行将发行“芯片和签名”卡，放弃使用 PIN 的额外安全性。这些卡是一个巨大的进步，特别是通过生成一次性安全代码，但它们仍然以明文形式传输 PAN，对在线交易没有任何好处。商家还是拿到了你的号，商家才是问题。它们太多了，有太多可能的安全漏洞。保证你账户安全的唯一方法是让商家从一开始就不要你的锅。作为转换到芯片卡的一部分，所有的商家都必须更新他们的信用卡终端，如果他们还没有这样做的话。2015 年 10 月这一转换的“最后期限”并不是一个硬性的最后期限，但它是责任转移的时候，这应该是大多数商家的充足动力。现在，如果有人欺诈性地使用信用卡，而商家遵循基本的受理规则，那么信用卡发行商就要为欺诈行为负责。切换后，如果商家有带芯片的终端，但信用卡本身是无芯片的，那么信用卡发卡行还是要承担责任的。但是，如果信用卡公司发行了芯片卡，但由于商家没有升级终端，客户不得不使用芯片卡，那么*商家*要对任何欺诈负责。由于信用卡终端不会永远存在，而且一次欺诈事件的代价可能非常高，因此转换应该很快。Apple Pay 的推出并非偶然，而是恰逢硬件升级，无论如何，这将有助于*最终*让 NFC 非接触式支付变得普遍。美国转向接受芯片卡的一个重要副作用是，几乎所有的新终端也将支持非接触式支付。

## Apple Pay 和“设备账号”

以下是苹果在他们的[新闻稿](http://www.apple.com/pr/library/2014/09/09Apple-Announces-Apple-Pay.html)中对 Apple Pay 的描述:

> 当您使用 Apple Pay 添加信用卡或借记卡时，实际的卡号既不会储存在设备上，也不会储存在 Apple 服务器上。相反，一个唯一的设备账号被分配、加密并安全地存储在你的 iPhone 或 Apple Watch 的安全元件中。每笔交易都使用你的设备账号和一次性唯一号码进行授权，而不是使用你的卡背面的安全码，Apple Pay 会创建一个动态安全码来安全地验证每笔交易。

“设备账号”是苹果对支付令牌的称呼。苹果没有尝试建立一些全新的专有支付方法，而是采用了令牌化(EMVco 的另一个产品)这一新兴技术，并在此基础上创建了一个新的实现。[令牌化规范](http://www.emvco.com/specifications.aspx?id=263)中的主要场景是商家仍然从您的卡中读取 PAN，但当支付被授权时，商家会获得一个令牌，然后他们会将该令牌保存在他们的系统中，而不是您的实际信用卡号。这解决了黑客窃取您已存储的号码的问题，但如果在此之前 PAN 被截获，例如恶意程序已被加载到卡终端本身上，则没有帮助。

“支付令牌”是指 PAN 的替代值，它是一个 13 到 19 位的数值，必须通过帐号的基本验证规则，包括 Luhn 校验位。[……]支付令牌不得与真实 PAN 具有相同的价值或与之冲突。”换句话说，对商家来说，代币看起来就像任何普通的信用卡号码。Visa 信用卡的令牌是 16 位数字，以 4 开头，但不能像普通信用卡号码一样使用。小偷可以偷一个锅，然后很容易地用它在网上购物，但代币不起作用。澄清一下关于 Apple Pay 最常见的误解，*支付令牌不是一次性使用的*。每次你用一张给定的卡和一部给定的手机时，使用的是同一个令牌。然而，这仍然是安全的，因为支付令牌只能作为整个令牌化方案的一部分用于交易。具体来说，没有令牌密码，令牌就不能被授权，令牌密码在苹果的新闻稿中被称为“动态安全代码”。使用支付令牌和附加交易数据来生成令牌密码，以创建交易唯一值。计算和格式可能因使用情形而异。”如果有人能够从商家那里窃取令牌，他们就不能用它进行网上购物，也不能把它加载到假信用卡上使用；该号码将被拒绝，因为窃贼不能生成动态安全码。

## Apple Pay 的工作原理，循序渐进

使用 Apple Pay 的第一步是将你的信用卡添加到 Passbook。你可以用 iPhone 6 上的摄像头直接从卡上读取持卡人数据。这是 Apple Pay 中唯一使用您的 PAN 的步骤。PAN 首先通过加密连接发送到苹果公司，苹果公司必须看到号码才能知道将它发送到哪家银行。Apple 会在您添加该卡后删除该号码。然后，PAN 被发送到信用卡公司，这些公司生成支付令牌，并以加密格式发送回苹果，只有你的手机才能解密。苹果从来看不到令牌，只作为中介把令牌送回你的手机。生成和存储令牌的实际过程由您的发卡银行完成，或者，例如，Visa 和 MasterCard 为银行提供“代表”服务，由它们处理令牌化过程。令牌是由*而不是*密码生成的，虽然可以设置某些元素，但数字本质上是随机的，这意味着恶意代理不可能从令牌中猜出 PAN。发行者维护一个“令牌库”，将令牌映射回它们各自的 PAN，并且一个 PAN 可以有多个令牌。一旦你的 iPhone 收到令牌，它就会将令牌存储在安全元素中。当您去商店支付时，您的 iPhone 会将令牌与令牌密码一起传输给商家，令牌密码是在交易时由安全元件使用令牌和其他特定于交易的数据生成的。令牌和安全代码通过正常的支付网络发送，令牌最终映射回您的 PAN，您的银行(希望)授权交易。商家从来看不到你的实际账号，甚至看不到你的名字。您的私人信息保持私密和安全。

此外，请注意谁不是支付过程的一部分:苹果公司。一旦你把你的卡加到你的手机上，剩下的交易就是你、商家和你的信用卡公司或银行之间的事了。苹果永远不知道你在哪里、什么时候、花了多少钱使用它。然而，苹果确实会在你每次使用信用卡时从交易费中抽取一小部分，或许作为减少欺诈的补偿。参与银行会跟踪来自 Apple Pay 的交易，并定期向苹果支付一次性款项。他们还向苹果提供关于 Apple Pay 使用情况的高级统计数据，但没有特定用户的数据。

## 方便*和*安全

我看到的对 Apple Pay 的反对意见之一是“它怎么比滑动我的卡更快/更容易？”事实是，并不总是这样。很少会比滑卡花费更长的时间，但也不总是会快得多。然而，它要安全得多。你的卡号根本不能信任商家，唯一真正的解决办法就是永远不要给他们。Apple Pay 解决了这个问题，它以一种拥抱行业标准的方式做到了这一点，并且很容易，甚至可能有一点点乐趣。

## 附加阅读

