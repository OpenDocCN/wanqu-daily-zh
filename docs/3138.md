# 奇异应用

> 原文:[http://www . Martin fowler . com/bliki/stranger application . html？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](http://www.martinfowler.com/bliki/StranglerApplication.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

当辛迪和我去澳大利亚的时候，我们在昆士兰海岸的雨林里呆了一段时间。这个地区的自然奇观之一是巨大的无花果树。它们在树的上部枝条中播种，然后逐渐向下生长，直到扎根于土壤中。许多年后，它们长成奇异而美丽的形状，同时勒死并杀死作为它们宿主的树。

这个比喻给我的印象是描述重写一个重要系统的一种方式。我职业生涯的大部分时间都在重写关键系统。你会认为这样的事情很容易——只要让新的做旧的就行了。然而，它们总是比看起来复杂得多，充满风险。巨大的交接日期迫在眉睫，压力正在增加。虽然人们喜欢新功能(总有新功能)，但旧功能必须保留。即使是老的 bug 也经常需要添加到重写的系统中。

![](../Images/0667059cbf435e9719977002ecd8a36e.png)

这个帖子因为一个 20 年前就被抛弃的隐喻而变得非常流行，但是替换遗留系统的话题值得更多的关注。幸运的是，我的同事们已经介入来填补这个空白，他们正在研究一系列模式来获取我们的经验，以渐进的方式替换遗留系统，允许新的价值以更低的风险更早地出现。

另一条路是在旧系统的边缘逐渐创造一个新系统，让它在几年内慢慢成长，直到旧系统被扼杀。做到这一点听起来很难，但我越来越觉得这是一种尝试不够的事情。特别是，我注意到几个行之有效的基本策略。基本策略是 [EventInterception](/bliki/EventInterception.html) ，可以用来逐渐将功能转移到扼杀者 fig，并启用 [AssetCapture](/bliki/AssetCapture.html) 。

我的同事克里斯·史蒂文森最近参与了一个项目，这个项目取得了巨大的成功。他们在 [XP 2004](http://www.xp2004.org/) 上发表了[关于这个的第一篇论文](http://cdn.pols.co.uk/papers/agile-approach-to-legacy-systems.pdf)，我希望能有更多的描述这个项目的更多方面。他们还没有达到扼杀旧应用程序的地步——但是他们已经向业务交付了有价值的功能，这给了团队继续前进的可信度。即使他们现在停止，他们也有巨大的投资回报——这比许多切换重写实现的要多。

考虑使用扼杀者 fig 应用程序而不是切换重写的最重要原因是降低风险。扼杀者 fig 可以稳定地给出价值，频繁的发布可以让你更仔细地监控它的进展。许多人仍然不考虑扼杀无花果，因为他们认为这将花费更多-我不相信这一点。因为您可以使用更短的发布周期，所以您可以避免许多不必要的特性，这些特性通常是由切换重写产生的。

这里还有另一个重要的想法——当设计一个新的应用程序时，你应该以这样一种方式设计它，使它在将来更容易被扼杀。面对现实吧，我们所做的一切都是在今天写明天的遗留软件。通过让未来增加一个扼杀者形象变得容易，你正在让今天的工作优雅地消失。

## 修订

将 URL 和名称更改为 Strangler Fig 应用程序 2019 年 4 月 29 日

我认为这个帖子是一个很好的比喻，但没想到它会越来越受欢迎(最近几个月，它每个月的浏览量超过 3000 次)。人气不错，但是有个问题。最初的帖子标题是“扼杀者应用”，在使用时，该模式通常被称为“扼杀者”。但是它的用法经常脱离它的隐喻根源，并呈现出令人不快的暴力内涵。

因此，有些人主张避免或改变名称。我对此没有任何异议，自从那篇文章发表以来，我还没有在自己的文章中使用过这个名字。但是尝试重新命名的麻烦在于，一旦一个名字在一个社区的头脑中扎根，就很难去除。

最近，我想到了一个可能有所帮助的小方法。如果我把这篇文章重新命名为“扼杀者无花果应用”，并尽可能多地使用“扼杀者无花果”这个术语，那么希望通过加强这个名字的隐喻联系来减少暴力内涵。因为这是一个很小的改变，也许它会传播得足够值得，而且这并不需要太多的努力，所以似乎值得一试。