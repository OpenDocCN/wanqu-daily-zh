# 元习惯:学会在不同的情况下采用不同的习惯。于是...黑客新闻

> 原文：<https://news.ycombinator.com/item?id=14709076>

Meta-habit: learn to adopt different habits for different situations. With that in mind, some techniques I've found useful for various situations:

针对数据科学类问题的“Researchey”绿地开发:

1.如果可以先手动做，那就手动做。你会对如何接近它有一种直觉。

2.收集例子。从突出显示可用数据的电子表格开始。

3.在让它适用于所有情况之前，先让它适用于一个情况。

4.将调试输出构建到算法本身中。您应该能够转储每个步骤的中间结果，并使用文本编辑器或 web 浏览器手动检查它们。

5.不要为单元测试而烦恼——除非你能定义什么是正确的行为，否则它们毫无用处，而当你在做这种编程时，根据定义你不能。

大型陌生代码库的维护编程:

1.看一下文件大小。最大的文件通常包含程序的核心，或者至少是指向程序核心的调度程序。main.cc 通常很小，对你找路没用。

2.使用调试器单步执行程序，从主调度循环开始。您将会学到很多关于控制流的知识。

3.寻找数据结构，尤其是那些作为参数传递给许多函数的数据结构。大多数程序都有一小组关键数据结构；找到它们，让自己适应剩下的就变得容易多了。

4.编写单元测试。它们是确认你对代码的理解实际上是代码如何工作的最好方法。

5.删除代码，看看哪里出错了。(不过不要签入！)

绩效工作:

0.不要，除非你已经建了，而且对用户来说太慢了。为你需要提高的程度设定绩效目标，当你达到目标时就停止。

1.在所有事情之前(甚至是剖析！)，构建一组代表典型真实世界使用的基准。不要让你的表现退步，除非你非常确定自己陷入了局部最大值，而更好的全局解决方案就在眼前。(如果是这样的话，在你的 VCS 分支上做个标记，这样如果你错了，你就可以撤销你的修改。)

2.许多性能瓶颈都在系统之间的交叉点上。在任何 RPC 框架中收集计时统计数据，并有一些方法来传播和可视化请求通过每个服务器所花费的时间，以及请求的哪些部分并行发生，关键路径在哪里。

3.侧写。

4.通常，通过避免不必要的工作，你可以获得巨大的初步胜利。缓存您最大的计算，并懒洋洋地评估通常不需要的东西。

5.不要忽略不变因素。有时，性能逐渐变差的算法在实践中会表现得更好，因为它具有更好的缓存局部性。您可以在被大量调用的函数中找到这样的机会。

6.当您得到一个平坦的概要文件时，通过改变您的数据结构仍然可以获得非常显著的收益。注意内存使用；通常，通过减少高速缓存压力，缩小内存需求可以显著提高系统速度。注意局部性，把常用的数据放在一起。如果你的语言允许的话(真为你感到羞耻，Java)，消除指针追逐，支持值包含。

一般卫生规范:

1.不要投机建设。确保你放进去的每个功能都有顾客。

2.小心控制你的依赖。您为一个实用函数引入的那个库可能帮助您节省了实现实用函数的一个小时，但是它增加了更多可能出错的地方——部署、版本控制、安全性、日志记录、意外的进程死亡。

3.当你为自己或一个小团队开发时，让问题积累起来，然后一次性解决它们(或者扔掉代码库，重新开始)。在为大型团队开发时，绝不让问题积累；代码库应该总是处于这样一种状态，一个新的开发人员可以看着它说“我知道这是做什么的，以及如何改变它。”这是读者与作者比例的结果——启动代码写得比读得多，因此可读性无关紧要，但是成熟代码读得比写得多。(当你需要像前者一样发展以获得用户、资金和生存时，转到后者的文化是留给读者的一个练习。)