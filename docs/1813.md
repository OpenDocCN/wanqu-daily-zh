# 吃豆人的警笛声。最不寻常的虫子的故事

> 原文：<https://medium.com/backchannel/pac-man-s-siren-call-4b589ea1d1e?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

# 吃豆人的警笛声

## 在最不寻常的一天，一只最不寻常的虫子的故事



对大多数人来说，2010 年 5 月 21 日星期五可能是一个平常的星期五。然而，对我来说，这再寻常不过了。

这是我打破推特的一天。我最后一次和父亲说话的那天。我做的东西被亿万人体验的那一天。但这个故事与这些都无关。这个故事是关于我如何让一些人觉得他们快要疯了。



B**ack 2010 年我在谷歌工作，**我被拉去研究和编写[吃豆人涂鸦](http://www.google.com/doodles/30th-anniversary-of-pac-man)——我们选择放在谷歌主页上的经典街机游戏的互动 30 周年庆典。我花了几个月的时间从头开始写所有的代码(没有涉及仿真)，那个星期五，太平洋时间上午 9 点，我们终于向世界公布了它。



这是第一个真正的交互式涂鸦，也是第一个真正与谷歌搜索框竞争注意力的东西。因此，在设计决策中，我们需要在推广涂鸦和允许人们完成搜索并继续生活之间找到一个良好的平衡。

经过深思熟虑，我们决定采取以下措施:

*   如果访问者保持主页打开 10 秒钟，自动开始播放涂鸦(当然，如果他们点击涂鸦或特殊的*投币*按钮，他们可以更早开始播放)
*   开始涂鸦时要开着声音(否则很多人可能意识不到声音是存在的，玩游戏的乐趣也会减少)
*   将吃豆人涂鸦保留 48 小时，而不是通常的 24 小时

好斗？也许吧。但是我们的主页上有一个奇怪的吃豆人游戏。我们对此感到相当自豪，我们希望人们——还不习惯谷歌主页可以*播放—* 了解它并享受玩它的乐趣。







T2】

在发布之前，这已经看起来像是一个不寻常的星期五。我们以前从未做过像这样的涂鸦。我和团队中的几个人熬了一个通宵，包括拍照和准备内部锦标赛版的吃豆人。就我个人而言，我被*吓呆了。*我是用户体验团队的设计师。当然，我的代码通过了所有适当的审查，但我仍然无法相信它会被允许——一字不差地——出现在谷歌最有价值的资产之一上。

我们在上午 9 点打开了开关。几个小时内，全世界都为吃豆人而疯狂。很快，我看到反馈如潮水般涌来，大到我都追不上。我突然被要求接受媒体采访。当我在上面说“我打破了 Twitter”时，这可能是一种自私的过度简化(如果没有整个伟大的团队在我旁边，我不可能实现任何事情)，但我不认为这是一种夸张。不到一个小时，在看到越来越多的谷歌 Pac-Man 推文进来后，Twitter 开始用这个问候我们:



但是在兴奋之中——由于睡眠不足而加剧——我们开始收到一个奇怪问题的报告。也就是说，有些人听到了吃豆人的声音…即使他们没有玩我们的吃豆人。

我们最初拒绝了这些抱怨——“告诉他们关闭谷歌主页”——但这并没有帮助。在四处搜寻和绞尽脑汁之后，这个罪魁祸首变得更加复杂……也更加迷人。



T2】

2010 年 **是** [**火狐**](https://en.wikipedia.org/wiki/Usage_share_of_web_browsers) **最好的一年。一些使用该浏览器的人安装了一个名为 CoolPreviews 的扩展，允许他们通过悬停在链接上来快速预览页面。**

扩展将在 Firefox 打开的同时启动。它会立即在后台打开一个网站，用户看不见也不知道。那个网站是谷歌的主页。

你可能已经知道发生了什么。在那个特别的星期五，*google.com*有一个可以自动播放的带声音的吃豆人涂鸦。如果你在安装了 CoolPreviews 的情况下使用 Firefox，每当你启动浏览器时，该插件会在后台悄悄打开谷歌的主页，10 秒钟后…

…游戏声音会不知从哪里开始播放。

T2】

想象一下。星期五早上，你坐下来打开电脑。对你来说，这个星期五没什么不寻常的。你打开浏览器。你可能不知道 CoolPreviews，甚至不知道插件或扩展的概念。你不必使用，甚至不必了解谷歌。你可能不知道你用的是什么浏览器——或者什么是浏览器*。事实上，你甚至可能没有使用你的浏览器；也许它已经被最小化，并不显眼地位于屏幕底部的工具栏中。也许你只是在查看你的邮件或者为今天的第一轮单人纸牌游戏热身。*

你做什么并不重要。十秒钟后，从你电脑的扬声器里传来——你知道如何改变它们的音量吗？你知道你的电脑*有*扬声器吗？—你听到这个。



这是一个隐形的吃豆人游戏的警报，以最不寻常的方式渗透到你的电脑中。

重复播放。



T2】

你可能遇到过这样的情况,不懂技术的朋友或家人缠着你问电脑问题，而这些问题却没有简单的解决方法。“你确定鼠标连上了吗？”你可能会冷笑。"尝试关闭 CapsLock。耶稣。”

现在想象一下:如果你在那个星期五收到他们中一个人的信息，告诉你他们的电脑无缘无故地发出警笛般的声音，你会说什么？

你会告诉他们这听起来很疯狂。他们可能认为他们自己*是*疯子。是我的代码让这一切发生。

T2】

我不记得我们到底是怎么想通的了。但是在一个小时内，我们编写了代码并立即发布了双重修复:

*   我们增加了一个可视的声音开/关开关，允许人们随意静音或取消静音





Before and after. Note the sound icon in the lower-left corner.





*   我们没有删除自动游戏，但是我们修改了代码，在访客以某种方式与游戏互动之前不发出任何声音

```
*/**
 * Process a new Pac-Man direction requested by player 
 * using arrow keys or touch.
 * [@param](http://twitter.com/param) {number} newDir New direction.
 */
PacManActor.prototype.processRequestedDirection = function(newDir) {
  // Enable sound as long as the user hasn’t previously 
  // disabled it by clicking the sound icon.
  if (!pacMan.userDisabledSound && !google.pacManSound) {
    google.pacManSound = true;
    pacMan.updateSoundIcon();
  }*
```



*无论何时遇到一个 bug，尝试回答四个简单的问题是很自然的:*

1.  *发生了什么事？*
2.  *怎么修？*
3.  *如何防止再次发生？*
4.  *该怪谁呢？*

*这一次，前三个很容易:我们想出了它，我们修补了它，我们制定了我们的快速修复作为未来涂鸦的最佳实践。*

*至于最后一个…“该怪谁？”很少是一个好问题，但是让我们在这里考虑一下:*

*   *这是我们的错。我们应该预测到的，对吧？但看看所有巧合的联系:一个特定的浏览器，一个特定的不寻常的插件，声音打开，需要等待 10 秒钟问题才会发生。预见到这一点需要多大的想象力？*
*   *显然，CoolPreviews 有一些粗制滥造的编程实践！我实际上不确定他们为什么在后台打开谷歌的主页——这只是一个随机的默认吗？或者测试互联网连接的方法？不过话说回来，谷歌的主页可以承受很大的流量，而且最关键的是，*它以前从来没有发出过任何声音。假设在后台打开它不会有危险，这似乎并不荒谬。**
*   *一开始安装 CoolPreviews 是用户的错。如果一个插件引起了问题，他们有责任卸载它。但是，你如何想象任何人意识到一个随机预览扩展可以对在他们的计算机上发出声音负责？*
*   *浏览器制造商不应该允许插件做这样疯狂的事情。很有可能；如今，浏览器不会。但那时，网络更加开放……毕竟，那个漏洞没有威胁到你的隐私或数据的安全。*



*T2】*

*“该怪谁？”这个问题的最佳答案我能想到的是:网络的复杂性。网络已经存在了一段时间，许多利益相关者都参与其中，网络是开放和宽容的，它的某些部分就这样…发生了。*

*想要因为网络的复杂性而惩罚它，就像薛西斯因为大海吞没了他的破桥而鞭打大海一样。逃离网络，转向本地客户端可能会把一系列问题换成另一系列问题。想要降低网络的复杂性是……事实上，这是许多聪明人在工作或空闲时间做的事情。*

*无论哪种方式，都需要修复错误。*

*修复 bug 的一种方法是提前，通过建立复杂的机制来识别问题并防止它们上线。当然，有时候你别无选择，这是唯一的办法。与用户数据、隐私、安全或财务信息有关的任何事情都是禁止的——需要仔细测试和控制，没有回旋的余地。*

*但是还有像这样的东西，我们在这里谈论的。我以前在 Medium 上写过其他奇怪的 bug，比如[消失的波兰文 S](https://medium.com/medium-eng/the-curious-case-of-disappearing-polish-s-fa398313d4df#.l7q7gykwu) ，以及 [25 岁的系统字体从其像素化的坟墓中升起](https://medium.com/@mwichary/system-shock-6b1dc6d6596f) …现在一款吃豆人游戏在一小部分电脑上发出奇怪的声音。在远离您的服务器的地方，在您无法完全预料的情况下出现的错误。后果不太严重的错误。你*可以*尝试阻止类似的错误发生，但在某些时候，更容易假设它们*会*发生，并将你的努力转向构建基础设施来捕捉它们，然后尽快修复它们。*

*我认为解决 Pac-Man bug 的真正成就是两个紧密的循环:第一，支持团队和产品人员之间的沟通……第二，有先见之明的“热推送”基础设施，使我们能够在几分钟内部署我们的修复程序，这在谷歌的规模上是难以置信的。*



*2010 年的帽子星期五对我来说是一个不寻常的星期五，但我也知道我的工作使它对更多的人来说是一个不寻常的日子。有些人想起了 80 年代初他们玩吃豆人游戏的时候。一些人对 HTML 的可能性感到兴奋。有些人只是在玩游戏时找了点乐子，然后就离开了。*

*那天我最喜欢的反应之一是这个——在 2010 年的 48 小时里，我们带回了我小时候喜欢的街机精神:*

> *“我在这家咖啡店听到三场同时进行的吃豆人游戏。我有点爱你，谷歌。”*

*我希望你不是那天遇到我介绍的 bug 的人之一。如果你是，我的代码吓到你了，我道歉。但是我知道只要我在写代码，就会有错误要处理。我的还是[别人的](https://medium.com/designing-medium/quotation-marks-c8993b54417c)。在发射前(这需要时间)或发射后(这影响人们)找到识别、优先排序和粉碎它们之间的平衡将继续是我面临的最大挑战之一。*

*另一个有趣的部分是，早在 2010 年，我也不得不*重新引入*一个来自原始吃豆人代码的 bug 但那是一篇完全不同的文章。*

*与此同时，我很想听听你的 bug 故事。你参与创建的最奇怪、最意想不到、最酷的 bug 是什么？人们很容易认为这类事情是错误或失败，最好是修复和遗忘。但它们也告诉我们一些关于我们创造的世界的真实情况，以及支撑这个世界的技术的奇妙、疯狂的复杂性。*

*要分享你的故事，写下对这篇文章的回应，并将其标记为“一只虫子的生活”。*



**感谢* [*瑞安·格米克*](https://medium.com/u/16a9b9afca64?source=post_page-----4b589ea1d1e--------------------------------) *和克里斯·坎在涂鸦上的合作。对谷歌吃豆人的更多秘密感兴趣？* [*看一段来自 Google I/O 2011*](https://www.youtube.com/watch?v=ttavBa4giPc&hd=1) *的谈话。如果你想读一个伟大的故事，讲述有多少随机的情况交织在一起，创造出一个否则无法预测的局面，拿起斯坦尼斯瓦夫·莱姆的* [*优秀小说*机会之链](https://en.wikipedia.org/wiki/The_Chain_of_Chance)。*

*文章中的照片是在发射前的通宵拍摄的。感谢 [*丹·普皮乌斯*](https://medium.com/u/d2f101af1183?source=post_page-----4b589ea1d1e--------------------------------) *和* [*杰米·塔尔博特*](https://medium.com/u/4533cec1ea76?source=post_page-----4b589ea1d1e--------------------------------) *对文章的帮助。**



