# 谁在待命？—苏珊·福勒

> 原文:[http://www.susanjfowler.com/blog/2016/9/6/whos-on-call?UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](http://www.susanjfowler.com/blog/2016/9/6/whos-on-call?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

我最近负责的一个项目是确定一个特定的 SRE 团队何时以及如何从开发团队那里接管随叫随到的职责。当然，任务的细节要具体得多，并且不太基于原则，但是实现特定的随叫随到策略需要准确地回答这些问题:谁负责应用程序/服务的随叫随到职责，以及该职责是如何定义的？更简洁地说，谁拥有随叫随到？

答案相当复杂，主要是因为历史原因。我不确定在软件工程的历史中，何时建立并运行了独立的运营组织来承担与运行软件应用程序和系统相关的所谓的“运营”职责，但是它们已经存在了相当长的一段时间(根据我的研究，至少在过去的二十年中——这在软件世界中是一段很长的时间)。不知何故，与构建和运行应用程序和系统相关的任务被分成两个独立但相关的组织:负责“构建”的组织(设计、开发和测试——通常由软件工程师和/或软件开发人员完成)和负责“运行”的组织(24/7 随叫随到，修复系统的任何问题，执行任何必要的可维护工作，等等)。-通常交给系统管理员、系统工程师、开发运维工程师以及现在的站点可靠性工程师的工作)。这是一个粗略的概括，具体的任务委派往往因公司而异，但我发现大多数工程组织确实将职责分为这两大类。

在很大程度上，这种职责分离从高级工程组织的角度来看是有意义的:专业化使工程组织更有效率，优化以便每个角色都被明确定义，最重要的是，工程师可以被视为大型工程组织中的模块化(和可重用)组件。在这个框架中，将随叫随到的责任委托给运营组织是有意义的:构建者构建，然后维护者维护构建者构建的东西。

我相信今天有很多公司的这种结构仍然在运作，而且运作得很好。企业软件，任何拥有稳定版本的公司，以及任何维护大量遗留和/或已建立的稳定软件的公司——对于运行这类系统的公司来说，将责任划分为开发和运营是有意义的。然而，在如今的初创公司和大多数大型科技公司，这种模式毫无意义。原因？在一个快节奏的工程组织中，当每天都有新功能推出，而您是随叫随到的工程师时，底层的事情会很混乱。

这是它的工作原理。

您是一名从事应用程序或系统工作的工程师(无论是在开发方面还是在操作方面)，每天都有新的代码被部署(有时每天部署多次)。几乎每个公司的生产系统停机的首要原因都是糟糕的部署(通常是在部署新特性之前没有发现错误)，而且很有可能，对您的应用程序或系统的这些日常部署很少会导致事故或严重的停机。您随叫随到，因此当出现问题时，您会收到呼叫，必须对问题进行分类，缓解问题，直到找到解决方案，然后在部署解决方案时解决问题。

如果您是开发人员，那么您非常了解应用程序或系统，因此找到根本原因、减轻它，然后解决它并不需要太多的调查工作。如果你在操作方面，你不会像编写代码的开发人员那样了解应用程序或系统，因此分类-缓解-解决过程将花费你更多的时间——最有可能发生的事情是，你将最终找到做出最新提交的开发人员，然后要求他们介入并修复中断。

问题来了。停电会造成经济损失。如果你是随叫随到，并且不能快速解决问题，你就在浪费公司的钱。在这些不稳定的开发条件下，将随叫随到的职责委托给运营工程师*会耗费公司的资金*。

但是等等，你可能会问，为什么不让开发人员自己在这些不稳定的开发案例中随时待命呢？如果他们能快速解决问题，为什么不让他们承担随叫随到的责任呢？我同意你的观点，我想大多数人都会同意，但是这种思路与当今软件工程中普遍存在的构建和运行二分法背道而驰。开发团队希望将随叫随到的责任移交给关注运营的团队，以及与运行应用程序或系统相关的大部分维护任务，谁能责怪他们呢？运营责任是费力不讨好的、艰苦的工作，当你是一名软件开发人员，在你的同行中排名靠后时，你最不希望的事情就是背负着运营任务。因此，对于许多团队来说，解决方案很简单:将运营任务交给单独的运营团队，并专注于设计和构建新功能、新应用程序和新系统。

众所周知，谷歌在这方面采取了某种新的方法，引入了网站可靠性工程师(SRE)的角色。他们没有遵循雇佣系统管理员和系统工程师来承担操作负载的典型路径，而是雇佣了一群受过开发和系统工程培训的软件工程师，然后让他们组成单独的团队来处理操作职责。因为这些 sre 接受过开发方面的培训，所以他们采用了一种新的方法来解决运营问题:他们将大部分工作自动化，并构建新的应用程序和系统来处理运营方面的繁重工作。SREs 负责将不稳定的应用程序开发和部署过程转变为稳定、可靠的系统。

谷歌 SRE 的方法有很多优点，而且对他们非常有效。它对他们如此有效的许多原因是，他们的大多数项目都很稳定，不会在一天内多次添加新功能。将 SREs 放在像这样稳定、长期运行的系统上是有意义的，Google 甚至有标准(这里有个问题！)在 SREs 从开发人员手中接管运营职责之前，系统需要满足这些要求。考虑到这一点，SRE 的方法看起来并不像人们怀疑的那样具有革命性:构建和运行系统之间的区分仍然存在，sre 已经成为新的系统管理员、系统工程师和开发运维工程师。

因此，如果我们看数据，构建者和维护者的二分法对已建立的稳定系统很有效。即使有了 SREs，对于大多数公司和工程组织来说，我们又回到了起点，很少有公司和工程组织能达到像 Google 这样的稳定性。我们可以重新表述我们最初的问题:谁应该在谷歌以外的公司随叫随到？更一般地说，在当今大多数公司中，谁负责维护和运行应用程序？

在我开始寻找我认为的答案之前，我想先讲一些我个人的轶事，因为我很幸运地在二分法的各个方面都工作过。

我有一个开发类型的角色，在那里我对我参与开发的一套应用程序随叫随到，并且了如指掌。当出现故障时，我确切地知道是什么原因造成的，并且能够在几分钟内解决任何事故或停机。

我还担任过 DevOps 的角色，负责公司开发的所有应用程序。当出现问题时，我会收到传呼，找出问题出在哪里，然后——因为我没有权限或知识来解决问题——不得不在半夜给开发人员打电话，让他们修复他们该死的代码。大多数时候，他们不会接电话，或者我会被告知这不是他们的问题，所以我会花几个小时来解决本该两分钟解决的问题。

现在我扮演了一个连接两者的角色。我是嵌入业务关键型服务的 SRE，负责减少每天发生多次部署时带来的开发和部署不稳定性。因为在过去的五个月中，我一直是一个人的团队，支持近 40 项服务，所以我没有对这些服务随叫随到，但我仍然随时被呼叫、pinged 和寻呼，以帮助开展运营工作。我还教优步的新工程师如何在工作的第一周随叫随到。

简而言之，我有一些随叫随到和其他操作职责的经验。

综合考虑历史、原则、现实、数据和我的经验，以下是我的答案。谁应该随叫随到？谁拥有应用程序或服务，谁最了解应用程序或服务，谁就能在最短的时间内解决问题。在大多数情况下，这将是开发团队。如果有问题的应用程序或系统已经建立并且稳定，那么由运营团队接管维护工作是合适的。

好的软件工程是关于责任的。这是关于犯错误，为这些错误承担责任，并从中吸取教训。这是所有权的问题。

据我所见，负责随叫随到职责(和操作任务)的开发团队编写的代码最好。他们构建最稳定、高性能、可靠的应用程序和系统。原因是显而易见的:如果你将在半夜被吵醒，因为你在代码中引入的一个 bug 导致了中断，你将尽最大努力编写尽可能最好的代码，并在它导致中断之前捕捉每一个可能的 bug。拿走所有权，系统就会(通常会)受损。

还有一个后续问题，即当开发人员负责运行他们的服务时，以运营为中心的工程师的角色是什么。我对此有很多想法，但这里有一个基本想法:sre 在组织中有一个非常重要的位置，在那里开发人员承担运营责任，这来自于这样一个事实，即担任类似角色的 sre 和工程师是运行生产系统的专家。他们比任何人都知道如何构建和运行一个稳定、可靠、高性能、容错的系统，因为他们有两个大多数开发人员没有经验的专业领域:分布式系统架构和系统工程。工程组织的工作就是利用这些优势，让软件工程师和开发人员并肩工作来构建和运行最好的系统。在这里，我将不得不把你晾在一边，因为这在实践中看起来应该有一个自己的帖子。

直到下一次！