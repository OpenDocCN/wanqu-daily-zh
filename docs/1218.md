# 单页应用的缺点-亚当·席尔瓦-设计师，伦敦，英国。

> 原文：<http://adamsilver.io/articles/the-disadvantages-of-single-page-applications/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website>

web 社区中的许多人认为 SPAs(单页应用程序)给用户带来了更好的用户体验。

但大多数时候，spa 带给用户的是一种陌生、缓慢、脆弱的体验。此外，水疗更难制作。

在这篇文章中，我将解释这是为什么。但在此之前，让我们确保我们在温泉究竟是什么的问题上达成共识。

## 什么是水疗？

当您想到 SPAs 时，您可能会想到 MVC、数据流和客户端模板。但它们不是温泉的定义特征。

事实上，你可以使用所有这些东西来创建丰富但更传统的 ROCA 风格的站点。

spa 可以定义为使用客户端 JavaScript 处理路由或导航的应用程序。

换句话说，不是让浏览器来处理浏览，而是应用程序代码劫持它来改变 URL、发出请求并使用 JavaScript 自己呈现响应。

使用 JavaScript 做浏览器为之而生并且已经免费做的事情是所有问题的原因。

## 1.快速可靠地来回移动

浏览器存储历史记录，这样当用户点击返回时页面可以快速加载。丹尼尔·普勒斯在[构建单页面应用](https://medium.com/joys-of-javascript/4353246f4480)中解释道:

> “当用户按下浏览器的后退按钮时，他们希望改变迅速发生，并希望页面处于与他们上次看到时相似的状态。
> 
> “在传统的网络模型中，浏览器通常能够使用页面的缓存版本和链接资源。

为了给用户预期的快速体验，我们需要使用 JavaScript 模拟相同的本地浏览器行为。这意味着:

1.  将页面存储在内存、本地存储、客户端数据库或 cookies 中。
2.  确定何时检索缓存页面，何时使其无效。

对于(2)，需要有逻辑来判断用户是否手动更改 URL——通过单击链接或直接在地址栏中键入 URL。

或者按下浏览器的后退或前进按钮，据我所知这是[无法实现的。](http://stackoverflow.com/questions/2008806/how-to-detect-if-the-user-clicked-the-back-button)

浏览器会记住你访问过的页面的滚动位置。丹尼尔·普勒斯再次解释了温泉是如何带来麻烦的:

> “很多网站都搞错了，这真的很烦人。当用户使用浏览器的前进或后退按钮导航时，滚动位置应该与他们上次在页面上的位置相同。这在脸书有时可以正常工作，但有时不行。Google+似乎总是会失去你的滚动位置。”

为了解决这个问题，我们的代码需要在用户来回导航时存储、检索和应用正确的滚动位置。

## 3.取消导航

当用户点击取消或链接时，浏览器将停止任何正在进行的请求。

SPAs 使用 AJAX 检索整个(数据)页面。所以可能会有几个请求。第一个请求可以最后完成。或者用户可以点击(并请求)同一个链接两次。

这是有问题的，因为它的效率很低，会不必要地用完人们的数据，并在随后应该被取消的请求结束时导致视觉故障。

代码需要处理所有这些情况。

为了让用户取消请求，我们需要在 UI 中放置一个自定义的取消按钮——这并不可取。

## 4.处理未保存的更改

在传统的 web 应用程序中，我们可以使用`beforeunload`事件警告用户未保存的更改。但是 spa 不导航，也就是说这个事件不会火。所以这需要从头重新实现。

## 5.搜索引擎排名

搜索引擎优化通常是事后的想法时，建立温泉。但是改造它既困难又昂贵。

为搜索引擎创建一个单独的专用服务器呈现的站点是浪费的，并且意味着必须维护大量额外的代码。

一个传统的罗卡风格的网站，我们可以免费得到这个。

## 6.加载 CSS 和 JS

随着 spa 规模的增长，加载所有资产将变得非常缓慢。这通常会导致有条件地加载 CSS 和 JavaScript。

但是[脚本加载器包含黑客攻击，减慢开发速度并降低可靠性](http://blog.getify.com/labjs-script-loading-the-way-it-should-be/)。

## 7.分析学

默认情况下，分析工具会跟踪页面浏览量，您只需将分析代码添加到页面中。

但是 SPA 页面不是真正的页面，这意味着需要编写额外的逻辑来使 analytics 可以在呈现伪页面时跟踪它们。

## 8.自动化功能测试

与前一点一样，Selenium 等自动化工具知道页面何时加载。

但是自动化工具不会自动知道页面已经加载了 AJAX。

这使得编写处理超时的测试更具挑战性，并且执行起来也更慢。

## 9.内存泄漏

由于 spa 不加载页面，页面可能会保持打开很长时间。

这增加了内存泄漏的机会，从而导致浏览器崩溃，电池供电的设备很快耗尽。

## 10.装载指示器

浏览器的加载指示器为用户在其浏览器中访问的所有网站提供了准确、可预测和熟悉的体验。

由于 spa 使用 AJAX 呈现页面，我们需要从头开始创建一个自定义的加载指示器。除了额外的工作之外，定制装载指示器往往是不准确和不熟悉的。

这可能会导致用户再次点击链接，从而进一步降低用户的速度。

## 11.JavaScript 将会失败

[JavaScript 失败的原因有很多](/blog/javascript-isnt-always-available-and-its-not-the-users-fault/)。而且大多数 spa 不是用[渐进增强](/blog/progressively-enhanced-javascript/)写的。

其结果是一个空白的屏幕，让用户刷新页面或放弃。

## 12.他们可能更慢

spa 很可能比服务器端渲染慢，因为:

> “有趣的事实:Moto G4 评估 2.1MB(解压缩)JS 所需的时间是解码 10MP 图像所需时间的 15.66 倍。”— [哈里·罗伯茨](https://twitter.com/csswizardry/status/971077284034678784?s=19)

## 13.默认情况下它们是不可访问的

阅读 Craig Abbott 的[单页应用程序不可用](http://www.craigabbott.co.uk/one-page-applications-are-not-accessible)。

## 14.他们就是觉得不对劲

阅读 Stefan Tilkov 的[为什么我讨厌你的单页应用](https://www.freecodecamp.org/news/why-i-hate-your-single-page-app-f08bb4ff9134/)。

## 摘要

许多人认为水疗提供了更快更好的体验，但事实上它们创造了一种更慢、不熟悉和难以接近的体验。

更糟糕的是，它们更难制造。

不仅仅是我，Twitter、Lifehacker 和 Delicious 都因为这些原因回到了更传统的架构。

你可以在下面阅读更多内容:

JavaScript 并不比浏览器更擅长浏览。

相反，让浏览器来处理这些，并通过遵循最小功率规则和 T2 原则来专注于创造丰富、健壮和可访问的体验。

## 注册我的时事通讯

加入 5000 多名订阅者的行列，他们通过电子邮件收到了我关于设计的最新文章，这些文章抓住了基础，避免了复杂性，适合所有人。